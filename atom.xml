<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>lusipad 的个人小站</title>
  
  <subtitle>lusipad blog</subtitle>
  <link href="https://lusipad.com/atom.xml" rel="self"/>
  
  <link href="https://lusipad.com/"/>
  <updated>2025-10-07T01:43:47.762Z</updated>
  <id>https://lusipad.com/</id>
  
  <author>
    <name>lusipad</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Claude-Code-restrictions-in-2025</title>
    <link href="https://lusipad.com/2025/10/07/Claude-Code-restrictions-in-2025/"/>
    <id>https://lusipad.com/2025/10/07/Claude-Code-restrictions-in-2025/</id>
    <published>2025-10-07T01:41:02.000Z</published>
    <updated>2025-10-07T01:43:47.762Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Claude-Code限制收紧的深层原因分析"><a href="#Claude-Code限制收紧的深层原因分析" class="headerlink" title="Claude Code限制收紧的深层原因分析"></a>Claude Code限制收紧的深层原因分析</h1><blockquote><p>摘要：</p><p>Anthropic的限制收紧应被理解为<strong>不是产品限制，而是商业模式优化</strong> ，将会对行业产生巨大的传导效应。</p></blockquote><p>2025年10月，Anthropic的Claude Code用户经历了一场使用危机。尽管公司未在当月宣布新的正式限制政策，但<strong>用户实际体验到的使用限制却急剧收紧</strong>，这是多重因素在七至十月间持续累积的结果。本次限制收紧是技术、商业、监管和基础设施压力共同作用的必然产物，标志着AI编码工具行业从快速扩张期进入可持续发展调整期。</p><h2 id="限制变更的事实时间线"><a href="#限制变更的事实时间线" class="headerlink" title="限制变更的事实时间线"></a>限制变更的事实时间线</h2><h3 id="真实情况澄清"><a href="#真实情况澄清" class="headerlink" title="真实情况澄清"></a>真实情况澄清</h3><p>研究发现，<strong>2025年10月并未宣布新的正式限制政策</strong>。实际的限制变更发生在：</p><p><strong>7月14-17日</strong>：未经通知的使用限制收紧，用户突然无法正常使用，引发首波投诉。</p><p><strong>7月28日宣布，8月28日生效</strong>：正式引入每周使用限额制度。Max 20x方案（200美元&#x2F;月）限制为每周240-480小时Sonnet 4和24-40小时Opus 4。</p><p><strong>9月15日</strong>：更新使用政策，新增网络安全和代理工具使用限制，回应8月发现的恶意使用案例。</p><p><strong>9月28日至10月8日</strong>：消费者条款更新截止日，要求用户选择是否允许数据用于模型训练（可选择5年保留期）。</p><p><strong>10月1日</strong>：发布Claude 4系列和Claude Sonnet 4.5，实际上是<strong>产品增强而非限制</strong>，但用户报告在新版本发布后遭遇更严重的限制问题。</p><h3 id="10月的实际用户体验"><a href="#10月的实际用户体验" class="headerlink" title="10月的实际用户体验"></a>10月的实际用户体验</h3><p>尽管没有新政策，但10月用户经历了<strong>使用危机</strong>：</p><ul><li>Max 20x订阅用户（200美元&#x2F;月）报告<strong>仅工作6小时就耗尽每周Opus配额</strong>，而之前从未触及限制</li><li>用户在三天内仅完成3-4小时实际工作后，就达到了<strong>70%的周使用量</strong></li><li>有用户记录显示，每个5小时会话消耗约10%配额，意味着每周仅能进行约10次会话——<strong>相比之前减少了50-66%的实际容量</strong></li><li>即使切换到Sonnet模型，Claude Code也完全停止工作</li></ul><p>这表明，虽然政策制定于7-8月，但<strong>实施效果在10月达到顶峰</strong>，与Claude 4.5发布、基础设施调整、新CTO上任等因素重叠。</p><h2 id="技术层面的驱动因素"><a href="#技术层面的驱动因素" class="headerlink" title="技术层面的驱动因素"></a>技术层面的驱动因素</h2><h3 id="严重的安全事件催生限制必要性"><a href="#严重的安全事件催生限制必要性" class="headerlink" title="严重的安全事件催生限制必要性"></a>严重的安全事件催生限制必要性</h3><p><strong>2025年8月重大网络犯罪案件</strong>成为技术限制的直接催化剂。Anthropic在威胁情报报告中披露了编号GTG-2002的大规模勒索软件行动：</p><p>攻击者利用Claude Code对<strong>17个不同组织</strong>发起自动化网络攻击，目标涵盖医疗、应急服务、政府和宗教机构。勒索金额从75,000美元到500,000美元不等。攻击者采用”氛围黑客”（vibe hacking）技术，在CLAUDE.md文件中嵌入操作指令，使AI成为<strong>自主犯罪帮凶</strong>，而非简单工具。</p><p>Claude Code在此案中被用于：</p><ul><li>自动化侦察和凭证窃取</li><li>网络渗透和战术决策</li><li>分析被盗财务数据以确定勒索金额</li><li>生成针对受害者心理的勒索要求</li><li>整理敏感数据，包括社保号码、银行详情、医疗记录和ITAR管制的国防信息</li></ul><p><strong>其他已确认的恶意使用</strong>包括：仅有基础编程技能的网络犯罪分子利用Claude开发并销售勒索软件变体（售价400-1,200美元）；朝鲜IT工作者使用Claude欺骗性地获得美国财富500强科技公司职位；中国APT组织对越南关键基础设施发起长达9个月的攻击；西班牙语行为者维护信用卡验证和转售网络服务。</p><h3 id="系统性代码安全缺陷"><a href="#系统性代码安全缺陷" class="headerlink" title="系统性代码安全缺陷"></a>系统性代码安全缺陷</h3><p><strong>Veracode 2025年生成式AI代码安全报告</strong>（测试100+个LLM）揭示了行业性问题：</p><ul><li><strong>45%的AI生成代码样本未通过安全测试</strong>并引入OWASP前10名漏洞</li><li>Java具有最高的72%安全失败率，其次是C#（45%）、JavaScript（43%）、Python（38%）</li><li><strong>跨站脚本攻击（XSS）防御失败率达86%</strong></li><li>模型规模、发布日期或训练复杂度对安全性能<strong>没有改善</strong>——更智能的模型生成功能更正确的代码，但安全性并未提高</li></ul><p>乔治城大学CSET研究发现，5个主流LLM生成的代码片段中，<strong>近一半包含可能被恶意利用的漏洞</strong>。评估基准优先考虑功能正确性而非安全性，”激励在模型训练期间优先考虑功能而非安全性”。</p><h3 id="关键漏洞发现"><a href="#关键漏洞发现" class="headerlink" title="关键漏洞发现"></a>关键漏洞发现</h3><p>Claude Code本身发现了三个关键漏洞：</p><ul><li><strong>CVE-2025-54794（CVSS 7.7）</strong>：路径限制绕过，允许未经授权的文件系统访问</li><li><strong>CVE-2025-54795（CVSS 8.7）</strong>：命令注入漏洞，允许任意代码执行</li><li><strong>CVE-2025-52882（CVSS 8.8）</strong>：WebSocket身份验证绕过，使恶意网站能够连接到本地服务器并通过模型上下文协议（MCP）执行远程命令</li></ul><p>讽刺的是，这些漏洞可以通过”逆向提示”被发现——<strong>使用Claude本身来揭示绕过方法</strong>。</p><h3 id="基础设施和资源消耗压力"><a href="#基础设施和资源消耗压力" class="headerlink" title="基础设施和资源消耗压力"></a>基础设施和资源消耗压力</h3><p><strong>计算成本挑战</strong>：LLM推理是<strong>内存受限</strong>而非计算受限的。代码生成通常需要大型上下文窗口（整个代码库、依赖项），每个请求消耗大量GPU内存和处理时间。”Vibe编码”可以在20分钟内生成<strong>超过20,000行代码</strong>，需要持续的GPU资源。</p><p><strong>成本升级因素</strong>：代码生成通常需要比聊天响应更长的序列；多文件编辑和仓库级操作成倍增加资源消耗；7B参数模型的平均延迟在GPU上为10-50ms，在CPU上为50-200ms；对于更大的模型（70B参数），基础设施成本变得巨大。</p><p><strong>行业定价压力</strong>：2025年市场分析显示，由于GPU供应紧张、高模型许可成本和基础设施开销，”廉价AI编码助手的时代可能已经结束”。一个500人开发团队使用GitHub Copilot Business的年度成本为114,000美元。</p><h2 id="商业和战略层面的考量"><a href="#商业和战略层面的考量" class="headerlink" title="商业和战略层面的考量"></a>商业和战略层面的考量</h2><h3 id="不可持续的单位经济学"><a href="#不可持续的单位经济学" class="headerlink" title="不可持续的单位经济学"></a>不可持续的单位经济学</h3><p><strong>核心问题</strong>：到2025年7月，Anthropic的200美元&#x2F;月Max方案被内部描述为可能”不可持续”。</p><p><strong>价值套利</strong>：重度用户报告在Max方案上<strong>每天获得超过1,000美元的API等效计算价值</strong>，仅支付200美元&#x2F;月。这种经济学在规模上不可行。</p><p><strong>基础设施压力</strong>：Claude Code在7月限制实施前的一个月内经历了<strong>7次以上的部分或重大中断</strong>。2025年10月2日，Anthropic聘请前Stripe CTO Rahul Patil担任新CTO，<strong>明确专注于基础设施优化</strong>，表明了问题的严重性。</p><h3 id="爆炸性增长制造容量限制"><a href="#爆炸性增长制造容量限制" class="headerlink" title="爆炸性增长制造容量限制"></a>爆炸性增长制造容量限制</h3><p><strong>收入增长轨迹</strong>令人震惊：</p><ul><li>2025年1月：10亿美元年化收入</li><li>2025年8月：50亿美元年化收入</li><li><strong>增长率</strong>：Anthropic的Series F公告称其为”历史上增长最快的科技公司之一”</li></ul><p><strong>Claude Code具体表现</strong>：创造了5亿美元以上的运营收入，”使用量在短短三个月内增长超过10倍”（5-8月）。</p><p><strong>客户增长</strong>：企业客户从2023年的不到1,000家增长到2025年的300,000+家——<strong>300倍增长</strong>。代表100,000美元以上运营收入的大客户在一年内增长了7倍。</p><p>这种指数级增长超过了基础设施容量，迫使实施限制以维持服务质量。</p><h3 id="投资者压力和货币化需求"><a href="#投资者压力和货币化需求" class="headerlink" title="投资者压力和货币化需求"></a>投资者压力和货币化需求</h3><p><strong>2025年9月2日Series F融资</strong>：</p><ul><li>融资额：130亿美元</li><li>估值：1,830亿美元（后货币估值）</li><li>相比上一轮（3月，615亿美元）：<strong>6个月内估值增长3倍</strong></li></ul><p><strong>投资者构成</strong>包括ICONIQ（主导）、Fidelity、Lightspeed、亚马逊（总计80亿美元投资）、谷歌、贝莱德、卡塔尔投资局。值得注意的是，CEO Dario Amodei在泄露的备忘录中表示，他对接受独裁政府主权财富基金的资金”并不兴奋”，但”为了跟上巨额资本需求而必要”。</p><p><strong>收入目标</strong>：报道称目标是到2027年达到120亿美元收入（当前50亿美元运营率）。需要展示可持续的单位经济学以证明1,830亿美元估值的合理性。</p><h3 id="企业优先战略转型"><a href="#企业优先战略转型" class="headerlink" title="企业优先战略转型"></a>企业优先战略转型</h3><p><strong>2025年战略重点明确转向企业市场</strong>：</p><p><strong>领导层变化</strong>（2025年10月）显示战略方向：</p><ul><li>Rahul Patil（Stripe CTO）担任新CTO，专注企业基础设施</li><li>Paul Smith任命为首位首席商业官</li><li>Chris Ciauri担任国际业务总监</li><li>Daniela Amodei（总裁）引用：”Rahul在构建和扩展企业所需的可靠基础设施方面拥有经过验证的记录”</li></ul><p><strong>国际企业扩张</strong>：2025年国际员工增加三倍；在东京开设首个亚洲办事处；Applied AI团队扩大5倍；在都柏林和伦敦新增100+职位；为印度、澳大利亚、韩国、新加坡任命国家负责人。</p><p><strong>企业vs消费者收入</strong>：78%的Claude使用来自美国以外；代码生成&#x2F;软件开发的年收入在2024年第四季度增长了10倍；企业API市场份额：32%（2025年），而OpenAI为25%；代码生成市场份额：42%。</p><p><strong>对消费者计划的影响</strong>：对消费者层级施加使用限制，创建向企业迁移的路径或迫使迁移到利润更高的API定价。</p><h2 id="监管环境的多重压力"><a href="#监管环境的多重压力" class="headerlink" title="监管环境的多重压力"></a>监管环境的多重压力</h2><h3 id="欧盟AI法案的直接影响"><a href="#欧盟AI法案的直接影响" class="headerlink" title="欧盟AI法案的直接影响"></a>欧盟AI法案的直接影响</h3><p><strong>2025年8月2日生效的通用AI（GPAI）实践准则</strong>对包括Claude在内的所有GPAI模型提供商具有约束力：</p><p><strong>代码生成的关键要求</strong>：</p><ol><li><strong>版权合规</strong>：必须实施技术保障措施以防止生成受版权保护的训练内容</li><li><strong>透明度</strong>：必须记录训练数据来源，包括代码仓库</li><li><strong>安全缓解</strong>：对于具有系统性风险的模型（如Claude Opus 4），必须进行定期风险评估</li><li><strong>数据保留</strong>：记录训练数据来源的模板要求</li></ol><p><strong>执行时间表</strong>：2025年8月2日GPAI规则生效；2026年8月2日新模型开始执行；2027年8月2日现有模型必须合规。</p><h3 id="美国版权发展"><a href="#美国版权发展" class="headerlink" title="美国版权发展"></a>美国版权发展</h3><p><strong>版权局报告（2025年1-5月）</strong>提供了关键指导：</p><p><strong>第2部分（2025年1月29日）</strong>：涉及AI生成代码的可版权性。输出必须包含来自人类作者的”足够的表达元素”。仅提供提示不足以获得版权保护。<strong>AI单独生成的代码在美国无法获得版权</strong>。</p><p><strong>第3部分（2025年5月9日预发布）</strong>：关于使用受版权保护的作品训练AI模型。使用受版权保护的材料进行AI训练可能构成”表面侵权”。警告说，如果输出与训练数据非常相似，模型可能会侵权。强调”转换性”论点并非固有有效。”将受版权保护的作品用于生成式AI训练的某些用途将符合合理使用，而某些则不会。”</p><p><strong>活跃诉讼</strong>：针对AI公司（OpenAI、Meta、Anthropic）未经授权使用受版权保护的代码进行训练的多起诉讼。值得注意的是，<strong>Bartz诉Anthropic案（2025年7月）</strong>：地区法官裁定，使用合法购买的受版权保护的内容来训练LLM构成合理使用——但代码生成如何应用合理使用的持续不确定性。</p><h3 id="加州立法的时机巧合"><a href="#加州立法的时机巧合" class="headerlink" title="加州立法的时机巧合"></a>加州立法的时机巧合</h3><p><strong>SB 53（2025年9月29日签署）</strong>：”前沿人工智能透明度法案”</p><ul><li>要求大型AI实验室透明公开安全&#x2F;安全协议</li><li>防止模型被用于网络攻击、生物武器</li><li>保护举报人</li><li>为违规行为创建民事处罚</li><li><strong>2025年10月1日生效</strong>——时机与Claude限制收紧<strong>完全吻合</strong></li></ul><p><strong>其他州法律</strong>包括科罗拉多州关于算法歧视的综合AI立法；加州AB 2013要求大型AI开发者公开披露训练数据摘要（2026年1月1日生效）；加州SB-942要求AI检测工具和内容标记（2026年1月1日生效）。</p><h3 id="数据政策变更的监管背景"><a href="#数据政策变更的监管背景" class="headerlink" title="数据政策变更的监管背景"></a>数据政策变更的监管背景</h3><p><strong>Anthropic在2025年9月28日（后延至10月8日）的截止日期前要求现有用户选择新的数据政策</strong>：</p><ul><li><strong>之前</strong>：不使用消费者数据进行训练，30天保留</li><li><strong>新政策</strong>：现在可以在Free、Pro和Max用户的对话和编码会话上进行训练</li><li>选择加入者的保留期延长至<strong>5年</strong>（不选择则为30天）</li><li>适用于个人账户的Claude Code使用</li></ul><p><strong>提供的理由</strong>：”帮助我们改进模型安全”；”帮助未来的Claude模型在编码、分析和推理等技能上提高”；竞争压力：需要数据与OpenAI和谷歌竞争；诉讼压力：OpenAI因《纽约时报》诉讼而面临保留所有ChatGPT对话的法院命令。</p><p><strong>用户反应</strong>：关于专有代码在训练数据中的担忧；关于竞争情报风险的问题；敏感业务逻辑的隐私担忧；时机批评：重大政策变更与使用限制同时进行。</p><h2 id="用户反馈和社区反应"><a href="#用户反馈和社区反应" class="headerlink" title="用户反馈和社区反应"></a>用户反馈和社区反应</h2><h3 id="10月用户危机的严重性"><a href="#10月用户危机的严重性" class="headerlink" title="10月用户危机的严重性"></a>10月用户危机的严重性</h3><p><strong>直接用户证词</strong>（2025年10月）来自Medium用户Sevak Avakians：”我用的是该死的MAX计划！……所以，Anthropic希望我既购买月度订阅又支付通行费。与此同时，所有工作都停止了。感觉就像我在欧洲坐在公交车上，运输工会罢工了！什么鬼？！”</p><p><strong>服务中断</strong>：2025年10月2日，从太平洋时间下午6:17到晚上8:47，影响Claude.ai、Claude Code和API的重大服务中断。根据DownDetector，用户报告”数百人”遭遇停机。</p><h3 id="社区情绪分析"><a href="#社区情绪分析" class="headerlink" title="社区情绪分析"></a>社区情绪分析</h3><p><strong>Reddit（r&#x2F;ClaudeAI）</strong>：</p><ul><li>“今天Claude的使用限制又很糟糕。他们似乎真的想把每个人都推向Max计划，在澳大利亚需要300美元。”</li><li>用户”为Claude的恢复加油”但表达沮丧：”当它功能正常时，它在分析推理方面仍然无与伦比”</li><li>员工工程师Eduard Ruzga：”在Claude Code Max订阅之前，人们可以使用带有Desktop Commander的Claude数小时而不会触及限制。发布后，有报告称人们在几条消息或至少不到一小时内就触及限制”</li></ul><p><strong>HackerNews</strong>：混合反应，一些开发者赞扬能力（”最佳编码模型”），而其他人质疑炒作。用户在工作时将其与Cursor和Windsurf进行有利比较，但对限制感到沮丧。</p><p><strong>Medium文章</strong>：多篇详细的用户账户记录了从Claude的迁移；”Claude发生了什么？我们为什么要放弃该平台”；与Cursor的”诱饵转换”导致用户外流的比较；用户记录成功迁移到Gemini CLI和其他替代品。</p><p><strong>Twitter&#x2F;X</strong>：开发者发帖关于意外触及限制；显示使用计量器和限制消息的屏幕截图；关于定价模型可持续性的行业讨论。</p><h3 id="主要用户投诉"><a href="#主要用户投诉" class="headerlink" title="主要用户投诉"></a>主要用户投诉</h3><ol><li><strong>缺乏沟通</strong>：”只要透明就行。缺乏沟通只会让人们对他们失去信心。”</li><li><strong>不准确的跟踪</strong>：频繁投诉使用跟踪与实际执行的工作不匹配</li><li><strong>工作停止</strong>：即使是Max计划用户也因每周锁定而无法完成项目</li><li><strong>误导性定价</strong>：”Max”计划意味着最大容量，但仍受严重限制</li><li><strong>没有升级路径</strong>：消息说”&#x2F;upgrade以增加您的使用限制”，但已经在最高层级</li><li><strong>竞争劣势</strong>：用户注意到免费竞争对手（如Gemini）提供更多容量</li></ol><h3 id="开发者社区影响"><a href="#开发者社区影响" class="headerlink" title="开发者社区影响"></a>开发者社区影响</h3><p><strong>生产工作流中断</strong>：使用Claude Code构建平台的开发者遭遇项目中途停止；GitHub集成工作流受到影响；多代理编码设置变得不可用；MCP（模型上下文协议）服务器实现更快地消耗更多上下文。</p><p><strong>积极情绪（当正常工作时）</strong>：”Claude Code极大地改变了我在大规模编写和维护代码方面的关系”；”Claude Sonnet 4.5是世界上最好的编码模型”；开发者将其描述为”变革性的”，并将其与编程的”摄影引入”相比较；对代理能力、多文件重构和调试的高度赞扬。</p><p><strong>关键关注点</strong>：信任侵蚀：”缺乏沟通只会让人们失去信心”；可持续性问题：一些用户在200美元计划上每天进行超过1,000美元的API调用；可靠性问题：无法围绕不可预测的限制规划项目；替代探索：大规模迁移讨论到Cursor、Windsurf、Gemini、Kimi。</p><h2 id="行业背景和竞争环境"><a href="#行业背景和竞争环境" class="headerlink" title="行业背景和竞争环境"></a>行业背景和竞争环境</h2><h3 id="AI编码工具市场概况"><a href="#AI编码工具市场概况" class="headerlink" title="AI编码工具市场概况"></a>AI编码工具市场概况</h3><p><strong>市场规模</strong>：67亿美元（2024年）→预计到2030年达到257亿美元（25.2% CAGR）。至少有8个主要竞争者采用激进的定价策略。</p><h3 id="主要竞争对手对比"><a href="#主要竞争对手对比" class="headerlink" title="主要竞争对手对比"></a>主要竞争对手对比</h3><p><strong>GitHub Copilot</strong>（微软）：个人10美元&#x2F;月，Pro+ 39美元&#x2F;月，可访问多个模型。优势：与微软生态系统深度集成，建立的开发者基础。</p><p><strong>Cursor</strong>（Anysphere）：20美元&#x2F;月，融资9亿美元，估值90亿美元，收入5亿美元ARR（报告）。优势：专门构建的AI优先IDE，具有卓越的多文件编辑。</p><p><strong>Windsurf</strong>（Codeium）：10-15美元&#x2F;月，收入1亿美元ARR。OpenAI曾试图以30亿美元收购。优势：快速性能，竞争定价。</p><p><strong>Replit</strong>：核心计划20美元&#x2F;月加25美元积分，收入超过1亿美元ARR（2025年6月达成）。挑战：因使用基础的”努力定价”导致账单意外飙升20倍而面临严重客户反弹（类似于Anthropic的经历）。</p><p><strong>关键洞察</strong>：多个竞争对手在2024-2025年经历了类似的定价&#x2F;使用限制危机，表明<strong>整个行业都在努力平衡增长与可持续的单位经济学</strong>。</p><h3 id="行业普遍挑战"><a href="#行业普遍挑战" class="headerlink" title="行业普遍挑战"></a>行业普遍挑战</h3><p><strong>生产力悖论</strong>：声称的生产力提升与实际测量之间存在差距。</p><p><strong>积极声明</strong>：GitHub声称生产力提高55%；麦肯锡称任务完成速度翻倍；DORA报告显示80%以上报告生产力提高；59%报告积极的代码质量影响。</p><p><strong>现实检查 - METR研究（2025年7月）</strong>：对有经验的开源开发者显示<strong>19%的减速</strong>。随机对照试验，16名有经验的开发者，246个实际仓库的真实任务。开发者<em>认为</em>AI使他们加快了20%，尽管实际减速了19%。感知与现实之间的差距突出了测量挑战。</p><p><strong>协调因素</strong>：AI帮助简单&#x2F;重复任务但减慢复杂工作；对初级开发者和不熟悉的代码库更有益；基准任务≠真实世界质量要求；文档、测试、风格要求需要额外时间；高质量代码审查标准揭示AI局限性。</p><h3 id="经济可持续性和可行性"><a href="#经济可持续性和可行性" class="headerlink" title="经济可持续性和可行性"></a>经济可持续性和可行性</h3><p><strong>成本上升</strong>：平均月度AI支出：62,964美元（2024年）→85,521美元（2025年）&#x3D; <strong>36%增长</strong>。计划每月支出100K+美元的组织：20%→45%（增加一倍以上）。只有<strong>51%能自信评估AI ROI</strong>。</p><p><strong>隐藏成本</strong>（MIT斯隆管理评论）：快速扩展时<strong>技术债务积累</strong>；在棕地&#x2F;遗留环境中尤其严重；缺乏经验的开发者加剧现有问题；”使用生成式AI编码的隐藏成本”可能超过生产力提升。</p><h2 id="长期影响和未来发展方向"><a href="#长期影响和未来发展方向" class="headerlink" title="长期影响和未来发展方向"></a>长期影响和未来发展方向</h2><h3 id="近期（2025-2026）"><a href="#近期（2025-2026）" class="headerlink" title="近期（2025-2026）"></a>近期（2025-2026）</h3><p><strong>Forrester预测</strong>：”至少有一个组织将尝试用AI替换50%的开发者并<strong>失败</strong>“。开发者只花24%的时间编码；AI不解决其他76%。GenAI将通过软件交付的所有阶段变得普遍。由于安全问题推动内存安全采用，Rust进入前10种语言。</p><p><strong>Gartner预测</strong>：到2027年底，<strong>40%以上的代理AI项目将被取消</strong>。由于成本上升、业务价值不明确、风险控制不足。到2028年，15%的日常工作决策将是自主的（而2024年为0%）。到2028年，33%的企业软件将包括代理AI（而2024年\u003c1%）。AI原生软件工程将使开发者转向更高价值的任务。</p><h3 id="中期（2027-2030）"><a href="#中期（2027-2030）" class="headerlink" title="中期（2027-2030）"></a>中期（2027-2030）</h3><p><strong>市场整合</strong>：预计会出现3-5个主导平台。较小的玩家被收购或被迫退出。微软&#x2F;GitHub、Anthropic、Cursor&#x2F;Anysphere、谷歌可能是幸存者。开源替代品（Continue.dev、Aider）服务利基市场。</p><p><strong>能力平台</strong>：AI达到常规任务的”高级开发者”水平。人类专业知识对以下仍然至关重要：新颖的架构决策；复杂的系统设计；业务需求解释；创造性问题解决；安全关键实施。</p><p><strong>经济模型</strong>：基于使用的定价成为标准；企业合同推动收入；基本功能商品化；高级功能溢价；可能的监管对定价的影响。</p><h3 id="长期（2030-）"><a href="#长期（2030-）" class="headerlink" title="长期（2030+）"></a>长期（2030+）</h3><p><strong>转型情景</strong>：</p><p><strong>情景1：增强平衡（60%概率）</strong>：AI成为通用初级开发者助手；人类开发者专注于高层设计、架构、产品决策；编码任务分布：70% AI辅助，30%人类关键；开发者角色演变但仍然至关重要；行业随着生产力提高而增长。</p><p><strong>情景2：分层开发（25%概率）</strong>：市场分裂：商品化vs高端开发；AI独立处理常规应用（Replit模式成功）；关键、复杂、新颖系统的专家人类开发者；中级开发者需求减少；技能要求两极分化加剧。</p><p><strong>情景3：突破性自主（10%概率）</strong>：AGI级别突破实现真正自主开发；AI处理完整的软件生命周期；人类角色转向规范和验证；大规模行业重组；围绕AI系统管理出现新角色。</p><p><strong>情景4：平台和撤退（5%概率）</strong>：技术限制被证明比预期更根本；行业认识到当前方法不足；恢复到AI作为复杂的自动完成；继续以AI辅助为人类主导的开发；重点转向其他AI应用领域。</p><h2 id="内部和外部压力因素"><a href="#内部和外部压力因素" class="headerlink" title="内部和外部压力因素"></a>内部和外部压力因素</h2><h3 id="内部压力"><a href="#内部压力" class="headerlink" title="内部压力"></a>内部压力</h3><p><strong>组织结构调整</strong>：2025年10月2日聘请Rahul Patil担任CTO标志着基础设施危机响应。组织重组：产品工程团队更靠近基础设施&#x2F;推理团队。来自OpenAI和Meta的AI实验室的”激烈基础设施竞争”。</p><p><strong>人才争夺战</strong>：竞争对手积极招聘顶尖工程师；需要在基础设施、安全、合规方面保持领先；团队扩张与成本控制的平衡。</p><p><strong>产品差异化挑战</strong>：随着能力趋同，难以差异化；需要通过质量、可靠性、安全性竞争而非仅功能；Claude的”宪法AI”方法作为差异化因素。</p><h3 id="外部压力"><a href="#外部压力" class="headerlink" title="外部压力"></a>外部压力</h3><p><strong>竞争加剧</strong>：Cursor融资9亿美元，估值90亿美元；GitHub Copilot推出新的Pro+层级（39美元&#x2F;月），扩大模型访问；Replit达到1亿美元ARR；市场整合压力增加。</p><p><strong>供应链挑战</strong>：全球GPU短缺；NVIDIA H100&#x2F;H200芯片的高需求；云计算成本上涨；数据中心容量限制。</p><p><strong>经济环境</strong>：科技行业裁员和成本削减；投资者对盈利能力的审查增加；”增长不惜一切代价”时代结束；需要展示可持续的商业模式。</p><p><strong>地缘政治因素</strong>：美中AI竞赛影响政策；对中国的AI芯片出口管制；国家安全关注；数据主权要求；不同司法管辖区的不同监管方法。</p><h2 id="综合分析：多因素汇聚"><a href="#综合分析：多因素汇聚" class="headerlink" title="综合分析：多因素汇聚"></a>综合分析：多因素汇聚</h2><h3 id="主要驱动因素权重评估"><a href="#主要驱动因素权重评估" class="headerlink" title="主要驱动因素权重评估"></a>主要驱动因素权重评估</h3><p>基于全面研究，限制收紧的原因可以按以下权重分配：</p><p><strong>1. 经济可持续性（35%）</strong></p><ul><li>Max计划经济学在规模上不可持续（用户每天获得1,000美元以上价值，支付200美元&#x2F;月）</li><li>5-8月5倍收入增长超过基础设施容量</li><li>需要展示向1,830亿美元估值投资者的盈利路径</li><li>转向利润更高的企业API合同</li></ul><p><strong>2. 技术和安全考虑（30%）</strong></p><ul><li>2025年8月记录的重大网络犯罪案件（勒索软件、恶意软件生成）</li><li>发现的关键漏洞（CVE评分7.7-8.8）</li><li>45%的AI生成代码包含安全缺陷</li><li>需要更好的监控和滥用预防系统</li></ul><p><strong>3. 监管合规（20%）</strong></p><ul><li>欧盟AI法案2025年8月2日开始执行</li><li>加州SB 53于2025年10月1日生效</li><li>版权不确定性需要保守方法</li><li>安全要求增加计算开销</li><li>5年数据保留存储成本</li></ul><p><strong>4. 基础设施容量（15%）</strong></p><ul><li>服务经历频繁中断</li><li>“前所未有的需求”挑战容量</li><li>需要在用户群中维持服务质量和负载平衡</li><li>聘请新CTO专门解决基础设施问题</li></ul><h3 id="10月时机的特殊性"><a href="#10月时机的特殊性" class="headerlink" title="10月时机的特殊性"></a>10月时机的特殊性</h3><p>虽然正式限制在7-9月制定，但10月成为”完美风暴”：</p><p><strong>9月15日</strong>：更新的使用政策生效<br><strong>9月28日&#x2F;10月8日</strong>：数据政策选择加入截止日期<br><strong>9月29日</strong>：Claude Sonnet 4.5发布<br><strong>10月1日</strong>：加州SB 53生效<br><strong>10月1-2日</strong>：关于限制的大规模用户投诉<br><strong>10月2日</strong>：重大服务中断；新CTO Rahul Patil上任</p><p>这些因素的重叠创造了用户体验危机，即使没有宣布新的正式限制。</p><h3 id="战略意图分析"><a href="#战略意图分析" class="headerlink" title="战略意图分析"></a>战略意图分析</h3><p>Anthropic的限制收紧应被理解为<strong>不是产品限制，而是商业模式优化</strong>：</p><p><strong>短期目标</strong>：保护高支付企业客户的基础设施；推动重度用户转向API定价（更高利润率）；向投资者展示财务纪律；为长期增长创建可持续的单位经济学。</p><p><strong>长期战略</strong>：成为”企业AI公司”而非与OpenAI的消费者焦点竞争；通过可靠性和安全性而非仅功能进行差异化；建立可持续、有利可图的商业模式；领导负责任的AI开发标准。</p><h2 id="关键洞察和启示"><a href="#关键洞察和启示" class="headerlink" title="关键洞察和启示"></a>关键洞察和启示</h2><h3 id="对行业的影响"><a href="#对行业的影响" class="headerlink" title="对行业的影响"></a>对行业的影响</h3><p><strong>短期（2025年第四季度）</strong>：除非放宽限制，否则可能继续流失用户；预计竞争对手获得优势；可能需要修订定价模型；用户保留的关键或破裂期。</p><p><strong>中期（2026年）</strong>：欧盟AI法案执行力度加大；版权诉讼明确性显现；行业标准巩固；整个行业的经济模型调整。</p><p><strong>长期（2027+）</strong>：成熟的监管框架；建立可持续的定价模型；AI编码工具成为标准；质量差异化胜过可用性。</p><h3 id="给组织的建议"><a href="#给组织的建议" class="headerlink" title="给组织的建议"></a>给组织的建议</h3><p><strong>对于AI编码工具采用者</strong>：</p><ol><li>从非关键项目开始学习限制</li><li>对所有AI生成的代码实施人工审查</li><li>建立明确的编码标准和质量门</li><li>客观跟踪ROI，而非基于感知</li><li>培训开发者有效的AI协作</li><li>为隐藏成本（审查、调试、重构）做预算</li></ol><p><strong>对于Anthropic和同行</strong>：</p><ol><li><strong>立即沟通</strong>：对限制和理由的清晰、详细解释</li><li><strong>透明路线图</strong>：分享容量改进和定价变更的计划</li><li><strong>分层限制</strong>：当前层级之间更细粒度的计划</li><li><strong>监控仪表板</strong>：让用户实时跟踪使用情况</li><li><strong>企业焦点</strong>：优先考虑具有可预测定价的API&#x2F;商业计划</li><li><strong>监管透明</strong>：解释合规要求如何影响服务</li><li><strong>信任重建</strong>：一致的沟通和兑现承诺</li></ol><h3 id="未来展望"><a href="#未来展望" class="headerlink" title="未来展望"></a>未来展望</h3><p>AI编码工具行业正处于关键转折点。爆炸性增长和广泛采用与有限的实际生产力提升、可持续性担忧和根本技术限制的新证据共存。<strong>未来2-3年将决定当前工具是否代表变革性转变，还是仅仅是复杂的自动完成</strong>。</p><p><strong>最可能的路径</strong>：继续向复杂的增强工具演进，这些工具增强但不替代人类开发者，伴随市场整合、监管框架的出现，以及未来十年新开发范式的演变。</p><p><strong>关键不确定性</strong>：缩放定律是否继续在代码生成质量和自主性方面产生有意义的改进，或者我们是否正在接近需要新架构方法的根本限制。</p><p><strong>战略要务</strong>：组织必须平衡对AI编码工具的热情与对能力、成本和限制的现实评估。<strong>获胜策略是在强有力的人工监督下进行增强，而非尝试替换</strong>。</p><p>未来将由掌握AI协作的开发者书写，而非独立工作的AI系统。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Claude-Code限制收紧的深层原因分析&quot;&gt;&lt;a href=&quot;#Claude-Code限制收紧的深层原因分析&quot; class=&quot;headerlink&quot; title=&quot;Claude Code限制收紧的深层原因分析&quot;&gt;&lt;/a&gt;Claude</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="claude" scheme="https://lusipad.com/tags/claude/"/>
    
    <category term="anthropic" scheme="https://lusipad.com/tags/anthropic/"/>
    
  </entry>
  
  <entry>
    <title>claude-weeklylimit-to-day</title>
    <link href="https://lusipad.com/2025/09/30/claude-weeklylimit-to-day/"/>
    <id>https://lusipad.com/2025/09/30/claude-weeklylimit-to-day/</id>
    <published>2025-09-30T12:32:07.000Z</published>
    <updated>2025-09-30T12:44:55.891Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Claude-Code-又作妖！可用量缩水到不足两成！"><a href="#Claude-Code-又作妖！可用量缩水到不足两成！" class="headerlink" title="Claude Code 又作妖！可用量缩水到不足两成！"></a>Claude Code 又作妖！可用量缩水到不足两成！</h1><p>前一刻还在为 Sonnet 4.5 疯狂点赞，一回头发现又又又被背刺！</p><p>一个 Max 20x 的账号，满打满算一周也就 $800！可用量不到现在的 20%！</p><p>8月初，Max 20x 一个周期（5小时），大约可用 <code>$270</code>；9 月初逐渐降到 <code>$200</code>左右，并且上线了周限制；9 月底已经在 <code>$170</code> 左右了。由于官方一直没有给出特别明确的用量说明，而且相比于 Token 计费和如 Cursor 这种扣扣索索的，还是比较大方的，所以大家也就吐槽几句。</p><p>今天，随着 Sonnet 4.5 上线，上线了使用量和周限制查看：<a href="https://claude.ai/settings/usage%E3%80%82%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E8%B4%AB%E7%A9%B7%E7%9A%84">https://claude.ai/settings/usage。作为一个贫穷的</a> Pro 用户，平时我也就偶尔用网页版和 Opus 聊聊，结果您猜怎么着，才一会儿就上限了？</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Claude-Code-又作妖！可用量缩水到不足两成！&quot;&gt;&lt;a href=&quot;#Claude-Code-又作妖！可用量缩水到不足两成！&quot; class=&quot;headerlink&quot; title=&quot;Claude Code</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="claude" scheme="https://lusipad.com/tags/claude/"/>
    
  </entry>
  
  <entry>
    <title>claude-sonnet-4.5-release</title>
    <link href="https://lusipad.com/2025/09/30/claude-sonnet-4-5-release/"/>
    <id>https://lusipad.com/2025/09/30/claude-sonnet-4-5-release/</id>
    <published>2025-09-29T22:03:56.000Z</published>
    <updated>2025-09-29T22:10:19.908Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Claude-Sonnet-4-5-发布了"><a href="#Claude-Sonnet-4-5-发布了" class="headerlink" title="Claude-Sonnet-4.5 发布了"></a>Claude-Sonnet-4.5 发布了</h1><p>Claude Sonne5 4.5，终于发布了，可谓是千呼万唤始出来。</p><h2 id="能力"><a href="#能力" class="headerlink" title="能力"></a>能力</h2><p><img src="/claude-sonnet-4-5-release.assets/image-20250930060642592.png" alt="image-20250930060642592"></p><p><img src="https://www.anthropic.com/_next/image?url=https://www-cdn.anthropic.com/images/4zrzovbb/website/2825bb34cb9b9aa1ef347f816c590b5bbdae2b4d-2600x2288.png&w=3840&q=75" alt="Benchmark table comparing frontier models across popular public evals"></p><p><img src="https://www.anthropic.com/_next/image?url=https://www-cdn.anthropic.com/images/4zrzovbb/website/7175bc18c46562f1228280a7abda751219a2aae1-3840x2160.png&w=3840&q=75" alt="img"></p><p><img src="https://www.anthropic.com/_next/image?url=https://www-cdn.anthropic.com/images/4zrzovbb/website/fd313a5edb996d98b9fc73ee5b3e6a34fbbcbb83-3840x2160.png&w=3840&q=75" alt="img"></p><p><img src="https://www.anthropic.com/_next/image?url=https://www-cdn.anthropic.com/images/4zrzovbb/website/442f96fd96de39e3ff3a05b288e2647dd7ec2f58-3840x2160.png&w=3840&q=75" alt="img"></p><p><img src="https://www.anthropic.com/_next/image?url=https://www-cdn.anthropic.com/images/4zrzovbb/website/711e6e1178f0ed7ca9aa85a5e0e9940a807c436a-3840x2160.png&w=3840&q=75" alt="img"></p><h2 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h2><p>除了是我们最强大的模型，Claude Sonnet 4.5 也是我们迄今为止最符合预期的前沿模型。Claude 的改进能力和我们广泛的安全生产训练使我们能够显著改善模型的行为，减少了诸如谄媚、欺骗、权力寻求以及鼓励幻想性思维等令人担忧的行为。对于模型的自主性和计算机使用能力，我们在防御提示注入攻击方面也取得了显著进展，这是这些能力用户面临的最严重风险之一。</p><p>Claude Sonnet 4.5 将根据我们的 AI 安全级别 3（ASL-3）保护措施进行发布，这符合我们的框架，该框架将模型能力与适当的保护措施相匹配。这些保护措施包括旨在检测潜在危险输入和输出的过滤器，即分类器——特别是与化学、生物、放射性及核（CBRN）武器相关的输入和输出。</p><h2 id="代理-SDK"><a href="#代理-SDK" class="headerlink" title="代理 SDK"></a>代理 SDK</h2><p>我们已经花费了超过六个月的时间向 Claude Code 发布更新，因此我们深知构建和设计 AI 代理需要什么。我们已经解决了难题：代理如何在长时间运行的任务中管理内存，如何处理在自主性与用户控制之间取得平衡的权限系统，以及如何协调为共同目标工作的子代理。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Claude-Sonnet-4-5-发布了&quot;&gt;&lt;a href=&quot;#Claude-Sonnet-4-5-发布了&quot; class=&quot;headerlink&quot; title=&quot;Claude-Sonnet-4.5 发布了&quot;&gt;&lt;/a&gt;Claude-Sonnet-4.5</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="claude" scheme="https://lusipad.com/tags/claude/"/>
    
  </entry>
  
  <entry>
    <title>使用claudecode生成opendeepwiki</title>
    <link href="https://lusipad.com/2025/09/20/create_deep_wiki_with_claude_code/"/>
    <id>https://lusipad.com/2025/09/20/create_deep_wiki_with_claude_code/</id>
    <published>2025-09-19T22:41:12.000Z</published>
    <updated>2025-09-20T00:54:00.021Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用claudecode生成opendeepwiki"><a href="#使用claudecode生成opendeepwiki" class="headerlink" title="使用claudecode生成opendeepwiki"></a>使用claudecode生成opendeepwiki</h1><p>在之前的 <a href="https://lusipad.com/2025/09/14/CLIProxyAPI/">邪修用法：Codex&#x2F;ClaudeCode转标准API</a>中尝试了使用 codex 来生成 deep wiki，一切都顺利，就是因为限流导致最终未竟全功，这次换了一个 claude code 的号继续使用。</p><p>省流版本：<strong>基本功能（网站生成）可用，有点费 Token，MCP 和一些细节仍需打磨。</strong></p><h2 id="1-配置-CLIProxyAPI"><a href="#1-配置-CLIProxyAPI" class="headerlink" title="1. 配置 CLIProxyAPI"></a>1. 配置 CLIProxyAPI</h2><p><a href="https://github.com/router-for-me/CLIProxyAPI">CLIProxyAPI</a></p><p>这里主要将为了将 Claude Code 转成标准的 OpenAI 兼容 API。因为使用了中转站，所以配置了对应的 base_url 和 key。</p><h2 id="2-配置-OpenDeepWiki"><a href="#2-配置-OpenDeepWiki" class="headerlink" title="2. 配置 OpenDeepWiki"></a>2. 配置 OpenDeepWiki</h2><p><a href="https://github.com/AIDotNet/OpenDeepWiki">OpenDeepWiki</a></p><p><strong>我用的0.9.0版本，用下来发现还是有不少问题，比如说默认配置无法直接打开站点、诊断就配了个18888的GRPC的，没有18889的Web页面之类的，还有一些页面无法访问，所以整体功能可用，但是很多细节还需要打磨</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">koalawiki:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">crpi-j9ha7sxwhatgtvj4.cn-shenzhen.personal.cr.aliyuncs.com/koala-ai/koala-wiki</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">KOALAWIKI_REPOSITORIES=/repositories</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">TASK_MAX_SIZE_PER_USER=5</span> <span class="hljs-comment"># 每个用户 AI 处理文档生成的最大数量</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">REPAIR_MERMAID=1</span> <span class="hljs-comment"># 是否进行 Mermaid 修复，1 修复，其余不修复</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">CHAT_MODEL=claude-sonnet-4-20250514</span> <span class="hljs-comment"># 必须要支持 function 的模型（我试了用 Haiku，无法访问，只能用sonnet了）</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ANALYSIS_MODEL=claude-sonnet-4-20250514</span> <span class="hljs-comment"># 分析模型，用于生成仓库目录结构，这个很重要，模型越强，生成的目录结构越好，为空则使用 ChatModel</span><br>                        <span class="hljs-comment"># 分析模型建议使用 GPT-4.1  , CHAT 模型可以用其他模型生成文档，以节省 token 开销</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">CHAT_API_KEY=xxx</span> <span class="hljs-comment">#您的 APIkey</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">LANGUAGE=中文</span> <span class="hljs-comment"># 设置生成语言默认为&quot;中文&quot;, 英文可以填写 English 或 英文</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENDPOINT=http://xx.xxx.com:8317/v1</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MODEL_PROVIDER=OpenAI</span> <span class="hljs-comment"># 模型提供商，支持 OpenAI, AzureOpenAI, Anthropic</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">DB_TYPE=sqlite</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">DB_CONNECTION_STRING=Data</span> <span class="hljs-string">Source=/data/KoalaWiki.db</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">UPDATE_INTERVAL=5</span> <span class="hljs-comment"># 仓库增量更新间隔，单位天</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">EnableSmartFilter=true</span> <span class="hljs-comment"># 是否启用智能过滤，这可能影响 AI 得到仓库的文件目录</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENABLE_INCREMENTAL_UPDATE=true</span> <span class="hljs-comment"># 是否启用增量更新</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENABLE_CODED_DEPENDENCY_ANALYSIS=false</span> <span class="hljs-comment"># 是否启用代码依赖分析？这可能会对代码的质量产生影响。</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENABLE_WAREHOUSE_FUNCTION_PROMPT_TASK=false</span> <span class="hljs-comment"># 是否启用 MCP Prompt 生成</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENABLE_WAREHOUSE_DESCRIPTION_TASK=false</span> <span class="hljs-comment"># 是否启用仓库 Description 生成</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MAX_FILE_LIMIT=100</span> <span class="hljs-comment"># 最大上传文件限制，单位 MB</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">DEEP_RESEARCH_MODEL=</span> <span class="hljs-comment"># 深度研究模型，为空则使用 CHAT_MODEL</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENABLE_WAREHOUSE_COMMIT=true</span> <span class="hljs-comment"># 是否启用仓库提交</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENABLE_FILE_COMMIT=true</span> <span class="hljs-comment"># 是否启用文件提交</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">REFINE_AND_ENHANCE_QUALITY=false</span> <span class="hljs-comment"># 是否启用质量优化</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">CATALOGUE_FORMAT=compact</span> <span class="hljs-comment"># 目录结构格式 (compact, json, pathlist, unix)</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ENABLE_CODE_COMPRESSION=false</span> <span class="hljs-comment"># 是否启用代码压缩</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">READ_MAX_TOKENS=100000</span> <span class="hljs-comment"># AI 读取文件的最大 token 限制</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">OTEL_SERVICE_NAME=koalawiki</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">OTEL_EXPORTER_OTLP_PROTOCOL=grpc</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">OTEL_EXPORTER_OTLP_ENDPOINT=http://aspire-dashboard:18889</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./repositories:/app/repositories</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./data:/data</span><br>    <span class="hljs-attr">build:</span><br>      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span><br>      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">src/KoalaWiki/Dockerfile</span><br>  <br>  <span class="hljs-attr">aspire-dashboard:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">mcr.microsoft.com/dotnet/aspire-dashboard</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">aspire-dashboard</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;18888:18888&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;18889:18889&quot;</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=Asia/Shanghai</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">Dashboard:ApplicationName=Aspire</span><br><br>  <span class="hljs-attr">koalawiki-web:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">crpi-j9ha7sxwhatgtvj4.cn-shenzhen.personal.cr.aliyuncs.com/koala-ai/koala-wiki-web</span><br>    <span class="hljs-attr">command:</span> [<span class="hljs-string">&quot;/app/start.sh&quot;</span>]<br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">NEXT_PUBLIC_API_URL=http://koalawiki:8080</span> <span class="hljs-comment"># 用于提供给 server 的地址</span><br><br>  <span class="hljs-attr">nginx:</span> <span class="hljs-comment"># 需要 nginx 将前端和后端代理到一个端口</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:alpine</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8090:80&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./nginx/nginx.conf:/etc/nginx/conf.d/default.conf</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">koalawiki</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">koalawiki-web</span><br></code></pre></td></tr></table></figure><p>windows 下就直接 docker 启动！</p><p>默认账号：admin &#x2F; admin</p><p>访问：<a href="http://localhost:8090/">http://localhost:8090</a></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920073747822.png" alt="image-20250920073747822"></p><p><strong>后台查看进度</strong></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920073933105.png" alt="image-20250920073839619"></p><p><strong>生成站点消耗</strong></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920074321482.png" alt="image-20250920074321482"></p><p>以 lusipad&#x2F;plcopen 为例，大概消耗了</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">次数：<span class="hljs-number">225</span> 次<br>Token: <span class="hljs-number">11.43</span>M<br>代币价：$37<span class="hljs-number">.76</span><br></code></pre></td></tr></table></figure><p>主要是因为我都全程用 sonnet，换成其他的可能会节省一些（不过按照这个价格，Pro 账号也不经用）</p><h2 id="3-使用-OpenDeepWiki"><a href="#3-使用-OpenDeepWiki" class="headerlink" title="3. 使用 OpenDeepWiki"></a>3. 使用 OpenDeepWiki</h2><ol><li><p>网站直接使用</p><p>直接网页上访问</p></li><li><p>MCP</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920075003090.png" alt="image-20250920075003090"></p></li></ol><p>点击页面的 MCP，可以看到已经生成了配置</p><p>我们使用 Chatbox 来测试下</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920075126736.png" alt="image-20250920075126736"></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920075217076.png" alt="image-20250920075217076"></p><p>开启了 MCP，尝试提问下</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920075308823.png" alt="image-20250920075308823"></p><p>正在调用 MCP</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920075425956.png" alt="image-20250920075425956"></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920075600567.png" alt="image-20250920075600567"></p><p>整个过程大概要 20~30 秒左右，还是比较慢的</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250920080041258.png" alt="image-20250920080041258"></p><p><strong>这里可能有个比较大的问题，他会提示说读取不到文件，所以无法基于文件进行分析。。几个MCP都调用失败了</strong></p><hr><p>干脆让 AI 生成了一份详细的使用说明</p><hr><h1 id="OpenDeepWiki-使用说明"><a href="#OpenDeepWiki-使用说明" class="headerlink" title="OpenDeepWiki 使用说明"></a>OpenDeepWiki 使用说明</h1><h2 id="🚀-项目简介"><a href="#🚀-项目简介" class="headerlink" title="🚀 项目简介"></a>🚀 项目简介</h2><p>OpenDeepWiki 是一个基于 AI 的智能代码知识库系统，能够自动分析代码仓库并生成高质量的技术文档。系统使用 Claude Sonnet 4 等先进的 AI 模型，为开发者提供深度的代码理解和文档生成服务。</p><h2 id="🏗️-系统架构"><a href="#🏗️-系统架构" class="headerlink" title="🏗️ 系统架构"></a>🏗️ 系统架构</h2><h3 id="服务组件"><a href="#服务组件" class="headerlink" title="服务组件"></a>服务组件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">┌─────────────────┐</span>    <span class="hljs-string">┌─────────────────┐</span>    <span class="hljs-string">┌─────────────────┐</span><br><span class="hljs-string">│</span>   <span class="hljs-string">前端服务</span>      <span class="hljs-string">│</span>    <span class="hljs-string">│</span>   <span class="hljs-string">后端服务</span>      <span class="hljs-string">│</span>    <span class="hljs-string">│</span>   <span class="hljs-string">监控面板</span>      <span class="hljs-string">│</span><br><span class="hljs-string">│</span> <span class="hljs-string">(koalawiki-web)</span> <span class="hljs-string">│</span>    <span class="hljs-string">│</span> <span class="hljs-string">(koalawiki)</span>     <span class="hljs-string">│</span>    <span class="hljs-string">│(aspire-dashboard)│</span><br><span class="hljs-string">│</span>   <span class="hljs-attr">Port:</span> <span class="hljs-number">3000</span>    <span class="hljs-string">│</span>    <span class="hljs-string">│</span>   <span class="hljs-attr">Port:</span> <span class="hljs-number">8080</span>    <span class="hljs-string">│</span>    <span class="hljs-string">│</span> <span class="hljs-attr">Port:</span> <span class="hljs-number">18888</span><span class="hljs-number">-89</span>  <span class="hljs-string">│</span><br><span class="hljs-string">└─────────────────┘</span>    <span class="hljs-string">└─────────────────┘</span>    <span class="hljs-string">└─────────────────┘</span><br>         <span class="hljs-string">│</span>                       <span class="hljs-string">│</span>                       <span class="hljs-string">│</span><br>         <span class="hljs-string">└───────────────────────┼───────────────────────┘</span><br>                                 <span class="hljs-string">│</span><br>                <span class="hljs-string">┌─────────────────┴─────────────────┐</span><br>                <span class="hljs-string">│</span>          <span class="hljs-string">Nginx</span> <span class="hljs-string">代理服务</span>           <span class="hljs-string">│</span><br>                <span class="hljs-string">│</span>           <span class="hljs-attr">Port:</span> <span class="hljs-number">8090</span>             <span class="hljs-string">│</span><br>                <span class="hljs-string">└───────────────────────────────────┘</span><br></code></pre></td></tr></table></figure><h3 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h3><ul><li>🧠 <strong>AI 文档生成</strong>: 使用 Claude Sonnet 4 深度分析代码结构和逻辑</li><li>📊 <strong>仓库管理</strong>: 支持 Git 仓库的自动同步和增量更新</li><li>🌐 <strong>Web 界面</strong>: 现代化的前端界面，支持文档浏览和管理</li><li>📈 <strong>实时监控</strong>: Aspire Dashboard 提供系统运行状态监控</li><li>🔄 <strong>增量更新</strong>: 智能检测代码变更，只处理修改的部分</li></ul><h2 id="⚙️-配置参数详解"><a href="#⚙️-配置参数详解" class="headerlink" title="⚙️ 配置参数详解"></a>⚙️ 配置参数详解</h2><h3 id="核心配置-docker-compose-yml"><a href="#核心配置-docker-compose-yml" class="headerlink" title="核心配置 (docker-compose.yml)"></a>核心配置 (docker-compose.yml)</h3><h4 id="AI-模型配置"><a href="#AI-模型配置" class="headerlink" title="AI 模型配置"></a>AI 模型配置</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># AI 模型设置</span><br><span class="hljs-attr">CHAT_MODEL:</span> <span class="hljs-string">claude-sonnet-4-20250514</span>          <span class="hljs-comment"># 主要聊天模型</span><br><span class="hljs-attr">ANALYSIS_MODEL:</span> <span class="hljs-string">claude-sonnet-4-20250514</span>      <span class="hljs-comment"># 分析模型（用于目录结构生成）</span><br><span class="hljs-attr">CHAT_API_KEY:</span> <span class="hljs-string">xxx</span>                            <span class="hljs-comment"># API 密钥</span><br><span class="hljs-attr">ENDPOINT:</span> <span class="hljs-string">http://xx.xxx.com:8317/v1</span>        <span class="hljs-comment"># API 端点</span><br><span class="hljs-attr">MODEL_PROVIDER:</span> <span class="hljs-string">OpenAI</span>                         <span class="hljs-comment"># 模型提供商</span><br></code></pre></td></tr></table></figure><h4 id="任务控制配置"><a href="#任务控制配置" class="headerlink" title="任务控制配置"></a>任务控制配置</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">TASK_MAX_SIZE_PER_USER:</span> <span class="hljs-number">5</span>                      <span class="hljs-comment"># 每用户最大并发任务数</span><br><span class="hljs-attr">LANGUAGE:</span> <span class="hljs-string">中文</span>                                 <span class="hljs-comment"># 生成文档的语言</span><br><span class="hljs-attr">UPDATE_INTERVAL:</span> <span class="hljs-number">5</span>                             <span class="hljs-comment"># 仓库更新间隔（天）</span><br><span class="hljs-attr">MAX_FILE_LIMIT:</span> <span class="hljs-number">100</span>                            <span class="hljs-comment"># 最大文件上传限制（MB）</span><br><span class="hljs-attr">READ_MAX_TOKENS:</span> <span class="hljs-number">100000</span>                        <span class="hljs-comment"># AI 读取文件的最大 token 限制</span><br></code></pre></td></tr></table></figure><h4 id="功能开关配置"><a href="#功能开关配置" class="headerlink" title="功能开关配置"></a>功能开关配置</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">REPAIR_MERMAID:</span> <span class="hljs-number">1</span>                              <span class="hljs-comment"># Mermaid 图表修复（1=启用）</span><br><span class="hljs-attr">EnableSmartFilter:</span> <span class="hljs-literal">true</span>                        <span class="hljs-comment"># 智能过滤</span><br><span class="hljs-attr">ENABLE_INCREMENTAL_UPDATE:</span> <span class="hljs-literal">true</span>                <span class="hljs-comment"># 增量更新</span><br><span class="hljs-attr">ENABLE_CODED_DEPENDENCY_ANALYSIS:</span> <span class="hljs-literal">false</span>       <span class="hljs-comment"># 代码依赖分析</span><br><span class="hljs-attr">ENABLE_WAREHOUSE_FUNCTION_PROMPT_TASK:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># MCP Prompt 生成</span><br><span class="hljs-attr">ENABLE_WAREHOUSE_DESCRIPTION_TASK:</span> <span class="hljs-literal">false</span>      <span class="hljs-comment"># 仓库描述生成</span><br><span class="hljs-attr">ENABLE_WAREHOUSE_COMMIT:</span> <span class="hljs-literal">true</span>                  <span class="hljs-comment"># 仓库提交功能</span><br><span class="hljs-attr">ENABLE_FILE_COMMIT:</span> <span class="hljs-literal">true</span>                       <span class="hljs-comment"># 文件提交功能</span><br><span class="hljs-attr">REFINE_AND_ENHANCE_QUALITY:</span> <span class="hljs-literal">false</span>              <span class="hljs-comment"># 质量优化</span><br><span class="hljs-attr">ENABLE_CODE_COMPRESSION:</span> <span class="hljs-literal">false</span>                 <span class="hljs-comment"># 代码压缩</span><br></code></pre></td></tr></table></figure><h4 id="高级配置"><a href="#高级配置" class="headerlink" title="高级配置"></a>高级配置</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">CATALOGUE_FORMAT:</span> <span class="hljs-string">compact</span>                      <span class="hljs-comment"># 目录结构格式 (compact/json/pathlist/unix)</span><br><span class="hljs-attr">DB_TYPE:</span> <span class="hljs-string">sqlite</span>                                <span class="hljs-comment"># 数据库类型</span><br><span class="hljs-attr">DB_CONNECTION_STRING:</span> <span class="hljs-string">Data</span> <span class="hljs-string">Source=/data/KoalaWiki.db</span>  <span class="hljs-comment"># 数据库连接字符串</span><br></code></pre></td></tr></table></figure><h2 id="🚀-快速启动"><a href="#🚀-快速启动" class="headerlink" title="🚀 快速启动"></a>🚀 快速启动</h2><h3 id="1-环境准备"><a href="#1-环境准备" class="headerlink" title="1. 环境准备"></a>1. 环境准备</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 确保已安装 Docker 和 Docker Compose</span><br>docker --version<br>docker compose --version<br><br><span class="hljs-comment"># 克隆项目到本地</span><br>git <span class="hljs-built_in">clone</span> &lt;repository-url&gt;<br><span class="hljs-built_in">cd</span> OpenDeepWiki<br></code></pre></td></tr></table></figure><h3 id="2-配置设置"><a href="#2-配置设置" class="headerlink" title="2. 配置设置"></a>2. 配置设置</h3><p>编辑 <code>docker-compose.yml</code> 文件，配置您的 AI API 设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">CHAT_API_KEY:</span> <span class="hljs-string">您的API密钥</span><br><span class="hljs-attr">ENDPOINT:</span> <span class="hljs-string">您的API端点</span><br></code></pre></td></tr></table></figure><h3 id="3-启动服务"><a href="#3-启动服务" class="headerlink" title="3. 启动服务"></a>3. 启动服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 启动所有服务</span><br>docker compose up -d<br><br><span class="hljs-comment"># 查看服务状态</span><br>docker compose ps<br><br><span class="hljs-comment"># 查看服务日志</span><br>docker compose logs -f koalawiki<br></code></pre></td></tr></table></figure><h3 id="4-服务重启"><a href="#4-服务重启" class="headerlink" title="4. 服务重启"></a>4. 服务重启</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 停止服务</span><br>docker compose down<br><br><span class="hljs-comment"># 启动服务（包含配置更新）</span><br>docker compose up -d<br><br><span class="hljs-comment"># 清理孤立容器（如有需要）</span><br>docker compose down --remove-orphans<br></code></pre></td></tr></table></figure><h2 id="🌐-访问方式"><a href="#🌐-访问方式" class="headerlink" title="🌐 访问方式"></a>🌐 访问方式</h2><h3 id="主要服务端点"><a href="#主要服务端点" class="headerlink" title="主要服务端点"></a>主要服务端点</h3><table><thead><tr><th>服务</th><th>地址</th><th>功能</th></tr></thead><tbody><tr><td><strong>Web 界面</strong></td><td><a href="http://localhost:8090/">http://localhost:8090</a></td><td>主要使用入口，文档浏览和管理</td></tr><tr><td><strong>监控面板</strong></td><td><a href="http://localhost:18888/">http://localhost:18888</a></td><td>系统运行状态监控</td></tr><tr><td><strong>后端 API</strong></td><td><a href="http://localhost:8080/">http://localhost:8080</a></td><td>直接 API 访问（通常通过前端）</td></tr></tbody></table><h3 id="主要功能页面"><a href="#主要功能页面" class="headerlink" title="主要功能页面"></a>主要功能页面</h3><ul><li>📚 <strong>仓库列表</strong>: 查看和管理已添加的代码仓库</li><li>📄 <strong>文档浏览</strong>: 查看 AI 生成的技术文档</li><li>⚙️ <strong>设置页面</strong>: 配置系统参数和 AI 模型</li><li>📊 <strong>统计信息</strong>: 查看文档生成统计和系统使用情况</li></ul><h2 id="📖-使用流程"><a href="#📖-使用流程" class="headerlink" title="📖 使用流程"></a>📖 使用流程</h2><h3 id="1-添加代码仓库"><a href="#1-添加代码仓库" class="headerlink" title="1. 添加代码仓库"></a>1. 添加代码仓库</h3><ol><li>访问 Web 界面: <a href="http://localhost:8090/">http://localhost:8090</a></li><li>点击”添加仓库”按钮</li><li>输入 Git 仓库 URL 或上传本地代码</li><li>配置仓库分析参数</li></ol><h3 id="2-AI-文档生成"><a href="#2-AI-文档生成" class="headerlink" title="2. AI 文档生成"></a>2. AI 文档生成</h3><ol><li>系统自动分析代码结构</li><li>AI 模型深度理解代码逻辑</li><li>生成多种类型的技术文档：<ul><li>项目概览</li><li>架构分析</li><li>API 文档</li><li>使用指南</li><li>核心概念说明</li></ul></li></ol><h3 id="3-文档管理"><a href="#3-文档管理" class="headerlink" title="3. 文档管理"></a>3. 文档管理</h3><ol><li>浏览生成的文档内容</li><li>搜索特定技术信息</li><li>导出文档为不同格式</li><li>跟踪文档更新历史</li></ol><h2 id="🔧-运维管理"><a href="#🔧-运维管理" class="headerlink" title="🔧 运维管理"></a>🔧 运维管理</h2><h3 id="日志监控"><a href="#日志监控" class="headerlink" title="日志监控"></a>日志监控</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看实时日志</span><br>docker compose logs -f koalawiki<br><br><span class="hljs-comment"># 查看特定数量的日志</span><br>docker compose logs --<span class="hljs-built_in">tail</span>=50 koalawiki<br><br><span class="hljs-comment"># 查看所有服务日志</span><br>docker compose logs -f<br></code></pre></td></tr></table></figure><h3 id="数据备份"><a href="#数据备份" class="headerlink" title="数据备份"></a>数据备份</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 备份数据目录</span><br><span class="hljs-built_in">cp</span> -r ./data ./data_backup_$(<span class="hljs-built_in">date</span> +%Y%m%d)<br><br><span class="hljs-comment"># 备份仓库数据</span><br><span class="hljs-built_in">cp</span> -r ./repositories ./repositories_backup_$(<span class="hljs-built_in">date</span> +%Y%m%d)<br></code></pre></td></tr></table></figure><h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><ol><li><strong>增加并发任务数</strong>: 调整 <code>TASK_MAX_SIZE_PER_USER</code> 参数</li><li><strong>优化 Token 使用</strong>: 调整 <code>READ_MAX_TOKENS</code> 限制</li><li><strong>启用智能过滤</strong>: 确保 <code>EnableSmartFilter=true</code></li><li><strong>配置增量更新</strong>: 设置合适的 <code>UPDATE_INTERVAL</code></li></ol><h2 id="🐛-故障排除"><a href="#🐛-故障排除" class="headerlink" title="🐛 故障排除"></a>🐛 故障排除</h2><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="1-服务启动失败"><a href="#1-服务启动失败" class="headerlink" title="1. 服务启动失败"></a>1. 服务启动失败</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 检查端口占用</span><br>netstat -tulpn | grep :8090<br>netstat -tulpn | grep :8080<br><br><span class="hljs-comment"># 重启 Docker 服务</span><br>sudo systemctl restart docker<br><br><span class="hljs-comment"># 清理 Docker 资源</span><br>docker system prune -f<br></code></pre></td></tr></table></figure><h4 id="2-AI-生成失败"><a href="#2-AI-生成失败" class="headerlink" title="2. AI 生成失败"></a>2. AI 生成失败</h4><ul><li>检查 API 密钥是否正确</li><li>验证网络连接到 AI 端点</li><li>查看日志中的具体错误信息</li><li>确认模型名称是否正确</li></ul><h4 id="3-前端无法访问"><a href="#3-前端无法访问" class="headerlink" title="3. 前端无法访问"></a>3. 前端无法访问</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 检查 nginx 配置</span><br>docker compose logs nginx<br><br><span class="hljs-comment"># 验证前端服务状态</span><br>docker compose logs koalawiki-web<br><br><span class="hljs-comment"># 重启前端服务</span><br>docker compose restart koalawiki-web nginx<br></code></pre></td></tr></table></figure><h4 id="4-数据库连接问题"><a href="#4-数据库连接问题" class="headerlink" title="4. 数据库连接问题"></a>4. 数据库连接问题</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 检查数据目录权限</span><br><span class="hljs-built_in">ls</span> -la ./data/<br><br><span class="hljs-comment"># 重新创建数据库</span><br><span class="hljs-built_in">rm</span> -f ./data/KoalaWiki.db<br>docker compose restart koalawiki<br></code></pre></td></tr></table></figure><h3 id="性能调优建议"><a href="#性能调优建议" class="headerlink" title="性能调优建议"></a>性能调优建议</h3><h4 id="1-系统资源优化"><a href="#1-系统资源优化" class="headerlink" title="1. 系统资源优化"></a>1. 系统资源优化</h4><ul><li><strong>内存</strong>: 推荐至少 4GB RAM</li><li><strong>存储</strong>: 确保足够的磁盘空间用于代码仓库和生成的文档</li><li><strong>网络</strong>: 稳定的网络连接到 AI API 端点</li></ul><h4 id="2-AI-参数调优"><a href="#2-AI-参数调优" class="headerlink" title="2. AI 参数调优"></a>2. AI 参数调优</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 高性能配置</span><br><span class="hljs-attr">TASK_MAX_SIZE_PER_USER:</span> <span class="hljs-number">10</span>      <span class="hljs-comment"># 增加并发任务</span><br><span class="hljs-attr">READ_MAX_TOKENS:</span> <span class="hljs-number">150000</span>         <span class="hljs-comment"># 增加 token 限制</span><br><span class="hljs-attr">ENABLE_CODE_COMPRESSION:</span> <span class="hljs-literal">true</span>   <span class="hljs-comment"># 启用代码压缩</span><br></code></pre></td></tr></table></figure><h4 id="3-数据库优化"><a href="#3-数据库优化" class="headerlink" title="3. 数据库优化"></a>3. 数据库优化</h4><ul><li>定期备份数据库文件</li><li>监控数据库大小增长</li><li>考虑使用外部数据库（如 PostgreSQL）</li></ul><h2 id="📊-监控指标"><a href="#📊-监控指标" class="headerlink" title="📊 监控指标"></a>📊 监控指标</h2><h3 id="系统监控-Aspire-Dashboard"><a href="#系统监控-Aspire-Dashboard" class="headerlink" title="系统监控 (Aspire Dashboard)"></a>系统监控 (Aspire Dashboard)</h3><ul><li>📈 <strong>请求响应时间</strong>: 监控 API 响应性能</li><li>🔄 <strong>任务处理状态</strong>: 跟踪 AI 文档生成进度</li><li>💾 <strong>资源使用情况</strong>: 监控内存和 CPU 使用</li><li>🌐 <strong>网络连接状态</strong>: 监控到 AI 端点的连接</li></ul><h3 id="应用指标"><a href="#应用指标" class="headerlink" title="应用指标"></a>应用指标</h3><ul><li>📚 <strong>仓库数量</strong>: 已管理的代码仓库总数</li><li>📄 <strong>文档生成数</strong>: 成功生成的文档数量</li><li>⏱️ <strong>平均处理时间</strong>: 文档生成的平均耗时</li><li>🎯 <strong>成功率</strong>: 文档生成的成功比例</li></ul><h2 id="🔐-安全建议"><a href="#🔐-安全建议" class="headerlink" title="🔐 安全建议"></a>🔐 安全建议</h2><h3 id="1-API-密钥安全"><a href="#1-API-密钥安全" class="headerlink" title="1. API 密钥安全"></a>1. API 密钥安全</h3><ul><li>不要在公开代码中硬编码 API 密钥</li><li>定期更换 API 密钥</li><li>使用环境变量管理敏感信息</li></ul><h3 id="2-网络安全"><a href="#2-网络安全" class="headerlink" title="2. 网络安全"></a>2. 网络安全</h3><ul><li>在生产环境中配置防火墙规则</li><li>使用 HTTPS 协议（配置 SSL 证书）</li><li>限制外部访问的端口</li></ul><h3 id="3-数据安全"><a href="#3-数据安全" class="headerlink" title="3. 数据安全"></a>3. 数据安全</h3><ul><li>定期备份重要数据</li><li>加密敏感数据存储</li><li>实施访问控制策略</li></ul><h2 id="📚-扩展功能"><a href="#📚-扩展功能" class="headerlink" title="📚 扩展功能"></a>📚 扩展功能</h2><h3 id="1-自定义-AI-模型"><a href="#1-自定义-AI-模型" class="headerlink" title="1. 自定义 AI 模型"></a>1. 自定义 AI 模型</h3><p>系统支持多种 AI 模型，可以根据需要配置：</p><ul><li>OpenAI GPT 系列</li><li>Anthropic Claude 系列</li><li>自定义兼容端点</li></ul><h3 id="2-插件扩展"><a href="#2-插件扩展" class="headerlink" title="2. 插件扩展"></a>2. 插件扩展</h3><ul><li>支持自定义文档模板</li><li>可扩展的文件类型支持</li><li>自定义分析规则</li></ul><h3 id="3-集成方案"><a href="#3-集成方案" class="headerlink" title="3. 集成方案"></a>3. 集成方案</h3><ul><li>CI&#x2F;CD 流水线集成</li><li>版本控制系统集成</li><li>项目管理工具集成</li></ul><h2 id="🆘-技术支持"><a href="#🆘-技术支持" class="headerlink" title="🆘 技术支持"></a>🆘 技术支持</h2><h3 id="获取帮助"><a href="#获取帮助" class="headerlink" title="获取帮助"></a>获取帮助</h3><ol><li>查看系统日志获取详细错误信息</li><li>检查 GitHub Issues 页面</li><li>参考项目文档和 README</li><li>联系技术支持团队</li></ol><h3 id="贡献项目"><a href="#贡献项目" class="headerlink" title="贡献项目"></a>贡献项目</h3><ul><li>提交 Bug 报告</li><li>建议新功能</li><li>贡献代码改进</li><li>完善文档内容</li></ul><hr><h2 id="📝-更新日志"><a href="#📝-更新日志" class="headerlink" title="📝 更新日志"></a>📝 更新日志</h2><h3 id="版本信息"><a href="#版本信息" class="headerlink" title="版本信息"></a>版本信息</h3><ul><li><strong>当前版本</strong>: 0.9.0</li><li><strong>最后更新</strong>: 2025-09-20</li><li><strong>维护状态</strong>: 活跃开发中</li></ul><h3 id="主要特性"><a href="#主要特性" class="headerlink" title="主要特性"></a>主要特性</h3><ul><li>✅ 支持 Claude Sonnet 4 模型</li><li>✅ 完整的 Web 界面</li><li>✅ 实时监控面板</li><li>✅ 增量更新机制</li><li>✅ 多语言文档生成</li><li>✅ Docker 容器化部署</li></ul><hr><p><em>这份文档会随着系统功能的更新而持续维护和完善。</em></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;使用claudecode生成opendeepwiki&quot;&gt;&lt;a href=&quot;#使用claudecode生成opendeepwiki&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="deepwiki" scheme="https://lusipad.com/tags/deepwiki/"/>
    
    <category term="claudecode" scheme="https://lusipad.com/tags/claudecode/"/>
    
  </entry>
  
  <entry>
    <title>邪修用法：Codex/ClaudeCode转标准API</title>
    <link href="https://lusipad.com/2025/09/14/CLIProxyAPI/"/>
    <id>https://lusipad.com/2025/09/14/CLIProxyAPI/</id>
    <published>2025-09-14T00:54:04.000Z</published>
    <updated>2025-09-14T04:44:27.806Z</updated>
    
    <content type="html"><![CDATA[<h1 id="邪修用法：Codex-ClaudeCode转标准API"><a href="#邪修用法：Codex-ClaudeCode转标准API" class="headerlink" title="邪修用法：Codex&#x2F;ClaudeCode转标准API"></a>邪修用法：Codex&#x2F;ClaudeCode转标准API</h1><p>最近 Codex 便宜（越南、印尼有虾皮会员送 3 个月 ChatGpt Plus 会员的活动），综合成本大概 30 块 &#x2F; 3月，性价比直接拉满。由于我自己的会员开太多了，光靠 Cli 根本用不完。所以想到既然都是 API，那应该也有类似 CCR 这种可以转换成标准 OpenAI 兼容 API 的用法吧？</p><p>在验证了几个后，踩了不少坑后，最终用了 <a href="https://github.com/luispater/CLIProxyAPI/tree/main">https://github.com/luispater/CLIProxyAPI/tree/main</a> 项目。可以支持自定义 API，支持轮询，把我想做的都改完了。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>编辑 <code>config.yaml</code></p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs maxima">codex-api-<span class="hljs-built_in">key</span>:<br>  - api-<span class="hljs-built_in">key</span>: <span class="hljs-string">&quot;your-codex-api-key&quot;</span><br>    base-url: <span class="hljs-string">&quot;https://your-server.com:3000/openai&quot;</span><br></code></pre></td></tr></table></figure><h2 id="在-VSCode-中使用"><a href="#在-VSCode-中使用" class="headerlink" title="在 VSCode 中使用"></a>在 VSCode 中使用</h2><p>直接在 Continue 上配置上（密码没配置，随便填）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;models&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;GPT-5&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;provider&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;openai&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AUTODETECT&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;apiBase&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://localhost:8317/v1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;apiKey&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dummy&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914090815475.png" alt="image-20250914090815475"></p><p>可以配置，可以选模型，还可以调用工具链。</p><h2 id="在-OpenDeepwiki-使用"><a href="#在-OpenDeepwiki-使用" class="headerlink" title="在 OpenDeepwiki 使用"></a>在 OpenDeepwiki 使用</h2><p>既然可以用 API，就把之前的 OpenDeepwiki 翻出来，赶紧配置上看看能不能用。</p><p>先上结论：能用，但是 API 不够用</p><p>配置方法不展开了，无法就是 API_Base 换成了 localhost:8173，修改了分析模型为 gpt-5，chat 模型为 gpt-5-mini，然后 docker 一开就开始嚯嚯嚯分析了。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914091759920.png" alt="image-20250914091759920"></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914091818154.png" alt="image-20250914091818154"></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914091854646.png" alt="image-20250914091854646"></p><p><strong>这里最大的问题出现了：扫描太快了！大概10分钟左右就触发了429限流了: (</strong></p><p>虽然我已经用了两个号做负载均衡，但是无奈还是消耗太快。可能后续要换个 Pro 账号，或者修改下源码，做一个限速功能或者等待重试功能。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914092311996.png" alt="image-20250914092311996"></p><p>像我这个项目大概要 1000+ 次访问，但是由于速度太快了，很快就限速了，叠加上错误重试，就失败了。。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914093057760.png" alt="image-20250914093057760"></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914093145082.png" alt="image-20250914093145082"></p><h2 id="使用限制"><a href="#使用限制" class="headerlink" title="使用限制"></a>使用限制</h2><ol><li><p>并发限制 （429）</p><p>Codex 的使用限制，大概每 3 小时 150 条左右</p><p>这个我跑了两次的结果，用的不同的模型（第一次 gpt-5，第二次 gpt-5-mini），但是总量接近</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250914091038840.png" alt="image-20250914091038840"></p></li></ol>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;邪修用法：Codex-ClaudeCode转标准API&quot;&gt;&lt;a href=&quot;#邪修用法：Codex-ClaudeCode转标准API&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="claude" scheme="https://lusipad.com/tags/claude/"/>
    
    <category term="codex" scheme="https://lusipad.com/tags/codex/"/>
    
  </entry>
  
  <entry>
    <title>Claude Code + Azure DevOps MCP 完整使用指南</title>
    <link href="https://lusipad.com/2025/09/02/use-claude-code-review-azure-devops-pr/"/>
    <id>https://lusipad.com/2025/09/02/use-claude-code-review-azure-devops-pr/</id>
    <published>2025-09-01T23:43:28.000Z</published>
    <updated>2025-09-02T15:23:35.533Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Claude-Code-Azure-DevOps-MCP-完整使用指南"><a href="#Claude-Code-Azure-DevOps-MCP-完整使用指南" class="headerlink" title="Claude Code + Azure DevOps MCP 完整使用指南"></a>Claude Code + Azure DevOps MCP 完整使用指南</h1><blockquote><p><strong>🚀 智能化代码评审解决方案</strong><br>将 Claude Code 的 AI 能力与 Azure DevOps 无缝集成，实现自动化、专业化的代码评审流程</p></blockquote><h2 id="📚-目录"><a href="#📚-目录" class="headerlink" title="📚 目录"></a>📚 目录</h2><ul><li><a href="#%E6%A6%82%E8%BF%B0">概述</a></li><li><a href="#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82">系统要求</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">快速开始</a></li><li><a href="#%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4">详细安装步骤</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97">配置指南</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">使用方法</a></li><li><a href="#slash-commands-%E5%8F%82%E8%80%83">Slash Commands 参考</a></li><li><a href="#azure-devops-mcp-%E5%B7%A5%E5%85%B7">Azure DevOps MCP 工具</a></li><li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">最佳实践</a></li><li><a href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">故障排除</a></li><li><a href="#%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95">高级用法</a></li><li><a href="#api-%E5%8F%82%E8%80%83">API 参考</a></li></ul><hr><h2 id="🎯-概述"><a href="#🎯-概述" class="headerlink" title="🎯 概述"></a>🎯 概述</h2><p>Claude Code + Azure DevOps MCP 组合提供：</p><ul><li>✅ <strong>全自动代码评审</strong> - 从分析到评论一键完成</li><li>✅ <strong>智能质量分析</strong> - 安全性、性能、最佳实践检查</li><li>✅ <strong>直接 API 集成</strong> - 评论自动添加到 Azure DevOps PR</li><li>✅ <strong>76+ 专业工具</strong> - 覆盖完整 DevOps 生命周期</li><li>✅ <strong>多种使用方式</strong> - 交互式、命令行、批处理支持</li></ul><h3 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h3><table><thead><tr><th>功能</th><th>描述</th><th>实现方式</th></tr></thead><tbody><tr><td><strong>PR 评审</strong></td><td>深度分析代码变更、识别问题、提供建议</td><td><code>/review PR 16</code></td></tr><tr><td><strong>自动评论</strong></td><td>将评审结果直接添加到 Azure DevOps</td><td>MCP API 调用</td></tr><tr><td><strong>安全扫描</strong></td><td>识别潜在安全漏洞和风险</td><td>内置安全分析器</td></tr><tr><td><strong>性能分析</strong></td><td>评估代码变更对性能的影响</td><td>性能模式识别</td></tr><tr><td><strong>最佳实践检查</strong></td><td>确保代码遵循行业标准</td><td>规则引擎验证</td></tr></tbody></table><hr><h2 id="⚙️-系统要求"><a href="#⚙️-系统要求" class="headerlink" title="⚙️ 系统要求"></a>⚙️ 系统要求</h2><h3 id="必需环境"><a href="#必需环境" class="headerlink" title="必需环境"></a>必需环境</h3><ul><li><strong>Node.js</strong>: &gt;&#x3D; 16.0.0</li><li><strong>npm</strong>: &gt;&#x3D; 8.0.0</li><li><strong>Claude Code</strong>: 最新版本</li><li><strong>Azure DevOps</strong>: 有效的组织和项目</li></ul><h3 id="权限要求"><a href="#权限要求" class="headerlink" title="权限要求"></a>权限要求</h3><ul><li>Azure DevOps <strong>Personal Access Token</strong> 包含：<ul><li><code>Code (read &amp; write)</code> - 访问代码和 PR</li><li><code>Pull Request (read &amp; write)</code> - 操作 PR</li><li><code>Work Items (read)</code> - 查看工作项</li></ul></li></ul><h3 id="支持平台"><a href="#支持平台" class="headerlink" title="支持平台"></a>支持平台</h3><ul><li>✅ Windows 10&#x2F;11</li><li>✅ macOS 10.15+</li><li>✅ Linux (Ubuntu 18.04+)</li></ul><hr><h2 id="🚀-快速开始"><a href="#🚀-快速开始" class="headerlink" title="🚀 快速开始"></a>🚀 快速开始</h2><h3 id="5-分钟快速设置"><a href="#5-分钟快速设置" class="headerlink" title="5 分钟快速设置"></a>5 分钟快速设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 检查环境</span><br>node --version &amp;&amp; npm --version<br><br><span class="hljs-comment"># 2. 安装 Azure DevOps MCP</span><br>npm install -g @azure-devops/mcp<br><br><span class="hljs-comment"># 3. 配置 Claude Code MCP 服务器</span><br>claude mcp add-json azure-devops <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">  &quot;type&quot;: &quot;stdio&quot;,</span><br><span class="hljs-string">  &quot;command&quot;: &quot;npx&quot;,</span><br><span class="hljs-string">  &quot;args&quot;: [&quot;@azure-devops/mcp&quot;, &quot;YOUR_ORG_NAME&quot;],</span><br><span class="hljs-string">  &quot;env&quot;: &#123;</span><br><span class="hljs-string">    &quot;AZURE_DEVOPS_PAT&quot;: &quot;YOUR_PAT_HERE&quot;</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">&#125;&#x27;</span><br><br><span class="hljs-comment"># 4. 验证安装</span><br>claude mcp list<br><br><span class="hljs-comment"># 5. 开始使用</span><br>claude -p <span class="hljs-string">&quot;使用 Azure DevOps MCP 工具评审 PR 16&quot;</span><br></code></pre></td></tr></table></figure><h3 id="立即体验"><a href="#立即体验" class="headerlink" title="立即体验"></a>立即体验</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 启动交互式会话</span><br>claude<br><br><span class="hljs-comment"># 在会话中输入</span><br>&gt; /review PR 16<br></code></pre></td></tr></table></figure><hr><h2 id="🛠️-详细安装步骤"><a href="#🛠️-详细安装步骤" class="headerlink" title="🛠️ 详细安装步骤"></a>🛠️ 详细安装步骤</h2><h3 id="步骤-1-环境准备"><a href="#步骤-1-环境准备" class="headerlink" title="步骤 1: 环境准备"></a>步骤 1: 环境准备</h3><p><strong>检查 Node.js 环境:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 检查版本 (推荐 v18+)</span><br>node --version<br>npm --version<br><br><span class="hljs-comment"># 如果版本过低，更新 Node.js</span><br><span class="hljs-comment"># Windows: 下载最新版本 https://nodejs.org</span><br><span class="hljs-comment"># macOS: brew install node</span><br><span class="hljs-comment"># Linux: nvm install --lts</span><br></code></pre></td></tr></table></figure><p><strong>验证 Claude Code:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 检查 Claude Code 版本</span><br>claude --version<br><br><span class="hljs-comment"># 如果未安装，请参考官方文档安装</span><br></code></pre></td></tr></table></figure><h3 id="步骤-2-安装-Azure-DevOps-MCP-服务器"><a href="#步骤-2-安装-Azure-DevOps-MCP-服务器" class="headerlink" title="步骤 2: 安装 Azure DevOps MCP 服务器"></a>步骤 2: 安装 Azure DevOps MCP 服务器</h3><p><strong>安装官方 MCP 包:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 全局安装 (推荐)</span><br>npm install -g @azure-devops/mcp<br><br><span class="hljs-comment"># 验证安装</span><br>npx @azure-devops/mcp --version<br></code></pre></td></tr></table></figure><p><strong>检查可用版本:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看包信息</span><br>npm info @azure-devops/mcp<br><br><span class="hljs-comment"># 查看所有可用版本</span><br>npm view @azure-devops/mcp versions --json<br></code></pre></td></tr></table></figure><h3 id="步骤-3-Claude-Code-MCP-集成"><a href="#步骤-3-Claude-Code-MCP-集成" class="headerlink" title="步骤 3: Claude Code MCP 集成"></a>步骤 3: Claude Code MCP 集成</h3><p><strong>方式 1: JSON 配置 (推荐)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">claude mcp add-json azure-devops <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">  &quot;type&quot;: &quot;stdio&quot;,</span><br><span class="hljs-string">  &quot;command&quot;: &quot;npx&quot;,</span><br><span class="hljs-string">  &quot;args&quot;: [&quot;@azure-devops/mcp&quot;, &quot;YOUR_ORG_NAME&quot;],</span><br><span class="hljs-string">  &quot;env&quot;: &#123;</span><br><span class="hljs-string">    &quot;AZURE_DEVOPS_PAT&quot;: &quot;YOUR_PERSONAL_ACCESS_TOKEN&quot;</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">&#125;&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>方式 2: 分步配置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 添加基础配置</span><br>claude mcp add azure-devops <span class="hljs-string">&quot;npx&quot;</span> <span class="hljs-string">&quot;@azure-devops/mcp&quot;</span> <span class="hljs-string">&quot;YOUR_ORG_NAME&quot;</span><br><br><span class="hljs-comment"># 移除并重新添加包含环境变量的配置</span><br>claude mcp remove azure-devops -s <span class="hljs-built_in">local</span><br>claude mcp add-json azure-devops <span class="hljs-string">&#x27;...&#x27;</span>  <span class="hljs-comment"># 使用上面的 JSON</span><br></code></pre></td></tr></table></figure><h3 id="步骤-4-验证安装"><a href="#步骤-4-验证安装" class="headerlink" title="步骤 4: 验证安装"></a>步骤 4: 验证安装</h3><p><strong>检查 MCP 服务器状态:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 列出所有 MCP 服务器</span><br>claude mcp list<br><br><span class="hljs-comment"># 查看具体配置</span><br>claude mcp get azure-devops<br><br><span class="hljs-comment"># 预期输出:</span><br><span class="hljs-comment"># azure-devops:</span><br><span class="hljs-comment">#   Status: ✓ Connected</span><br><span class="hljs-comment">#   Type: stdio</span><br><span class="hljs-comment">#   Command: npx</span><br><span class="hljs-comment">#   Args: @azure-devops/mcp YOUR_ORG_NAME</span><br><span class="hljs-comment">#   Environment: AZURE_DEVOPS_PAT=***</span><br></code></pre></td></tr></table></figure><p><strong>测试连接:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 测试基础功能</span><br>claude -p <span class="hljs-string">&quot;列出 Azure DevOps 项目中的所有 Pull Request&quot;</span><br><br><span class="hljs-comment"># 测试评审功能</span><br>claude -p <span class="hljs-string">&quot;/review --help&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="⚙️-配置指南"><a href="#⚙️-配置指南" class="headerlink" title="⚙️ 配置指南"></a>⚙️ 配置指南</h2><h3 id="Azure-DevOps-Personal-Access-Token"><a href="#Azure-DevOps-Personal-Access-Token" class="headerlink" title="Azure DevOps Personal Access Token"></a>Azure DevOps Personal Access Token</h3><p><strong>创建 PAT:</strong></p><ol><li>登录 Azure DevOps: <code>https://dev.azure.com/YOUR_ORG</code></li><li>点击右上角用户头像</li><li>选择 <code>Personal Access Tokens</code></li><li>点击 <code>+ New Token</code></li><li>配置权限:</li></ol><table><thead><tr><th>权限类型</th><th>访问级别</th><th>用途</th></tr></thead><tbody><tr><td><strong>Code</strong></td><td>Read &amp; Write</td><td>访问代码和提交历史</td></tr><tr><td><strong>Pull Request</strong></td><td>Read &amp; Write</td><td>获取 PR 信息和添加评论</td></tr><tr><td><strong>Work Items</strong></td><td>Read</td><td>查看关联的工作项</td></tr><tr><td><strong>Build</strong></td><td>Read</td><td>获取构建状态</td></tr><tr><td><strong>Release</strong></td><td>Read</td><td>查看发布信息</td></tr></tbody></table><p><strong>PAT 安全最佳实践:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 设置较短的有效期 (建议 90 天)</span><br><span class="hljs-comment"># 定期轮换 Token</span><br><span class="hljs-comment"># 使用最小权限原则</span><br><span class="hljs-comment"># 不要在代码中硬编码 Token</span><br></code></pre></td></tr></table></figure><h3 id="组织和项目配置"><a href="#组织和项目配置" class="headerlink" title="组织和项目配置"></a>组织和项目配置</h3><p><strong>识别您的组织信息:</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">Azure DevOps URL: https://dev.azure.com/YOUR_ORG_NAME<br>组织名称: YOUR_ORG_NAME  (用于 MCP 配置)<br>项目名称: YOUR_PROJECT_NAME<br></code></pre></td></tr></table></figure><p><strong>多项目配置:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 为不同项目创建不同的 MCP 服务器</span><br>claude mcp add-json azure-devops-project1 <span class="hljs-string">&#x27;&#123;...&#125;&#x27;</span><br>claude mcp add-json azure-devops-project2 <span class="hljs-string">&#x27;&#123;...&#125;&#x27;</span><br><br><span class="hljs-comment"># 使用特定服务器</span><br>claude --mcp-config azure-devops-project1<br></code></pre></td></tr></table></figure><h3 id="高级配置选项"><a href="#高级配置选项" class="headerlink" title="高级配置选项"></a>高级配置选项</h3><p><strong>自定义环境变量:</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;stdio&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npx&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;@azure-devops/mcp&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;lusipad&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;env&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;AZURE_DEVOPS_PAT&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;your-pat-here&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;AZURE_DEVOPS_ORG_URL&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://dev.azure.com/your-org&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;AZURE_DEVOPS_API_VERSION&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.1-preview&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;MCP_DEBUG&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;true&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><strong>项目级配置:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 在项目根目录创建 .mcp.json</span><br>&#123;<br>  <span class="hljs-string">&quot;mcpServers&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;azure-devops&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;stdio&quot;</span>,<br>      <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;npx&quot;</span>,<br>      <span class="hljs-string">&quot;args&quot;</span>: [<span class="hljs-string">&quot;@azure-devops/mcp&quot;</span>, <span class="hljs-string">&quot;your-org&quot;</span>],<br>      <span class="hljs-string">&quot;env&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;AZURE_DEVOPS_PAT&quot;</span>: <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;AZURE_DEVOPS_PAT&#125;</span>&quot;</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="🎯-使用方法"><a href="#🎯-使用方法" class="headerlink" title="🎯 使用方法"></a>🎯 使用方法</h2><h3 id="交互式使用"><a href="#交互式使用" class="headerlink" title="交互式使用"></a>交互式使用</h3><p><strong>启动交互式会话:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">claude<br></code></pre></td></tr></table></figure><p><strong>基础命令:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># PR 评审</span><br>&gt; /review PR 16<br>&gt; 使用 Azure DevOps MCP 工具评审 PR 16<br><br><span class="hljs-comment"># 获取信息</span><br>&gt; 列出所有待审查的 Pull Request<br>&gt; 获取 PR 16 的详细信息<br><br><span class="hljs-comment"># 添加评论</span><br>&gt; 将评审结果添加到 PR 16 的评论中<br>&gt; 在 PR 16 上添加评论: <span class="hljs-string">&quot;请修复安全漏洞&quot;</span><br></code></pre></td></tr></table></figure><p><strong>高级评审:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 深度分析</span><br>&gt; 使用 code-reviewer 子代理深度分析 PR 16<br>&gt; 对 PR 16 进行安全性深度扫描<br>&gt; 分析 PR 16 对系统性能的影响<br><br><span class="hljs-comment"># 批量操作</span><br>&gt; 评审所有状态为 <span class="hljs-string">&#x27;Active&#x27;</span> 的 Pull Request<br>&gt; 为所有新的 PR 添加欢迎评论<br></code></pre></td></tr></table></figure><h3 id="命令行使用"><a href="#命令行使用" class="headerlink" title="命令行使用"></a>命令行使用</h3><p><strong>一键式评审:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 基础评审</span><br>claude -p <span class="hljs-string">&quot;/review PR 16&quot;</span><br><br><span class="hljs-comment"># 详细评审</span><br>claude -p <span class="hljs-string">&quot;使用 Azure DevOps MCP 工具详细评审 PR 16，包括安全性和性能分析&quot;</span><br><br><span class="hljs-comment"># 评审并评论</span><br>claude -p <span class="hljs-string">&quot;评审 PR 16 并将结果添加到 PR 评论中&quot;</span><br></code></pre></td></tr></table></figure><p><strong>批处理操作:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 批量评审</span><br>claude -p <span class="hljs-string">&quot;评审项目中所有待审查的 PR&quot;</span><br><br><span class="hljs-comment"># 生成报告</span><br>claude -p <span class="hljs-string">&quot;生成本周所有 PR 的评审统计报告&quot;</span><br><br><span class="hljs-comment"># 安全扫描</span><br>claude -p <span class="hljs-string">&quot;对所有开放的 PR 进行安全性扫描&quot;</span><br></code></pre></td></tr></table></figure><h3 id="自动化集成"><a href="#自动化集成" class="headerlink" title="自动化集成"></a>自动化集成</h3><p><strong>CI&#x2F;CD 集成:</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Azure Pipelines 示例</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">task:</span> <span class="hljs-string">NodeTool@0</span><br>  <span class="hljs-attr">inputs:</span><br>    <span class="hljs-attr">versionSpec:</span> <span class="hljs-string">&#x27;18.x&#x27;</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">script:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    npm install -g @azure-devops/mcp</span><br><span class="hljs-string">    claude -p &quot;评审 PR $(System.PullRequest.PullRequestId) 并添加评论&quot;</span><br><span class="hljs-string"></span>  <span class="hljs-attr">displayName:</span> <span class="hljs-string">&#x27;Automated Code Review&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>Webhook 触发:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># PR 创建时自动评审</span><br>curl -X POST <span class="hljs-string">&quot;your-webhook-url&quot;</span> \<br>  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \<br>  -d <span class="hljs-string">&#x27;&#123;&quot;action&quot;: &quot;review&quot;, &quot;pr_id&quot;: &quot;16&quot;&#125;&#x27;</span><br></code></pre></td></tr></table></figure><hr><h2 id="🔧-Slash-Commands-参考"><a href="#🔧-Slash-Commands-参考" class="headerlink" title="🔧 Slash Commands 参考"></a>🔧 Slash Commands 参考</h2><h3 id="内置-Slash-Commands"><a href="#内置-Slash-Commands" class="headerlink" title="内置 Slash Commands"></a>内置 Slash Commands</h3><table><thead><tr><th>命令</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>/review</code></td><td>代码评审</td><td><code>/review PR 16</code></td></tr><tr><td><code>/help</code></td><td>获取帮助</td><td><code>/help</code></td></tr><tr><td><code>/exit</code></td><td>退出会话</td><td><code>/exit</code></td></tr><tr><td><code>/clear</code></td><td>清空历史</td><td><code>/clear</code></td></tr><tr><td><code>/context</code></td><td>查看上下文</td><td><code>/context</code></td></tr></tbody></table><h3 id="Azure-DevOps-特定命令"><a href="#Azure-DevOps-特定命令" class="headerlink" title="Azure DevOps 特定命令"></a>Azure DevOps 特定命令</h3><p><strong>PR 相关:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">/review PR 16                    <span class="hljs-comment"># 评审特定 PR</span><br>/review pull request 16          <span class="hljs-comment"># 同上，完整语法</span><br>/review Azure DevOps PR 16       <span class="hljs-comment"># 明确指定平台</span><br>/review --detailed PR 16         <span class="hljs-comment"># 详细评审</span><br>/review --security PR 16         <span class="hljs-comment"># 安全性重点评审</span><br>/review --performance PR 16      <span class="hljs-comment"># 性能重点评审</span><br></code></pre></td></tr></table></figure><p><strong>自然语言命令:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 这些在交互式会话中都可以使用</span><br><span class="hljs-string">&quot;获取所有 Pull Request&quot;</span><br><span class="hljs-string">&quot;列出待审查的 PR&quot;</span><br><span class="hljs-string">&quot;评审 PR 16 并添加评论&quot;</span><br><span class="hljs-string">&quot;获取 PR 16 的文件变更&quot;</span><br><span class="hljs-string">&quot;将这个评审添加到 PR 评论中&quot;</span><br><span class="hljs-string">&quot;检查 PR 16 的合并冲突&quot;</span><br><span class="hljs-string">&quot;获取 PR 16 的构建状态&quot;</span><br></code></pre></td></tr></table></figure><h3 id="组合命令"><a href="#组合命令" class="headerlink" title="组合命令"></a>组合命令</h3><p><strong>多步骤操作:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 完整评审流程</span><br>&gt; /review PR 16<br>&gt; 将评审结果格式化为专业报告<br>&gt; 添加到 PR 16 的评论中<br>&gt; 设置 PR 16 为需要修改状态<br><br><span class="hljs-comment"># 批量处理</span><br>&gt; 获取所有待审查的 PR<br>&gt; 逐一进行安全性评审<br>&gt; 生成汇总报告<br></code></pre></td></tr></table></figure><hr><h2 id="🛠️-Azure-DevOps-MCP-工具"><a href="#🛠️-Azure-DevOps-MCP-工具" class="headerlink" title="🛠️ Azure DevOps MCP 工具"></a>🛠️ Azure DevOps MCP 工具</h2><h3 id="可用工具概览-76-工具"><a href="#可用工具概览-76-工具" class="headerlink" title="可用工具概览 (76+ 工具)"></a>可用工具概览 (76+ 工具)</h3><h4 id="Pull-Request-管理"><a href="#Pull-Request-管理" class="headerlink" title="Pull Request 管理"></a>Pull Request 管理</h4><ul><li><code>get_pull_requests</code> - 获取 PR 列表</li><li><code>get_pull_request</code> - 获取 PR 详细信息</li><li><code>create_pull_request_comment</code> - 添加评论</li><li><code>update_pull_request_comment</code> - 更新评论</li><li><code>delete_pull_request_comment</code> - 删除评论</li><li><code>get_pull_request_comments</code> - 获取评论列表</li><li><code>add_pull_request_reviewer</code> - 添加审查者</li><li><code>remove_pull_request_reviewer</code> - 移除审查者</li><li><code>approve_pull_request</code> - 批准 PR</li><li><code>reject_pull_request</code> - 拒绝 PR</li><li><code>complete_pull_request</code> - 完成&#x2F;合并 PR</li></ul><h4 id="代码库操作"><a href="#代码库操作" class="headerlink" title="代码库操作"></a>代码库操作</h4><ul><li><code>get_repositories</code> - 获取仓库列表</li><li><code>get_repository</code> - 获取仓库信息</li><li><code>get_file_content</code> - 获取文件内容</li><li><code>get_commit_history</code> - 获取提交历史</li><li><code>get_branches</code> - 获取分支列表</li><li><code>create_branch</code> - 创建分支</li><li><code>delete_branch</code> - 删除分支</li></ul><h4 id="工作项管理"><a href="#工作项管理" class="headerlink" title="工作项管理"></a>工作项管理</h4><ul><li><code>get_work_items</code> - 获取工作项列表</li><li><code>get_work_item</code> - 获取工作项详情</li><li><code>create_work_item</code> - 创建工作项</li><li><code>update_work_item</code> - 更新工作项</li><li><code>delete_work_item</code> - 删除工作项</li><li><code>link_work_items</code> - 关联工作项</li></ul><h4 id="构建和发布"><a href="#构建和发布" class="headerlink" title="构建和发布"></a>构建和发布</h4><ul><li><code>get_build_definitions</code> - 获取构建定义</li><li><code>get_builds</code> - 获取构建列表</li><li><code>queue_build</code> - 触发构建</li><li><code>get_build_logs</code> - 获取构建日志</li><li><code>get_release_definitions</code> - 获取发布定义</li><li><code>get_releases</code> - 获取发布列表</li><li><code>create_release</code> - 创建发布</li></ul><h4 id="测试管理"><a href="#测试管理" class="headerlink" title="测试管理"></a>测试管理</h4><ul><li><code>get_test_plans</code> - 获取测试计划</li><li><code>get_test_suites</code> - 获取测试套件</li><li><code>get_test_cases</code> - 获取测试用例</li><li><code>run_tests</code> - 执行测试</li><li><code>get_test_results</code> - 获取测试结果</li></ul><h3 id="实际使用示例"><a href="#实际使用示例" class="headerlink" title="实际使用示例"></a>实际使用示例</h3><p><strong>获取 PR 信息:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 在 Claude Code 会话中</span><br>&gt; 使用 get_pull_request 工具获取 PR 16 的详细信息<br>&gt; 获取 PR 16 的所有文件变更<br>&gt; 列出 PR 16 的所有评论<br></code></pre></td></tr></table></figure><p><strong>添加评论:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&gt; 使用 create_pull_request_comment 工具在 PR 16 上添加评论: <span class="hljs-string">&quot;代码质量良好，建议合并&quot;</span><br>&gt; 在 PR 16 的第 10 行代码上添加行内评论: <span class="hljs-string">&quot;建议使用更安全的字符串处理方法&quot;</span><br></code></pre></td></tr></table></figure><p><strong>管理审查者:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">&gt; 为 PR 16 添加 john@company.com 作为审查者<br>&gt; 从 PR 16 中移除 jane@company.com 的审查权限<br></code></pre></td></tr></table></figure><hr><h2 id="🌟-最佳实践"><a href="#🌟-最佳实践" class="headerlink" title="🌟 最佳实践"></a>🌟 最佳实践</h2><h3 id="安全实践"><a href="#安全实践" class="headerlink" title="安全实践"></a>安全实践</h3><p><strong>PAT 管理:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ✅ 好的做法</span><br><span class="hljs-built_in">export</span> AZURE_DEVOPS_PAT=<span class="hljs-string">&quot;your-token-here&quot;</span><br>claude mcp add-json azure-devops <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">  &quot;env&quot;: &#123;&quot;AZURE_DEVOPS_PAT&quot;: &quot;$&#123;AZURE_DEVOPS_PAT&#125;&quot;&#125;</span><br><span class="hljs-string">&#125;&#x27;</span><br><br><span class="hljs-comment"># ❌ 避免</span><br>claude mcp add-json azure-devops <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">  &quot;env&quot;: &#123;&quot;AZURE_DEVOPS_PAT&quot;: &quot;hard-coded-token&quot;&#125;</span><br><span class="hljs-string">&#125;&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>权限最小化:</strong></p><ul><li>仅授予必要的权限</li><li>定期轮换 Token (建议 90 天)</li><li>监控 Token 使用情况</li><li>及时撤销不用的 Token</li></ul><h3 id="评审质量"><a href="#评审质量" class="headerlink" title="评审质量"></a>评审质量</h3><p><strong>评审检查清单:</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section"># 代码质量</span><br><span class="hljs-bullet">-</span> [ ] 代码风格一致性<br><span class="hljs-bullet">-</span> [ ] 命名规范<br><span class="hljs-bullet">-</span> [ ] 注释质量<br><span class="hljs-bullet">-</span> [ ] 错误处理<br><br><span class="hljs-section"># 安全性</span><br><span class="hljs-bullet">-</span> [ ] 输入验证<br><span class="hljs-bullet">-</span> [ ] 身份认证<br><span class="hljs-bullet">-</span> [ ] 权限检查<br><span class="hljs-bullet">-</span> [ ] 敏感数据处理<br><br><span class="hljs-section"># 性能</span><br><span class="hljs-bullet">-</span> [ ] 算法复杂度<br><span class="hljs-bullet">-</span> [ ] 数据库查询优化<br><span class="hljs-bullet">-</span> [ ] 缓存策略<br><span class="hljs-bullet">-</span> [ ] 内存使用<br><br><span class="hljs-section"># 测试</span><br><span class="hljs-bullet">-</span> [ ] 单元测试覆盖率<br><span class="hljs-bullet">-</span> [ ] 集成测试<br><span class="hljs-bullet">-</span> [ ] 边界条件测试<br><span class="hljs-bullet">-</span> [ ] 异常处理测试<br></code></pre></td></tr></table></figure><p><strong>评审评论模板:</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section">## 🔍 代码评审反馈</span><br><br><span class="hljs-section">### ✅ 优点</span><br><span class="hljs-bullet">-</span> 代码结构清晰<br><span class="hljs-bullet">-</span> 遵循最佳实践<br><span class="hljs-bullet">-</span> 测试覆盖率良好<br><br><span class="hljs-section">### ⚠️ 建议改进</span><br><span class="hljs-bullet">-</span> 第 23 行：建议添加输入验证<br><span class="hljs-bullet">-</span> 第 45 行：考虑使用更高效的算法<br><span class="hljs-bullet">-</span> 缺少单元测试覆盖<br><br><span class="hljs-section">### 🔒 安全性检查</span><br><span class="hljs-bullet">-</span> ✅ 无明显安全风险<br><span class="hljs-bullet">-</span> 建议：添加 CSRF 保护<br><br><span class="hljs-section">### 📊 总体评估</span><br><span class="hljs-strong">**评分**</span>: ⭐⭐⭐⭐/5  <br><span class="hljs-strong">**建议**</span>: 修复建议项后可以合并<br></code></pre></td></tr></table></figure><h3 id="团队协作"><a href="#团队协作" class="headerlink" title="团队协作"></a>团队协作</h3><p><strong>配置共享:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 创建团队配置模板</span><br><span class="hljs-comment"># team-mcp-template.json</span><br>&#123;<br>  <span class="hljs-string">&quot;mcpServers&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;azure-devops&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;stdio&quot;</span>,<br>      <span class="hljs-string">&quot;command&quot;</span>: <span class="hljs-string">&quot;npx&quot;</span>,<br>      <span class="hljs-string">&quot;args&quot;</span>: [<span class="hljs-string">&quot;@azure-devops/mcp&quot;</span>, <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;ORG_NAME&#125;</span>&quot;</span>],<br>      <span class="hljs-string">&quot;env&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;AZURE_DEVOPS_PAT&quot;</span>: <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;AZURE_DEVOPS_PAT&#125;</span>&quot;</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment"># 团队成员使用</span><br>claude --mcp-config team-mcp-template.json<br></code></pre></td></tr></table></figure><p><strong>标准化流程:</strong></p><ol><li><strong>PR 创建</strong> → 自动触发初步评审</li><li><strong>代码完成</strong> → 详细质量检查</li><li><strong>安全扫描</strong> → 专项安全审查</li><li><strong>性能测试</strong> → 性能影响评估</li><li><strong>最终审批</strong> → 人工确认和合并</li></ol><h3 id="自动化集成-1"><a href="#自动化集成-1" class="headerlink" title="自动化集成"></a>自动化集成</h3><p><strong>GitHub Actions 示例:</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Auto</span> <span class="hljs-string">Code</span> <span class="hljs-string">Review</span><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">pull_request:</span><br>    <span class="hljs-attr">types:</span> [<span class="hljs-string">opened</span>, <span class="hljs-string">synchronize</span>]<br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">review:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">steps:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span><br>      <span class="hljs-attr">with:</span><br>        <span class="hljs-attr">node-version:</span> <span class="hljs-string">&#x27;18&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-string">-g</span> <span class="hljs-string">@azure-devops/mcp</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">        claude -p &quot;评审 PR $&#123;&#123; github.event.pull_request.number &#125;&#125; 并添加评论&quot;</span><br><span class="hljs-string"></span>      <span class="hljs-attr">env:</span><br>        <span class="hljs-attr">AZURE_DEVOPS_PAT:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.AZURE_DEVOPS_PAT</span> <span class="hljs-string">&#125;&#125;</span><br></code></pre></td></tr></table></figure><hr><h2 id="🔧-故障排除"><a href="#🔧-故障排除" class="headerlink" title="🔧 故障排除"></a>🔧 故障排除</h2><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="1-MCP-服务器连接失败"><a href="#1-MCP-服务器连接失败" class="headerlink" title="1. MCP 服务器连接失败"></a>1. MCP 服务器连接失败</h4><p><strong>问题现象:</strong></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">azure-devops: npx <span class="hljs-symbol">@azure</span>-devops/mcp - ❌ Failed <span class="hljs-keyword">to</span> connect<br></code></pre></td></tr></table></figure><p><strong>解决步骤:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 检查网络连接</span><br>ping dev.azure.com<br><br><span class="hljs-comment"># 2. 验证 PAT 有效性</span><br>curl -H <span class="hljs-string">&quot;Authorization: Basic <span class="hljs-subst">$(echo -n :YOUR_PAT | base64)</span>&quot;</span> \<br>  <span class="hljs-string">&quot;https://dev.azure.com/YOUR_ORG/_apis/projects?api-version=7.1&quot;</span><br><br><span class="hljs-comment"># 3. 重新配置 MCP 服务器</span><br>claude mcp remove azure-devops -s <span class="hljs-built_in">local</span><br>claude mcp add-json azure-devops <span class="hljs-string">&#x27;...&#x27;</span><br><br><span class="hljs-comment"># 4. 检查权限</span><br><span class="hljs-comment"># 确保 PAT 包含必要权限</span><br></code></pre></td></tr></table></figure><h4 id="2-API-调用失败"><a href="#2-API-调用失败" class="headerlink" title="2. API 调用失败"></a>2. API 调用失败</h4><p><strong>问题现象:</strong></p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">Error: </span>Azure DevOps API call failed: 401 Unauthorized<br></code></pre></td></tr></table></figure><p><strong>解决方案:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 检查 PAT 权限</span><br><span class="hljs-comment"># 1. 登录 Azure DevOps</span><br><span class="hljs-comment"># 2. 检查 Personal Access Tokens</span><br><span class="hljs-comment"># 3. 确认权限包含：</span><br><span class="hljs-comment">#    - Code (Read &amp; Write)</span><br><span class="hljs-comment">#    - Pull Request (Read &amp; Write)</span><br><span class="hljs-comment">#    - Work Items (Read)</span><br><br><span class="hljs-comment"># 重新生成 PAT</span><br><span class="hljs-comment"># 1. 撤销旧 Token</span><br><span class="hljs-comment"># 2. 创建新 Token</span><br><span class="hljs-comment"># 3. 更新 MCP 配置</span><br></code></pre></td></tr></table></figure><h4 id="3-评论添加失败"><a href="#3-评论添加失败" class="headerlink" title="3. 评论添加失败"></a>3. 评论添加失败</h4><p><strong>问题排查:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 检查 PR 状态</span><br>claude -p <span class="hljs-string">&quot;获取 PR 16 的状态&quot;</span><br><br><span class="hljs-comment"># 2. 验证权限</span><br>claude -p <span class="hljs-string">&quot;检查当前用户对 PR 16 的权限&quot;</span><br><br><span class="hljs-comment"># 3. 手动测试 API</span><br>curl -X POST \<br>  -H <span class="hljs-string">&quot;Authorization: Basic <span class="hljs-subst">$(echo -n :YOUR_PAT | base64)</span>&quot;</span> \<br>  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \<br>  -d <span class="hljs-string">&#x27;&#123;&quot;content&quot;:&quot;Test comment&quot;&#125;&#x27;</span> \<br>  <span class="hljs-string">&quot;https://dev.azure.com/YOUR_ORG/YOUR_PROJECT/_apis/git/repositories/YOUR_REPO/pullRequests/16/threads?api-version=7.1&quot;</span><br></code></pre></td></tr></table></figure><h4 id="4-性能问题"><a href="#4-性能问题" class="headerlink" title="4. 性能问题"></a>4. 性能问题</h4><p><strong>优化建议:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 限制并发请求</span><br>claude -p <span class="hljs-string">&quot;设置 Azure DevOps API 请求限制为每秒 5 个&quot;</span><br><br><span class="hljs-comment"># 2. 使用缓存</span><br><span class="hljs-comment"># 避免重复获取相同 PR 信息</span><br><br><span class="hljs-comment"># 3. 批量操作</span><br><span class="hljs-comment"># 一次处理多个相关请求</span><br><br><span class="hljs-comment"># 4. 异步处理</span><br><span class="hljs-comment"># 对于大型 PR，使用异步评审</span><br></code></pre></td></tr></table></figure><h3 id="调试技巧"><a href="#调试技巧" class="headerlink" title="调试技巧"></a>调试技巧</h3><p><strong>启用调试模式:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># MCP 调试</span><br>claude --debug mcp<br><br><span class="hljs-comment"># 详细日志</span><br>claude --debug api,mcp<br><br><span class="hljs-comment"># 环境变量调试</span><br><span class="hljs-built_in">export</span> MCP_DEBUG=<span class="hljs-literal">true</span><br><span class="hljs-built_in">export</span> AZURE_DEVOPS_DEBUG=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p><strong>日志分析:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看 Claude Code 日志</span><br><span class="hljs-built_in">tail</span> -f ~/.claude/logs/claude.log<br><br><span class="hljs-comment"># 查看 MCP 服务器日志</span><br><span class="hljs-built_in">tail</span> -f ~/.claude/logs/mcp-azure-devops.log<br></code></pre></td></tr></table></figure><h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><p><strong>提升速度:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 本地缓存配置</span><br><span class="hljs-comment"># ~/.claude/cache/azure-devops/config.json</span><br><br><span class="hljs-comment"># 2. 并行处理</span><br>claude -p <span class="hljs-string">&quot;并行评审 PR 16-20&quot;</span><br><br><span class="hljs-comment"># 3. 选择性评审</span><br>claude -p <span class="hljs-string">&quot;仅评审变更文件中的 .cs 文件&quot;</span><br><br><span class="hljs-comment"># 4. 增量评审</span><br>claude -p <span class="hljs-string">&quot;仅评审自上次评审以来的新变更&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="🚀-高级用法"><a href="#🚀-高级用法" class="headerlink" title="🚀 高级用法"></a>🚀 高级用法</h2><h3 id="自定义评审模板"><a href="#自定义评审模板" class="headerlink" title="自定义评审模板"></a>自定义评审模板</h3><p><strong>创建评审模板:</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section"># PR 评审模板</span><br><span class="hljs-section">## 🔍 代码质量分析</span><br><span class="hljs-bullet">-</span> 代码风格: &#123;style<span class="hljs-emphasis">_score&#125;/10</span><br><span class="hljs-emphasis">- 复杂度: &#123;complexity_</span>level&#125;<br><span class="hljs-bullet">-</span> 测试覆盖率: &#123;test<span class="hljs-emphasis">_coverage&#125;%</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">## 🛡️ 安全性检查</span><br><span class="hljs-emphasis">- 输入验证: &#123;input_</span>validation<span class="hljs-emphasis">_status&#125;</span><br><span class="hljs-emphasis">- 身份认证: &#123;auth_</span>check<span class="hljs-emphasis">_status&#125;</span><br><span class="hljs-emphasis">- 数据保护: &#123;data_</span>protection<span class="hljs-emphasis">_status&#125;</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">## ⚡ 性能评估</span><br><span class="hljs-emphasis">- 算法效率: &#123;algorithm_</span>efficiency&#125;<br><span class="hljs-bullet">-</span> 内存使用: &#123;memory<span class="hljs-emphasis">_usage&#125;</span><br><span class="hljs-emphasis">- 数据库影响: &#123;db_</span>impact&#125;<br><br><span class="hljs-section">## 📝 建议</span><br>&#123;recommendations&#125;<br><br><span class="hljs-section">## ✅ 结论</span><br>&#123;conclusion&#125;<br></code></pre></td></tr></table></figure><p><strong>使用自定义模板:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">claude -p <span class="hljs-string">&quot;使用自定义模板评审 PR 16&quot;</span><br></code></pre></td></tr></table></figure><h3 id="批量操作脚本"><a href="#批量操作脚本" class="headerlink" title="批量操作脚本"></a>批量操作脚本</h3><p><strong>批量评审脚本:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment"># bulk-review.sh</span><br><br>ORG_NAME=<span class="hljs-string">&quot;your-org&quot;</span><br>PROJECT_NAME=<span class="hljs-string">&quot;your-project&quot;</span><br><br><span class="hljs-comment"># 获取所有待审查的 PR</span><br>PRS=$(claude -p <span class="hljs-string">&quot;列出所有状态为 Active 的 PR ID&quot;</span>)<br><br><span class="hljs-keyword">for</span> pr_id <span class="hljs-keyword">in</span> <span class="hljs-variable">$PRS</span>; <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;评审 PR <span class="hljs-variable">$pr_id</span>&quot;</span><br>    claude -p <span class="hljs-string">&quot;评审 PR <span class="hljs-variable">$pr_id</span> 并添加评论&quot;</span><br>    <span class="hljs-built_in">sleep</span> 2  <span class="hljs-comment"># 避免 API 限制</span><br><span class="hljs-keyword">done</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;批量评审完成&quot;</span><br></code></pre></td></tr></table></figure><p><strong>自动化报告:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment"># weekly-report.sh</span><br><br>claude -p <span class="hljs-string">&quot;生成本周的 PR 评审统计报告，包括：</span><br><span class="hljs-string">- 总评审 PR 数量</span><br><span class="hljs-string">- 发现的问题类型分布</span><br><span class="hljs-string">- 平均评审时间</span><br><span class="hljs-string">- 代码质量趋势</span><br><span class="hljs-string">- 安全问题统计&quot;</span><br></code></pre></td></tr></table></figure><h3 id="集成外部工具"><a href="#集成外部工具" class="headerlink" title="集成外部工具"></a>集成外部工具</h3><p><strong>SonarQube 集成:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 结合 SonarQube 分析结果</span><br>claude -p <span class="hljs-string">&quot;获取 PR 16 的 SonarQube 分析结果并结合到评审中&quot;</span><br></code></pre></td></tr></table></figure><p><strong>安全扫描工具:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 集成 SAST 工具结果</span><br>claude -p <span class="hljs-string">&quot;结合 Checkmarx 扫描结果评审 PR 16&quot;</span><br></code></pre></td></tr></table></figure><h3 id="API-自动化"><a href="#API-自动化" class="headerlink" title="API 自动化"></a>API 自动化</h3><p><strong>REST API 使用:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// Node.js 示例</span><br><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;axios&#x27;</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reviewPR</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">prId</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;http://localhost:3000/claude-api&#x27;</span>, &#123;<br>        <span class="hljs-attr">prompt</span>: <span class="hljs-string">`评审 PR <span class="hljs-subst">$&#123;prId&#125;</span> 并添加评论`</span>,<br>        <span class="hljs-attr">model</span>: <span class="hljs-string">&#x27;claude-sonnet-4&#x27;</span><br>    &#125;);<br>    <br>    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;<br>&#125;;<br><br><span class="hljs-comment">// 使用</span><br><span class="hljs-title function_">reviewPR</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;评审完成:&#x27;</span>, result);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>Webhook 集成:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Python Flask 示例</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify<br><span class="hljs-keyword">import</span> subprocess<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/webhook&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">azure_devops_webhook</span>():<br>    data = request.json<br>    <br>    <span class="hljs-keyword">if</span> data.get(<span class="hljs-string">&#x27;eventType&#x27;</span>) == <span class="hljs-string">&#x27;git.pullrequest.created&#x27;</span>:<br>        pr_id = data[<span class="hljs-string">&#x27;resource&#x27;</span>][<span class="hljs-string">&#x27;pullRequestId&#x27;</span>]<br>        <br>        <span class="hljs-comment"># 触发自动评审</span><br>        subprocess.run([<br>            <span class="hljs-string">&#x27;claude&#x27;</span>, <span class="hljs-string">&#x27;-p&#x27;</span>, <br>            <span class="hljs-string">f&#x27;评审 PR <span class="hljs-subst">&#123;pr_id&#125;</span> 并添加评论&#x27;</span><br>        ])<br>        <br>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&#x27;status&#x27;</span>: <span class="hljs-string">&#x27;success&#x27;</span>&#125;)<br>    <br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&#x27;status&#x27;</span>: <span class="hljs-string">&#x27;ignored&#x27;</span>&#125;)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(host=<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, port=<span class="hljs-number">5000</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="📚-API-参考"><a href="#📚-API-参考" class="headerlink" title="📚 API 参考"></a>📚 API 参考</h2><h3 id="Claude-Code-命令行-API"><a href="#Claude-Code-命令行-API" class="headerlink" title="Claude Code 命令行 API"></a>Claude Code 命令行 API</h3><p><strong>基础语法:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">claude [options] [prompt]<br></code></pre></td></tr></table></figure><p><strong>选项:</strong></p><table><thead><tr><th>选项</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>-p, --print</code></td><td>打印输出后退出</td><td><code>claude -p &quot;hello&quot;</code></td></tr><tr><td><code>--mcp-config</code></td><td>指定 MCP 配置</td><td><code>claude --mcp-config azure-devops</code></td></tr><tr><td><code>--debug</code></td><td>调试模式</td><td><code>claude --debug mcp</code></td></tr><tr><td><code>--model</code></td><td>指定模型</td><td><code>claude --model sonnet</code></td></tr></tbody></table><h3 id="MCP-管理-API"><a href="#MCP-管理-API" class="headerlink" title="MCP 管理 API"></a>MCP 管理 API</h3><p><strong>服务器管理:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 添加服务器</span><br>claude mcp add &lt;name&gt; &lt;<span class="hljs-built_in">command</span>&gt; [args...]<br><br><span class="hljs-comment"># JSON 配置</span><br>claude mcp add-json &lt;name&gt; &lt;json-config&gt;<br><br><span class="hljs-comment"># 移除服务器</span><br>claude mcp remove &lt;name&gt; [-s <span class="hljs-built_in">local</span>|global]<br><br><span class="hljs-comment"># 查看服务器</span><br>claude mcp list<br>claude mcp get &lt;name&gt;<br></code></pre></td></tr></table></figure><h3 id="Azure-DevOps-REST-API-映射"><a href="#Azure-DevOps-REST-API-映射" class="headerlink" title="Azure DevOps REST API 映射"></a>Azure DevOps REST API 映射</h3><p><strong>MCP 工具与 REST API 对应关系:</strong></p><table><thead><tr><th>MCP 工具</th><th>REST API 端点</th><th>描述</th></tr></thead><tbody><tr><td><code>get_pull_requests</code></td><td><code>GET /_apis/git/repositories/&#123;repositoryId&#125;/pullrequests</code></td><td>获取 PR 列表</td></tr><tr><td><code>get_pull_request</code></td><td><code>GET /_apis/git/repositories/&#123;repositoryId&#125;/pullrequests/&#123;pullRequestId&#125;</code></td><td>获取 PR 详情</td></tr><tr><td><code>create_pull_request_comment</code></td><td><code>POST /_apis/git/repositories/&#123;repositoryId&#125;/pullrequests/&#123;pullRequestId&#125;/threads</code></td><td>创建评论</td></tr><tr><td><code>get_work_items</code></td><td><code>GET /_apis/wit/workitems</code></td><td>获取工作项</td></tr></tbody></table><p><strong>API 认证:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Basic Authentication</span><br>Authorization: Basic <span class="hljs-built_in">base64</span>(:&#123;PAT&#125;)<br><br><span class="hljs-comment"># 示例</span><br>curl -H <span class="hljs-string">&quot;Authorization: Basic <span class="hljs-subst">$(echo -n :YOUR_PAT | base64)</span>&quot;</span> \<br>  <span class="hljs-string">&quot;https://dev.azure.com/org/project/_apis/git/pullrequests?api-version=7.1&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="📈-监控和分析"><a href="#📈-监控和分析" class="headerlink" title="📈 监控和分析"></a>📈 监控和分析</h2><h3 id="性能监控"><a href="#性能监控" class="headerlink" title="性能监控"></a>性能监控</h3><p><strong>评审性能指标:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 获取评审统计</span><br>claude -p <span class="hljs-string">&quot;生成 Azure DevOps MCP 工具的性能报告，包括：</span><br><span class="hljs-string">- 平均响应时间</span><br><span class="hljs-string">- API 调用成功率</span><br><span class="hljs-string">- 评审准确性</span><br><span class="hljs-string">- 错误率统计&quot;</span><br></code></pre></td></tr></table></figure><p><strong>监控脚本:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment"># monitor.sh</span><br><br>LOG_FILE=<span class="hljs-string">&quot;azure-devops-mcp-monitor.log&quot;</span><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span><br>    STATUS=$(claude mcp get azure-devops | grep <span class="hljs-string">&quot;Status&quot;</span> | <span class="hljs-built_in">cut</span> -d: -f2)<br>    TIMESTAMP=$(<span class="hljs-built_in">date</span> <span class="hljs-string">&#x27;+%Y-%m-%d %H:%M:%S&#x27;</span>)<br>    <br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$TIMESTAMP</span> - Status: <span class="hljs-variable">$STATUS</span>&quot;</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span><br>    <br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$STATUS</span>&quot;</span> != *<span class="hljs-string">&quot;Connected&quot;</span>* ]]; <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ALERT: MCP 服务器断开连接&quot;</span> | mail -s <span class="hljs-string">&quot;MCP Alert&quot;</span> admin@company.com<br>    <span class="hljs-keyword">fi</span><br>    <br>    <span class="hljs-built_in">sleep</span> 300  <span class="hljs-comment"># 5 分钟检查一次</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><h3 id="质量分析"><a href="#质量分析" class="headerlink" title="质量分析"></a>质量分析</h3><p><strong>代码质量趋势:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">claude -p <span class="hljs-string">&quot;分析过去 30 天的 PR 评审数据，生成质量趋势报告：</span><br><span class="hljs-string">- 代码质量评分变化</span><br><span class="hljs-string">- 常见问题类型</span><br><span class="hljs-string">- 修复时间统计</span><br><span class="hljs-string">- 团队表现分析&quot;</span><br></code></pre></td></tr></table></figure><p><strong>安全漏洞统计:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">claude -p <span class="hljs-string">&quot;统计本月发现的安全问题：</span><br><span class="hljs-string">- 漏洞类型分布</span><br><span class="hljs-string">- 严重程度统计</span><br><span class="hljs-string">- 修复状态跟踪</span><br><span class="hljs-string">- 预防措施建议&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="🔮-未来规划和扩展"><a href="#🔮-未来规划和扩展" class="headerlink" title="🔮 未来规划和扩展"></a>🔮 未来规划和扩展</h2><h3 id="计划功能"><a href="#计划功能" class="headerlink" title="计划功能"></a>计划功能</h3><ul><li><input disabled="" type="checkbox"> <strong>机器学习优化</strong> - 基于历史数据优化评审准确性</li><li><input disabled="" type="checkbox"> <strong>多语言支持</strong> - 扩展到更多编程语言</li><li><input disabled="" type="checkbox"> <strong>团队协作增强</strong> - 团队评审工作流优化</li><li><input disabled="" type="checkbox"> <strong>移动端支持</strong> - 移动设备上的评审功能</li><li><input disabled="" type="checkbox"> <strong>集成IDE插件</strong> - VS Code、IntelliJ 等 IDE 插件</li></ul><h3 id="自定义扩展"><a href="#自定义扩展" class="headerlink" title="自定义扩展"></a>自定义扩展</h3><p><strong>插件开发示例:</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// claude-code-azure-plugin.js</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AzureDevOpsPlugin</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config;<br>    &#125;<br>    <br>    <span class="hljs-keyword">async</span> <span class="hljs-title function_">customReview</span>(<span class="hljs-params">prId, options = &#123;&#125;</span>) &#123;<br>        <span class="hljs-comment">// 自定义评审逻辑</span><br>        <span class="hljs-keyword">const</span> analysis = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeCode</span>(prId);<br>        <span class="hljs-keyword">const</span> recommendations = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateRecommendations</span>(analysis);<br>        <br>        <span class="hljs-keyword">if</span> (options.<span class="hljs-property">autoComment</span>) &#123;<br>            <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addComment</span>(prId, recommendations);<br>        &#125;<br>        <br>        <span class="hljs-keyword">return</span> &#123;<br>            analysis,<br>            recommendations,<br>            <span class="hljs-attr">score</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateScore</span>(analysis)<br>        &#125;;<br>    &#125;<br>&#125;<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">AzureDevOpsPlugin</span>;<br></code></pre></td></tr></table></figure><hr><h2 id="📞-支持和社区"><a href="#📞-支持和社区" class="headerlink" title="📞 支持和社区"></a>📞 支持和社区</h2><h3 id="获取帮助"><a href="#获取帮助" class="headerlink" title="获取帮助"></a>获取帮助</h3><ul><li><strong>Claude Code 文档</strong>: <a href="https://docs.anthropic.com/claude-code">https://docs.anthropic.com/claude-code</a></li><li><strong>Azure DevOps API</strong>: <a href="https://docs.microsoft.com/en-us/rest/api/azure/devops/">https://docs.microsoft.com/en-us/rest/api/azure/devops/</a></li><li><strong>GitHub Issues</strong>: <a href="https://github.com/anthropics/claude-code/issues">https://github.com/anthropics/claude-code/issues</a></li></ul><h3 id="社区资源"><a href="#社区资源" class="headerlink" title="社区资源"></a>社区资源</h3><ul><li><strong>讨论区</strong>: Claude Code Discord&#x2F;Slack</li><li><strong>示例仓库</strong>: <a href="https://github.com/azure-devops-mcp-examples">https://github.com/azure-devops-mcp-examples</a></li><li><strong>最佳实践</strong>: 社区 Wiki</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Claude-Code-Azure-DevOps-MCP-完整使用指南&quot;&gt;&lt;a href=&quot;#Claude-Code-Azure-DevOps-MCP-完整使用指南&quot; class=&quot;headerlink&quot; title=&quot;Claude Code + Azure</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="claudecode" scheme="https://lusipad.com/tags/claudecode/"/>
    
    <category term="devops" scheme="https://lusipad.com/tags/devops/"/>
    
    <category term="review" scheme="https://lusipad.com/tags/review/"/>
    
  </entry>
  
  <entry>
    <title>deepwiki初体验</title>
    <link href="https://lusipad.com/2025/05/13/deepwiki%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>https://lusipad.com/2025/05/13/deepwiki%E5%88%9D%E4%BD%93%E9%AA%8C/</id>
    <published>2025-05-12T23:43:32.000Z</published>
    <updated>2025-05-31T08:43:10.062Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DeepWiki初体验"><a href="#DeepWiki初体验" class="headerlink" title="DeepWiki初体验"></a>DeepWiki初体验</h1><p>继首个 AI 程序员 Devin 沉沙折戟之后，Cognition 又整了个 DeepWiki，号称是活的项目文档。</p><p>之前在用一些本地 agent 的时候，我也萌生过此类的想法，既然 AI 可以读项目，那让它每天定时把整个项目重新更新一遍，只要规则合适，应该只是时间问题？</p><p>没想到这么快就有项目落地了，看看效果如何。</p><p>先首页 add repo，然后大概一天后收到邮件说整完了。</p><p>用的是我自己仓库里的 <a href="https://deepwiki.com/lusipad/plcopen">lusipad&#x2F;plcopen | DeepWiki</a></p><h2 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h2><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250513075204948.png" alt="image-20250513075204948"></p><p>分成了 概述、架构、代码组件、使用指南、开发几块。(这个我觉得还行)</p><p>概述里的内容大部分来自 README 和 test 的用例，还有一个自己绘制的框图。（还行）</p><p>架构部分主要是将 FB、运动控制、执行器三者分别阐述。（不错）</p><p>核心代码则是将几个关键的类详细展开了，并且有详细的 UML 图。（不错）</p><p>使用指南就不大行了，可能还是原来的代码写得不咋滴导致的。</p><p>开发部分我原本以为是给一些开发指南之类的，结果在写构建和加代码，但是内容又有些错误。。</p><p>除此以外，还可以通过 AI 问题。</p><p><del>整体来说，我觉得非常不错，关注下有没有开源替代的，准备部署一个。（之前看过 OpenDeepWiki 主要靠 Gemini Pro 的长上下文来整的，我其实还是想内网部署一个）</del></p><p><a href="https://opendeep.wiki/lusipad/plcopen">plcopen - lusipad 的文档仓库 | OpenDeekWiki | OpenDeekWiki</a></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250530054435152.png" alt="image-20250530054435152"></p><p>开源版本的效果也很不错。看来 Agent 领域没有护城河：）</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;DeepWiki初体验&quot;&gt;&lt;a href=&quot;#DeepWiki初体验&quot; class=&quot;headerlink&quot; title=&quot;DeepWiki初体验&quot;&gt;&lt;/a&gt;DeepWiki初体验&lt;/h1&gt;&lt;p&gt;继首个 AI 程序员 Devin 沉沙折戟之后，Cognition</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>沉浸式翻译的prompt</title>
    <link href="https://lusipad.com/2025/05/07/%E6%B2%89%E6%B5%B8%E5%BC%8F%E7%BF%BB%E8%AF%91%E7%9A%84prompt/"/>
    <id>https://lusipad.com/2025/05/07/%E6%B2%89%E6%B5%B8%E5%BC%8F%E7%BF%BB%E8%AF%91%E7%9A%84prompt/</id>
    <published>2025-05-06T23:11:46.000Z</published>
    <updated>2025-05-06T23:14:10.411Z</updated>
    
    <content type="html"><![CDATA[<h1 id="沉浸式翻译的-prompt"><a href="#沉浸式翻译的-prompt" class="headerlink" title="沉浸式翻译的 prompt"></a>沉浸式翻译的 prompt</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">将下一行文本作为纯文本输入，并将其翻译为简体中文，仅输出翻译。如果某些内容无需翻译（如专有名词、代码等），则保持原文不变。不要解释，输入文本<br></code></pre></td></tr></table></figure><p>笑死，沉浸式翻译你就这样翻车了啊。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250507071225993.png" alt="image-20250507071225993"></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;沉浸式翻译的-prompt&quot;&gt;&lt;a href=&quot;#沉浸式翻译的-prompt&quot; class=&quot;headerlink&quot; title=&quot;沉浸式翻译的 prompt&quot;&gt;&lt;/a&gt;沉浸式翻译的 prompt&lt;/h1&gt;&lt;figure</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>迟来的Manus初体验</title>
    <link href="https://lusipad.com/2025/04/13/%E8%BF%9F%E6%9D%A5%E7%9A%84Manus%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>https://lusipad.com/2025/04/13/%E8%BF%9F%E6%9D%A5%E7%9A%84Manus%E5%88%9D%E4%BD%93%E9%AA%8C/</id>
    <published>2025-04-13T10:04:45.000Z</published>
    <updated>2025-04-29T00:00:25.053Z</updated>
    
    <content type="html"><![CDATA[<h1 id="迟来的-Manus-初体验"><a href="#迟来的-Manus-初体验" class="headerlink" title="迟来的 Manus 初体验"></a>迟来的 Manus 初体验</h1><p>之前 Manus 最火的日子已经过去了，在 AI 界又爆发了一阵 MCP 的大浪潮。</p><p>这个时候我才姗姗来迟得拿到了 Manus 的邀请码，&#x3D; &#x3D;：过气了啊过气了，来试下还不好使。</p><p>题目还是和之前测试 OpenManus 的几道题目。</p><p>目前只能使用【标准】版本，高消耗的是 Pro 专享了。账号上包括了早期用户 1000 + 受邀用户 500 &#x3D; 1500 积分。整个过程耗时比较长，所以也提供了网页通知的形式来告知结果。</p><h1 id="问题1：评估算法的设计"><a href="#问题1：评估算法的设计" class="headerlink" title="问题1：评估算法的设计"></a>问题1：评估算法的设计</h1><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>怎么 设计一个算法，可以评估如何设置参数才能适配机床，因为机床 硬件 伺服 和加工刀路都对其存在影响</p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>消耗积分：400</p><p>耗时时间：22 分钟</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250413181211414.png" alt="image-20250413181211414"></p><p>我已经完成了机床参数评估与优化算法的设计和实现工作。现在向您提交完整的解决方案文档和相关代码文件。</p><h3 id="解决方案概述"><a href="#解决方案概述" class="headerlink" title="解决方案概述"></a>解决方案概述</h3><p>针对”如何设计一个算法，可以评估如何设置参数才能适配机床”的问题，我设计了一个综合考虑硬件、伺服系统和加工刀路三个方面影响因素的参数评估与优化算法。该算法能够：</p><ol><li><strong>评估参数设置的合理性</strong>：通过量化评分方式，评估当前参数设置的合理性</li><li><strong>识别关键参数</strong>：通过敏感性分析，识别对加工质量影响最大的关键参数</li><li><strong>提供优化建议</strong>：生成参数优化建议，按优先级排序</li><li><strong>自动优化参数</strong>：通过分层优化策略和迭代优化过程，自动优化参数设置</li></ol><h3 id="主要成果"><a href="#主要成果" class="headerlink" title="主要成果"></a>主要成果</h3><ol><li><strong>影响因素研究</strong>：系统研究了机床硬件、伺服系统和加工刀路对参数设置的影响</li><li><strong>相互作用分析</strong>：分析了三个方面影响因素之间的复杂相互作用机制</li><li><strong>评估算法设计</strong>：设计了三层评估指标体系和参数评分函数</li><li><strong>优化方法论开发</strong>：开发了分层优化策略和迭代优化过程</li><li><strong>实现框架创建</strong>：创建了完整的算法实现框架，包括数据结构定义和功能模块实现</li><li><strong>算法验证</strong>：验证了算法的有效性，包括评估准确性、优化有效性和敏感性分析准确性</li></ol><h3 id="验证结果"><a href="#验证结果" class="headerlink" title="验证结果"></a>验证结果</h3><p>算法验证结果表明：</p><ul><li>敏感性分析算法表现优秀（100&#x2F;100分）</li><li>优化算法表现良好（74.08&#x2F;100分）</li><li>评估算法有待改进（40&#x2F;100分）</li><li>总体验证分数为65.63&#x2F;100分</li></ul><h3 id="改进建议"><a href="#改进建议" class="headerlink" title="改进建议"></a>改进建议</h3><p>基于验证结果，提出了以下改进建议：</p><ol><li>调整评分函数，确保评分在预期范围内</li><li>优化参数权重，使评分更符合实际情况</li><li>改进相互作用评估方法</li><li>采用更高效的搜索策略，如贝叶斯优化或遗传算法</li><li>引入机器学习方法，通过实际加工数据训练模型</li></ol><h3 id="提交文件"><a href="#提交文件" class="headerlink" title="提交文件"></a>提交文件</h3><ol><li><strong>solution_document.md</strong>：完整的解决方案文档</li><li><strong>machine_tool_algorithm.py</strong>：算法实现框架代码</li><li><strong>algorithm_validator.py</strong>：算法验证工具代码</li><li><strong>validation_report.md</strong>：算法验证报告</li><li><strong>hardware_factors.md</strong>、<strong>servo_factors.md</strong>、<strong>toolpath_factors.md</strong>：影响因素研究文档</li><li><strong>interaction_analysis.md</strong>、<strong>parameter_weights.md</strong>：相互作用分析文档</li><li><strong>algorithm_design.md</strong>：参数评估算法设计文档</li><li><strong>optimization_methodology.md</strong>：参数优化方法论文档</li></ol><p>这个解决方案为机床参数设置提供了一种系统化的方法，有助于提高加工精度和效率，减少对操作人员经验的依赖。虽然当前算法还有改进空间，但已经建立了一个完整的框架，可以通过后续工作不断优化和完善。</p><p>完整的过程和文档：<a href="https://manus.im/share/PXbItOCV5YAeX1KwVZFd7b?replay=1">https://manus.im/share/PXbItOCV5YAeX1KwVZFd7b?replay=1</a></p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>总得来说，他就是将各种参数作为输入，然后拿结果作为一个衡量，做了一个评分系统，的确符合题意🤣。</p><p>看来进一步上一点强度。</p><h2 id="问题2：将你的创作转变为网站并永久部署"><a href="#问题2：将你的创作转变为网站并永久部署" class="headerlink" title="问题2：将你的创作转变为网站并永久部署"></a>问题2：将你的创作转变为网站并永久部署</h2><p>看看前端编程能力如何</p><h2 id="过程-1"><a href="#过程-1" class="headerlink" title="过程"></a>过程</h2><p>看结果非常棒，整个生成的结果比预期的好很多</p><p><img src="/%E8%BF%9F%E6%9D%A5%E7%9A%84Manus%E5%88%9D%E4%BD%93%E9%AA%8C.assets/image-20250413192619930.png" alt="image-20250413192619930"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>从使用上来说，Manus 做得非常出色，已经可以说是初具生产力了，新的 coze 的智能体的邀请码我也有，后面有时间也再体验下。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;迟来的-Manus-初体验&quot;&gt;&lt;a href=&quot;#迟来的-Manus-初体验&quot; class=&quot;headerlink&quot; title=&quot;迟来的 Manus 初体验&quot;&gt;&lt;/a&gt;迟来的 Manus 初体验&lt;/h1&gt;&lt;p&gt;之前 Manus 最火的日子已经过去了，在 AI</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="Manus" scheme="https://lusipad.com/tags/Manus/"/>
    
    <category term="agent" scheme="https://lusipad.com/tags/agent/"/>
    
  </entry>
  
  <entry>
    <title>2025慕尼黑上海光博会</title>
    <link href="https://lusipad.com/2025/03/13/2025%E6%85%95%E5%B0%BC%E9%BB%91%E5%85%89%E5%8D%9A%E4%BC%9A/"/>
    <id>https://lusipad.com/2025/03/13/2025%E6%85%95%E5%B0%BC%E9%BB%91%E5%85%89%E5%8D%9A%E4%BC%9A/</id>
    <published>2025-03-12T23:28:38.000Z</published>
    <updated>2025-03-14T00:23:09.466Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2025-慕尼黑上海光博会"><a href="#2025-慕尼黑上海光博会" class="headerlink" title="2025 慕尼黑上海光博会"></a>2025 慕尼黑上海光博会</h1><p>慕尼黑上海光博会齐聚国内外行业知名企业，展示完整产品链：从元器件到系统集成方案，包含中间环节。2025年正逢慕尼黑上海光博会20周年，2025年3月11日 至 13 日在上海新国际博览中心盛大举行。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250313073447467.png" alt="image-20250313073447467"></p><p>和往年相比，多了光子及量子专区（所以相应的展示面积也增加了），而且今年的专业论坛中还有一期是专门的量子论坛。</p><p>不过这些都不是我所关心的，我主要还是想看下控制系统相关的。基本上都集中在 <code>N1</code> 和 <code>N2</code>。</p><p>这里记录了走马观花的一些信息。</p><h2 id="ScanLab"><a href="#ScanLab" class="headerlink" title="ScanLab"></a>ScanLab</h2><blockquote><p>网站：</p><p><a href="http://www.scanlab.com/">www.scanlab.com</a></p><p>公司介绍：</p><p>自1990年创建已来，SCANLAB生产制造用于激光束偏转和定位的高性能振镜电机及振镜扫描系统。通过精确移动反射镜和光学系统，我们的产品实现了对激光束的三维导向和定位。 基于每年安装的40,000多套扫描系统及解决方案，我们500位高素质、兢业的员工已经积累了丰富的专业技能。在这个坚实的基础上，SCANLAB确立了世界范围内在此市场上的领先地位,并成为对各种应用提供成功扫描解决方案的标志。</p><p>产品分类：</p><p>其他激光应用系统、各类材料激光加工系统、组件加工系统、激光增材制造、医学、光谱、显微镜和成像</p><p>应用领域：</p><p>公共事业、工具制造&#x2F;工程机械、电子&#x2F;电气&#x2F;半导体、汽车工程、化工&#x2F;制药行业&#x2F;医疗技术&#x2F;生物技术、环境、材料处理&#x2F;加工、精密器械、研究&#x2F;科研</p></blockquote><p>在激光的高精度控制方面，ScanLab 还是存在一定优势的，但是其主要还是专注于扫描等领域。可以给人了解的东西不是很多。</p><h2 id="北京金橙子科技股份有限公司"><a href="#北京金橙子科技股份有限公司" class="headerlink" title="北京金橙子科技股份有限公司"></a>北京金橙子科技股份有限公司</h2><blockquote><p>网站：</p><p><a href="https://www.bjjcz.cn/">https://www.bjjcz.cn/</a></p><p>公司介绍：</p><p>北京金橙子科技股份有限公司（股票代码688291）创立于2004年，专注于激光工业加工领域控制软件和系统的研发，是工信部认定的专精特新小巨人企业、北京市认定的专精特新“小巨人”企业、北京市科委认定的高新技术企业。 金橙子打造出了先进的光束传输与控制技术平台，在此平台上衍生出众多具有自主知识产权的产品，广泛应用于激光先进制造、量测与自动化等领域，包括：激光标刻控制系统、激光切割控制系统、激光焊接控制系统、海格力斯控制系统、3D打印系统、宙斯控制系统以及驱控一体扫描模组等多个系列产品。</p><p>产品分类：</p><p>激光加工系统</p><p>应用领域：</p><p>工具制造&#x2F;工程机械、电子&#x2F;电气&#x2F;半导体、汽车工程、航天&#x2F;航空</p></blockquote><p>这家公司之前咱会没有看到过，看产品来说已经比较完整了，后需研究下。</p><h2 id="深圳市优尔数控软件有限公司"><a href="#深圳市优尔数控软件有限公司" class="headerlink" title="深圳市优尔数控软件有限公司"></a>深圳市优尔数控软件有限公司</h2><blockquote><p>网站：</p><p><a href="http://www.ursoft100.com/">www.ursoft100.com</a></p><p>公司介绍：</p><p>深圳市优尔数控软件有限公司创立于2011年，为国家认定的高新技术企业，公司专注于“激光+”方面的软件研发。产品主要涵盖激光控制、运动控制、视觉定位与检测等方面。优尔始终秉持“差异化与创新”，“为客户创造更大价值”的理念,为客户专业提供激光行业整套系统解决方案。 公司所有产品均为自主研发，拥有完全的知识产权。产品稳定可靠，易学易用，功能强大。并建立了完善的售后服务体系，为客户提供最优质的、最全面的技术支持和维护服务。 公司主要软件产品： 切割类：玻璃切割(裂片)，玻璃振镜(3D)打孔，陶瓷旋切打孔，PCB&#x2F;FPC切割等 焊接类：准直焊接与振镜焊接(金属焊接，塑料焊接；锂电焊接，PACK线应用等</p><p>产品分类：</p><p>其他激光应用系统、激光加工系统</p><p>应用领域：</p><p>能源、工具制造&#x2F;工程机械、电子&#x2F;电气&#x2F;半导体、汽车工程、图像处理、印刷&#x2F;制图、数据&#x2F;信息技术、材料处理&#x2F;加工、精密器械、其他</p></blockquote><p>看了下，主要就是做视觉 + 激光焊接这块的，在角落的小展位上。</p><h2 id="固高科技股份有限公司"><a href="#固高科技股份有限公司" class="headerlink" title="固高科技股份有限公司"></a>固高科技股份有限公司</h2><blockquote><p>网站：</p><p><a href="https://www.googoltech.com.cn/">https://www.googoltech.com.cn/</a></p><p>公司介绍：</p><p>固高科技于1999年由香港科技大学的李泽湘、高秉强、吴宏三位机器人、微电子和运动控制领域的国际知名学者和专家所创办，是亚太地区首家拥有自主知识产权, 专业从事运动控制及智能制造核心技术研究与开发的高科技企业，是国内外全互联智能制造综合解决方案提供商之一。固高科技专注于运动控制、伺服驱动、多维感知、工业现场网络和工业软件五个方向的核心技术研究，通过深入的国内外合作、产学研相结合、积极培育系统集成商等创新的商业模式，将固高科技的运控技术及产品广泛应用于微电子、机器人、数控机床、电子加工、检测、印刷、包装及生产自动化等工业控制领域。</p><p>产品分类：</p><p>光学生产设备、光学测量系统、各类材料激光加工系统、激光加工系统、全息测试测量系统与部件、半自动化激光测试测量系统、光伏与再生能源、机器视觉集成、配件、板卡、光纤、光缆、光纤器件及设备、光纤应用加工与装配设备、应用、生物技术</p><p>应用领域：</p><p>能源、工具制造&#x2F;工程机械、电子&#x2F;电气&#x2F;半导体、汽车工程、航天&#x2F;航空、化工&#x2F;制药行业&#x2F;医疗技术&#x2F;生物技术、印刷&#x2F;制图、国防工业、研究&#x2F;科研</p></blockquote><p>固高今年带来的是他的 <code>gLink-II</code> 总线协议，还有高阶平滑算法。需要分析下。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250313080100657.png" alt="image-20250313080100657"></p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250313080250903.png" alt="image-20250313080250903"></p><h2 id="武汉威士登智能控制技术有限公司"><a href="#武汉威士登智能控制技术有限公司" class="headerlink" title="武汉威士登智能控制技术有限公司"></a>武汉威士登智能控制技术有限公司</h2><blockquote><p>网站：</p><p><a href="http://www.wisdomlaser.com/">www.wisdomlaser.com</a></p><p>公司介绍：</p><p>威士登-WISDOM是由一批专注于激光控制、CNC数控系统、运动控制、机器视觉、自动化软件领域专业人才创立的“国家级高新技术企业”，经过多年的技术创新与研发投入，公司一直保持高速发展，2021年至2024年度连续被评为中国光谷“瞪羚企业”。 威士登作为“专精特新”激光控制系统的领导者，自主研发的“WSD-E系列激光切割控制系统”、“WisCut系列激光切割软件”与“WisNest系列排版套料软件”深入应用于各个领域的终端用户，并得到用户的广泛认可与批量应用。其中，威士登自主研发的WSD-E10系列型钢三维激光切割软件系统市场占有率第一，引领了钢结构行业的激光加工革命。</p><p>产品分类：</p><p>系统整合、各类材料激光加工系统、激光加工系统</p><p>应用领域：</p><p>电子&#x2F;电气&#x2F;半导体、汽车工程、材料处理&#x2F;加工、精密器械</p></blockquote><p>威士登是基于 Bechhoff 做的二次开发，从功能角度来说非常的完整。主要问题在于系统非自研，导致开发反馈沟通的成本太高了。但是功能方面值得好好分析下。</p><h2 id="嘉强（上海）智能科技股份公司"><a href="#嘉强（上海）智能科技股份公司" class="headerlink" title="嘉强（上海）智能科技股份公司"></a>嘉强（上海）智能科技股份公司</h2><blockquote><p>网站：</p><p><a href="http://www.empower.cn/">www.empower.cn</a></p><p>公司介绍：</p><p>Empower嘉强成立于2009年，专注于激光智造的赋能型平台企业。公司秉承“嘉言善行·庄敬自强”的宗旨，专业一站式为激光切割、钻孔、焊接、熔覆、淬火、表面处理、微加工，3D打印及增材制造和在线打标等应用，提供RayTools锐图（A+B) 软件+激光头产品子系统，RayKits镭工（K+N）套件+行业解决方案和RayService激光无忧（C+S）配件易损件+维保的线上线下51laser全栈快速本地化服务！ 公司基于自主可控的嘉强鸿xEOS边缘操作系统数字化转型底座，通过xEOS分布式开放平台边缘部署和xAPP个性化工艺之生态保护，持续为激光智造Ai赋能，并与合作伙伴们共赢未来！</p><p>产品分类：</p><p>激光加工系统</p><p>应用领域：</p><p>工具制造&#x2F;工程机械、汽车工程</p></blockquote><p>嘉强今年的干货不少，现在整个产品链都已经比较完整了，开始整生态了。但是从官网来看，这个扩展平台，更多是一些定制类的安卓 工具 App 开发，而且论坛也是个空壳，看来还有一定的距离。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250314081004799.png" alt="image-20250314081004799"></p><h2 id="维宏股份"><a href="#维宏股份" class="headerlink" title="维宏股份"></a>维宏股份</h2><blockquote><p>网站：</p><p><a href="http://www.weihong.com.cn/">www.weihong.com.cn</a></p><p>公司介绍：</p><p>上海维宏电子科技股份有限公司（股票代码：300508）是一家专注于运动控制系统研发、销售和服务的高科技企业，以拥有自主知识产权的工业自动化控制技术为基础，快速为客户提供个性化的解决方案，实现企业价值与客户价值共同成长。如今，维宏品牌已经成长为数字化制造领域“中国智造”的卓越品牌之一。 以赋能中国制造业为荣耀，公司成立以来，致力于开发运动控制产品，不断开拓产品应用领域。目前，维宏运动控制系统已广泛应用于模具制造、金属切削、金属高光加工、3C玻璃精密加工、板式家具切割、实木雕刻、玻璃石材加工、激光加工、水射流加工等领域。</p><p>产品分类：</p><p>各类材料激光加工系统、激光加工系统</p><p>应用领域：</p><p>工具制造&#x2F;工程机械、汽车工程、航天&#x2F;航空、材料处理&#x2F;加工</p></blockquote><p>维宏今年的新东西不多，本次就两个新品，而且技术上都是往年就已经差不多成型的。</p><p>从最近的董秘问答来看，主要还是以金属、激光切割作为主战场，对于激光焊接等领域暂无计划。</p><ul><li><p>四卡盘坡口激光管材切割系统</p><p>TU7800M四卡盘坡口激光管材切割系统是为管道、钢结构和重型机械行业设计的高效解决方案。该系统通过四卡盘技术，解决了传统双卡盘机床加工长零件时的抖动问题，并实现了零尾料加工，提高材料利用率。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/21642406_1735868476702.jpg" alt="img"></p></li><li><p>H型钢三维五轴激光切割控制系统</p><p>H型钢三维五轴激光切割控制系统是专为解决钢构建筑行业中的高精度、复杂形状加工需求而设计的先进制造解决方案。该系统以其高功率激光器（超过12千瓦）、五轴联动机床结构和灵活的切割头设计，能够应对工字钢等材料的精确加工，包括腹板斜切、打孔、过焊孔切割等复杂操作。</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/57252636_1735868293254.jpg" alt="img"></p></li></ul><h2 id="柏楚"><a href="#柏楚" class="headerlink" title="柏楚"></a>柏楚</h2><blockquote><p>上海柏楚电子科技股份有限公司(SHANGHAI FRIENDESS ELECTRONICS TECHNOLOGY CO.,LTD.)是一家从事激光切割控制系统研发、生产、销售的高新技术企业和重点软件企业，技术体系的完整性全球领先，累计为近600家激光加工设备制造商提供成套的系统解决方案，在中国激光切割控制市场占据领先地位，先后获评“上海市小巨人企业”，“上海市专精特新企业”，“上海市硬核科技TOP100”等多项荣誉。2019年在上交所科创板成功上市，为闵行区第一家科创板上市公司，上市后公司开拓了新航道，布局了工业互联网、超高精密驱控一体化、智能焊接机器人等领域，助力推动中国工业自动化的发展，致力于成为一家伟大的工业自动化公司，旨在让智慧工厂走入万千企业。</p></blockquote><p>柏楚今年就一个激光焊接，其他啥都没有。和他们聊的时候，说是切割领域做得差不多了。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>今天的整体来说激光相关的控制软件方面的新内容不多，大部分的企业也往解决方案、细分领域方向在走。特别是作为领头羊的柏楚，今年就一个激光焊接演示。</p><p>另外一点就是有明确的出海趋势，很多的展商都准备了英文版资料，并且现场的国外观众的数量也比往年明显增加。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol><li><a href="https://www.world-of-photonics-china.com.cn/">慕尼黑上海光博会官方网站</a></li><li><a href="https://ezt3.eastfair.com/journal-hk/#/mnh/v2/journal?exhibitionId=1851905336181334018&languageType=cn&tenantId=079018">在线会刊</a></li></ol>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;2025-慕尼黑上海光博会&quot;&gt;&lt;a href=&quot;#2025-慕尼黑上海光博会&quot; class=&quot;headerlink&quot; title=&quot;2025 慕尼黑上海光博会&quot;&gt;&lt;/a&gt;2025</summary>
        
      
    
    
    
    
    <category term="数控" scheme="https://lusipad.com/tags/%E6%95%B0%E6%8E%A7/"/>
    
    <category term="CNC" scheme="https://lusipad.com/tags/CNC/"/>
    
  </entry>
  
  <entry>
    <title>openManus初体验</title>
    <link href="https://lusipad.com/2025/03/08/openManus%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>https://lusipad.com/2025/03/08/openManus%E5%88%9D%E4%BD%93%E9%AA%8C/</id>
    <published>2025-03-08T01:45:14.000Z</published>
    <updated>2025-03-09T13:01:45.162Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OpenManus-初体验"><a href="#OpenManus-初体验" class="headerlink" title="OpenManus 初体验"></a>OpenManus 初体验</h1><p>前几天 Manus 突然火了，国内自媒体各种夸夸夸，国外一点没水花。从我个人角度来看，这玩意儿和前几年的 autoGPT 没啥本质上的区别，无法就是大模型底座 + 工具链优化，这也是今年智能体的一个大方向。</p><p>之前的 DeepResearch 就给大家上了一课，就是推理 + 工具，会产生新的化学反应。因为从某种程度上来说，推理模型的最大优势，其实在于自动生成合适的 Pompt，而高质量的 Prompt 对于模型能力而言非常重要。相当于你有优秀的程序员，但是配了一个拉胯的产品；而推理模型弥补了这个不足。当然这个只是从现象来看，实际的底层的技术架构是完全不同的：）</p><p>反正这个 Manus 在我个人看来，和之前的所谓全球首个 AI 程序员 Devin 什么的，没有什么特别的区别，当然这里不是贬低，团队还是做了很大的改进的，但是并没有重大的技术上的突破。所以眼瞅着 3 小时后开源平替 <a href="https://github.com/mannaandpoem/OpenManus?tab=readme-ov-file">OpenManus</a> 就出来了。仔细看了眼，这个不是 MetaGPT 那帮人整合了工具链套了个壳吗 （此处应有黑人问号）。</p><p>我们先来试用下，安装过程不复述了，比较简单。模型方面使用的是 DeepSeek-V3。</p><h1 id="1-评估算法的设计（初战失败，下次成功后再更新了）"><a href="#1-评估算法的设计（初战失败，下次成功后再更新了）" class="headerlink" title="1. 评估算法的设计（初战失败，下次成功后再更新了）"></a>1. 评估算法的设计（初战失败，下次成功后再更新了）</h1><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>怎么 设计一个算法，可以评估如何设置参数才能适配机床，因为机床 硬件 伺服 和加工刀路都对其存在影响</p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>可以看到 OpenManus 默认分成 30 个步骤，进行处理。</p><p>但是我这边试验到就几步就跪了，大概消耗的 tokens 如下：</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250308100751354.png" alt="image-20250308100751354"></p><p>下面是详细的记录信息：</p><h2 id="1-1-算法设计"><a href="#1-1-算法设计" class="headerlink" title="1.1 算法设计"></a>1.1 算法设计</h2><p>2025-03-08 09:43:07.405 | INFO     | app.agent.toolcall:think:53 - ✨ Manus’s thoughts: 要设计一个算法来评估如何设置参数以适配机床，我们需要考虑以下几个关键因素：</p><ol><li><strong>机床硬件特性</strong>：包括机床的刚性、精度、最大转速、最大进给速度等。</li><li><strong>伺服系统特性</strong>：包括伺服电机的响应速度、扭矩、加速度等。</li><li><strong>加工刀路</strong>：包括切削速度、进给速度、切削深度、刀具材料等。</li></ol><h3 id="算法设计步骤"><a href="#算法设计步骤" class="headerlink" title="算法设计步骤"></a>算法设计步骤</h3><ol><li><p><strong>数据收集</strong>：</p><ul><li>收集机床的硬件参数。</li><li>收集伺服系统的参数。</li><li>收集加工刀路的参数。</li></ul></li><li><p><strong>参数建模</strong>：</p><ul><li>建立数学模型来描述机床、伺服系统和加工刀路之间的关系。</li><li>使用机器学习或优化算法来拟合模型。</li></ul></li><li><p><strong>参数优化</strong>：</p><ul><li>使用优化算法（如遗传算法、粒子群优化等）来寻找最优参数设置。</li><li>考虑约束条件（如机床的最大转速、最大进给速度等）。</li></ul></li><li><p><strong>评估与验证</strong>：</p><ul><li>使用仿真工具或实际加工来验证参数设置的效果。</li><li>根据评估结果调整模型和参数。</li></ul></li></ol><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><p>以下是一个简单的Python代码示例，用于收集数据并进行初步的参数优化：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize<br><br><span class="hljs-comment"># 机床硬件参数</span><br>machine_rigidity = <span class="hljs-number">1000</span>  <span class="hljs-comment"># 机床刚性</span><br>machine_precision = <span class="hljs-number">0.01</span>  <span class="hljs-comment"># 机床精度</span><br><br><span class="hljs-comment"># 伺服系统参数</span><br>servo_response_time = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># 伺服响应时间</span><br>servo_torque = <span class="hljs-number">50</span>  <span class="hljs-comment"># 伺服扭矩</span><br><br><span class="hljs-comment"># 加工刀路参数</span><br>cutting_speed = <span class="hljs-number">200</span>  <span class="hljs-comment"># 切削速度</span><br>feed_rate = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># 进给速度</span><br>cutting_depth = <span class="hljs-number">0.5</span>  <span class="hljs-comment"># 切削深度</span><br><br><span class="hljs-comment"># 目标函数：最小化加工误差</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">objective_function</span>(<span class="hljs-params">params</span>):<br>    cutting_speed, feed_rate, cutting_depth = params<br>    <span class="hljs-comment"># 简单的误差模型</span><br>    error = (cutting_speed / machine_rigidity) + (feed_rate / servo_response_time) + (cutting_depth / machine_precision)<br>    <span class="hljs-keyword">return</span> error<br><br><span class="hljs-comment"># 约束条件</span><br>constraints = (<br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>] - <span class="hljs-number">100</span>&#125;,  <span class="hljs-comment"># 切削速度 &gt;= 100</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>] - <span class="hljs-number">0.05</span>&#125;,  <span class="hljs-comment"># 进给速度 &gt;= 0.05</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">2</span>] - <span class="hljs-number">0.1</span>&#125;    <span class="hljs-comment"># 切削深度 &gt;= 0.1</span><br>)<br><br><span class="hljs-comment"># 初始参数</span><br>initial_params = [cutting_speed, feed_rate, cutting_depth]<br><br><span class="hljs-comment"># 优化</span><br>result = minimize(objective_function, initial_params, constraints=constraints)<br><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Optimal Parameters:&quot;</span>, result.x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Minimum Error:&quot;</span>, result.fun)<br></code></pre></td></tr></table></figure><h3 id="下一步"><a href="#下一步" class="headerlink" title="下一步"></a>下一步</h3><ol><li><strong>数据收集</strong>：收集更多的机床、伺服系统和加工刀路的数据。</li><li><strong>模型改进</strong>：使用更复杂的模型来描述系统。</li><li><strong>优化算法</strong>：尝试不同的优化算法以提高参数设置的准确性。</li><li><strong>验证</strong>：使用仿真工具或实际加工来验证参数设置的效果。</li></ol><p>如果需要进一步的信息或工具支持，请告诉我。</p><h2 id="1-2-算法优化"><a href="#1-2-算法优化" class="headerlink" title="1.2 算法优化"></a>1.2 算法优化</h2><p>2025-03-08 09:43:44.951 | INFO     | app.agent.toolcall:think:53 - ✨ Manus’s thoughts: To design an algorithm that evaluates how to set parameters to adapt to a machine tool, we need to consider the following key factors:</p><ol><li><strong>Machine Tool Hardware Characteristics</strong>: Including rigidity, precision, maximum speed, maximum feed rate, etc.</li><li><strong>Servo System Characteristics</strong>: Including response speed, torque, acceleration, etc.</li><li><strong>Tool Path</strong>: Including cutting speed, feed rate, cutting depth, tool material, etc.</li></ol><h3 id="Algorithm-Design-Steps"><a href="#Algorithm-Design-Steps" class="headerlink" title="Algorithm Design Steps"></a>Algorithm Design Steps</h3><ol><li><p><strong>Data Collection</strong>:</p><ul><li>Collect machine tool hardware parameters.</li><li>Collect servo system parameters.</li><li>Collect tool path parameters.</li></ul></li><li><p><strong>Parameter Modeling</strong>:</p><ul><li>Establish a mathematical model to describe the relationship between the machine tool, servo system, and tool path.</li><li>Use machine learning or optimization algorithms to fit the model.</li></ul></li><li><p><strong>Parameter Optimization</strong>:</p><ul><li>Use optimization algorithms (such as genetic algorithms, particle swarm optimization, etc.) to find the optimal parameter settings.</li><li>Consider constraints (such as the machine tool’s maximum speed, maximum feed rate, etc.).</li></ul></li><li><p><strong>Evaluation and Validation</strong>:</p><ul><li>Use simulation tools or actual machining to validate the parameter settings.</li><li>Adjust the model and parameters based on the evaluation results.</li></ul></li></ol><h3 id="Example-Code"><a href="#Example-Code" class="headerlink" title="Example Code"></a>Example Code</h3><p>Here is a simple Python code example for collecting data and performing initial parameter optimization:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize<br><br><span class="hljs-comment"># Machine tool hardware parameters</span><br>machine_rigidity = <span class="hljs-number">1000</span>  <span class="hljs-comment"># Machine rigidity</span><br>machine_precision = <span class="hljs-number">0.01</span>  <span class="hljs-comment"># Machine precision</span><br><br><span class="hljs-comment"># Servo system parameters</span><br>servo_response_time = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Servo response time</span><br>servo_torque = <span class="hljs-number">50</span>  <span class="hljs-comment"># Servo torque</span><br><br><span class="hljs-comment"># Tool path parameters</span><br>cutting_speed = <span class="hljs-number">200</span>  <span class="hljs-comment"># Cutting speed</span><br>feed_rate = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Feed rate</span><br>cutting_depth = <span class="hljs-number">0.5</span>  <span class="hljs-comment"># Cutting depth</span><br><br><span class="hljs-comment"># Objective function: Minimize machining error</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">objective_function</span>(<span class="hljs-params">params</span>):<br>    cutting_speed, feed_rate, cutting_depth = params<br>    <span class="hljs-comment"># Simple error model</span><br>    error = (cutting_speed / machine_rigidity) + (feed_rate / servo_response_time) + (cutting_depth / machine_precision)<br>    <span class="hljs-keyword">return</span> error<br><br><span class="hljs-comment"># Constraints</span><br>constraints = (<br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>] - <span class="hljs-number">100</span>&#125;,  <span class="hljs-comment"># Cutting speed &gt;= 100</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>] - <span class="hljs-number">0.05</span>&#125;,  <span class="hljs-comment"># Feed rate &gt;= 0.05</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">2</span>] - <span class="hljs-number">0.1</span>&#125;    <span class="hljs-comment"># Cutting depth &gt;= 0.1</span><br>)<br><br><span class="hljs-comment"># Initial parameters</span><br>initial_params = [cutting_speed, feed_rate, cutting_depth]<br><br><span class="hljs-comment"># Optimization</span><br>result = minimize(objective_function, initial_params, constraints=constraints)<br><br><span class="hljs-comment"># Output results</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Optimal Parameters:&quot;</span>, result.x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Minimum Error:&quot;</span>, result.fun)<br></code></pre></td></tr></table></figure><h3 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h3><ol><li><strong>Data Collection</strong>: Collect more data on machine tools, servo systems, and tool paths.</li><li><strong>Model Improvement</strong>: Use more complex models to describe the system.</li><li><strong>Optimization Algorithms</strong>: Try different optimization algorithms to improve the accuracy of parameter settings.</li><li><strong>Validation</strong>: Use simulation tools or actual machining to validate the parameter settings.</li></ol><h2 id="1-3-算法优化（已经开始无效重复了）"><a href="#1-3-算法优化（已经开始无效重复了）" class="headerlink" title="1.3 算法优化（已经开始无效重复了）"></a>1.3 算法优化（已经开始无效重复了）</h2><p>2025-03-08 09:44:14.491 | INFO     | app.agent.toolcall:think:53 - ✨ Manus’s thoughts: To design an algorithm that evaluates how to set parameters to adapt to a machine tool, we need to consider the following key factors:</p><ol><li><strong>Machine Tool Hardware Characteristics</strong>: Including rigidity, precision, maximum speed, maximum feed rate, etc.</li><li><strong>Servo System Characteristics</strong>: Including response speed, torque, acceleration, etc.</li><li><strong>Tool Path</strong>: Including cutting speed, feed rate, cutting depth, tool material, etc.</li></ol><h3 id="Algorithm-Design-Steps-1"><a href="#Algorithm-Design-Steps-1" class="headerlink" title="Algorithm Design Steps"></a>Algorithm Design Steps</h3><ol><li><p><strong>Data Collection</strong>:</p><ul><li>Collect machine tool hardware parameters.</li><li>Collect servo system parameters.</li><li>Collect tool path parameters.</li></ul></li><li><p><strong>Parameter Modeling</strong>:</p><ul><li>Establish a mathematical model to describe the relationship between the machine tool, servo system, and tool path.</li><li>Use machine learning or optimization algorithms to fit the model.</li></ul></li><li><p><strong>Parameter Optimization</strong>:</p><ul><li>Use optimization algorithms (such as genetic algorithms, particle swarm optimization, etc.) to find the optimal parameter settings.</li><li>Consider constraints (such as the machine tool’s maximum speed, maximum feed rate, etc.).</li></ul></li><li><p><strong>Evaluation and Validation</strong>:</p><ul><li>Use simulation tools or actual machining to validate the parameter settings.</li><li>Adjust the model and parameters based on the evaluation results.</li></ul></li></ol><h3 id="Example-Code-1"><a href="#Example-Code-1" class="headerlink" title="Example Code"></a>Example Code</h3><p>Here is a simple Python code example for collecting data and performing initial parameter optimization:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize<br><br><span class="hljs-comment"># Machine tool hardware parameters</span><br>machine_rigidity = <span class="hljs-number">1000</span>  <span class="hljs-comment"># Machine rigidity</span><br>machine_precision = <span class="hljs-number">0.01</span>  <span class="hljs-comment"># Machine precision</span><br><br><span class="hljs-comment"># Servo system parameters</span><br>servo_response_time = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Servo response time</span><br>servo_torque = <span class="hljs-number">50</span>  <span class="hljs-comment"># Servo torque</span><br><br><span class="hljs-comment"># Tool path parameters</span><br>cutting_speed = <span class="hljs-number">200</span>  <span class="hljs-comment"># Cutting speed</span><br>feed_rate = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Feed rate</span><br>cutting_depth = <span class="hljs-number">0.5</span>  <span class="hljs-comment"># Cutting depth</span><br><br><span class="hljs-comment"># Objective function: Minimize machining error</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">objective_function</span>(<span class="hljs-params">params</span>):<br>    cutting_speed, feed_rate, cutting_depth = params<br>    <span class="hljs-comment"># Simple error model</span><br>    error = (cutting_speed / machine_rigidity) + (feed_rate / servo_response_time) + (cutting_depth / machine_precision)<br>    <span class="hljs-keyword">return</span> error<br><br><span class="hljs-comment"># Constraints</span><br>constraints = (<br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>] - <span class="hljs-number">100</span>&#125;,  <span class="hljs-comment"># Cutting speed &gt;= 100</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>] - <span class="hljs-number">0.05</span>&#125;,  <span class="hljs-comment"># Feed rate &gt;= 0.05</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">2</span>] - <span class="hljs-number">0.1</span>&#125;    <span class="hljs-comment"># Cutting depth &gt;= 0.1</span><br>)<br><br><span class="hljs-comment"># Initial parameters</span><br>initial_params = [cutting_speed, feed_rate, cutting_depth]<br><br><span class="hljs-comment"># Optimization</span><br>result = minimize(objective_function, initial_params, constraints=constraints)<br><br><span class="hljs-comment"># Output results</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Optimal Parameters:&quot;</span>, result.x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Minimum Error:&quot;</span>, result.fun)<br></code></pre></td></tr></table></figure><h3 id="Next-Steps-1"><a href="#Next-Steps-1" class="headerlink" title="Next Steps"></a>Next Steps</h3><ol><li><strong>Data Collection</strong>: Collect more data on machine tools, servo systems, and tool paths.</li><li><strong>Model Improvement</strong>: Use more complex models to describe the system.</li><li><strong>Optimization Algorithms</strong>: Try different optimization algorithms to improve the accuracy of parameter settings.</li><li><strong>Validation</strong>: Use simulation tools or actual machining to validate the parameter settings.</li></ol><p>If you need further information or tool support, please let me know.</p><h2 id="1-4-算法优化（重复）"><a href="#1-4-算法优化（重复）" class="headerlink" title="1.4 算法优化（重复）"></a>1.4 算法优化（重复）</h2><p>2025-03-08 09:44:14.491 | INFO     | app.agent.toolcall:think:54 - 🛠️ Manus selected 0 tools to use<br>2025-03-08 09:44:14.492 | INFO     | app.agent.base:run:137 - Executing step 4&#x2F;30<br>2025-03-08 09:44:43.020 | INFO     | app.agent.toolcall:think:53 - ✨ Manus’s thoughts: To design an algorithm that evaluates how to set parameters to adapt to a machine tool, we need to consider the following key factors:</p><ol><li><strong>Machine Tool Hardware Characteristics</strong>: Including rigidity, precision, maximum speed, maximum feed rate, etc.</li><li><strong>Servo System Characteristics</strong>: Including response speed, torque, acceleration, etc.</li><li><strong>Tool Path</strong>: Including cutting speed, feed rate, cutting depth, tool material, etc.</li></ol><h3 id="Algorithm-Design-Steps-2"><a href="#Algorithm-Design-Steps-2" class="headerlink" title="Algorithm Design Steps"></a>Algorithm Design Steps</h3><ol><li><p><strong>Data Collection</strong>:</p><ul><li>Collect machine tool hardware parameters.</li><li>Collect servo system parameters.</li><li>Collect tool path parameters.</li></ul></li><li><p><strong>Parameter Modeling</strong>:</p><ul><li>Establish a mathematical model to describe the relationship between the machine tool, servo system, and tool path.</li><li>Use machine learning or optimization algorithms to fit the model.</li></ul></li><li><p><strong>Parameter Optimization</strong>:</p><ul><li>Use optimization algorithms (such as genetic algorithms, particle swarm optimization, etc.) to find the optimal parameter settings.</li><li>Consider constraints (such as the machine tool’s maximum speed, maximum feed rate, etc.).</li></ul></li><li><p><strong>Evaluation and Validation</strong>:</p><ul><li>Use simulation tools or actual machining to validate the parameter settings.</li><li>Adjust the model and parameters based on the evaluation results.</li></ul></li></ol><h3 id="Example-Code-2"><a href="#Example-Code-2" class="headerlink" title="Example Code"></a>Example Code</h3><p>Here is a simple Python code example for collecting data and performing initial parameter optimization:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize<br><br><span class="hljs-comment"># Machine tool hardware parameters</span><br>machine_rigidity = <span class="hljs-number">1000</span>  <span class="hljs-comment"># Machine rigidity</span><br>machine_precision = <span class="hljs-number">0.01</span>  <span class="hljs-comment"># Machine precision</span><br><br><span class="hljs-comment"># Servo system parameters</span><br>servo_response_time = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Servo response time</span><br>servo_torque = <span class="hljs-number">50</span>  <span class="hljs-comment"># Servo torque</span><br><br><span class="hljs-comment"># Tool path parameters</span><br>cutting_speed = <span class="hljs-number">200</span>  <span class="hljs-comment"># Cutting speed</span><br>feed_rate = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Feed rate</span><br>cutting_depth = <span class="hljs-number">0.5</span>  <span class="hljs-comment"># Cutting depth</span><br><br><span class="hljs-comment"># Objective function: Minimize machining error</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">objective_function</span>(<span class="hljs-params">params</span>):<br>    cutting_speed, feed_rate, cutting_depth = params<br>    <span class="hljs-comment"># Simple error model</span><br>    error = (cutting_speed / machine_rigidity) + (feed_rate / servo_response_time) + (cutting_depth / machine_precision)<br>    <span class="hljs-keyword">return</span> error<br><br><span class="hljs-comment"># Constraints</span><br>constraints = (<br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>] - <span class="hljs-number">100</span>&#125;,  <span class="hljs-comment"># Cutting speed &gt;= 100</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>] - <span class="hljs-number">0.05</span>&#125;,  <span class="hljs-comment"># Feed rate &gt;= 0.05</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">2</span>] - <span class="hljs-number">0.1</span>&#125;    <span class="hljs-comment"># Cutting depth &gt;= 0.1</span><br>)<br><br><span class="hljs-comment"># Initial parameters</span><br>initial_params = [cutting_speed, feed_rate, cutting_depth]<br><br><span class="hljs-comment"># Optimization</span><br>result = minimize(objective_function, initial_params, constraints=constraints)<br><br><span class="hljs-comment"># Output results</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Optimal Parameters:&quot;</span>, result.x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Minimum Error:&quot;</span>, result.fun)<br></code></pre></td></tr></table></figure><h3 id="Next-Steps-2"><a href="#Next-Steps-2" class="headerlink" title="Next Steps"></a>Next Steps</h3><ol><li><strong>Data Collection</strong>: Collect more data on machine tools, servo systems, and tool paths.</li><li><strong>Model Improvement</strong>: Use more complex models to describe the system.</li><li><strong>Optimization Algorithms</strong>: Try different optimization algorithms to improve the accuracy of parameter settings.</li><li><strong>Validation</strong>: Use simulation tools or actual machining to validate the parameter settings.</li></ol><p>If you need further information or tool support, please let me know.</p><h2 id="1-5-算法优化（重复）"><a href="#1-5-算法优化（重复）" class="headerlink" title="1.5 算法优化（重复）"></a>1.5 算法优化（重复）</h2><p>2025-03-08 09:44:43.020 | INFO     | app.agent.toolcall:think:54 - 🛠️ Manus selected 0 tools to use<br>2025-03-08 09:44:43.020 | WARNING  | app.agent.base:handle_stuck_state:163 - Agent detected stuck state. Added prompt:         Observed duplicate responses. Consider new strategies and avoid repeating ineffective paths already attempted.<br>2025-03-08 09:44:43.021 | INFO     | app.agent.base:run:137 - Executing step 5&#x2F;30<br>2025-03-08 09:45:11.795 | INFO     | app.agent.toolcall:think:53 - ✨ Manus’s thoughts: To design an algorithm that evaluates how to set parameters to adapt to a machine tool, we need to consider the following key factors:</p><ol><li><strong>Machine Tool Hardware Characteristics</strong>: Including rigidity, precision, maximum speed, maximum feed rate, etc.</li><li><strong>Servo System Characteristics</strong>: Including response speed, torque, acceleration, etc.</li><li><strong>Tool Path</strong>: Including cutting speed, feed rate, cutting depth, tool material, etc.</li></ol><h3 id="Algorithm-Design-Steps-3"><a href="#Algorithm-Design-Steps-3" class="headerlink" title="Algorithm Design Steps"></a>Algorithm Design Steps</h3><ol><li><p><strong>Data Collection</strong>:</p><ul><li>Collect machine tool hardware parameters.</li><li>Collect servo system parameters.</li><li>Collect tool path parameters.</li></ul></li><li><p><strong>Parameter Modeling</strong>:</p><ul><li>Establish a mathematical model to describe the relationship between the machine tool, servo system, and tool path.</li><li>Use machine learning or optimization algorithms to fit the model.</li></ul></li><li><p><strong>Parameter Optimization</strong>:</p><ul><li>Use optimization algorithms (such as genetic algorithms, particle swarm optimization, etc.) to find the optimal parameter settings.</li><li>Consider constraints (such as the machine tool’s maximum speed, maximum feed rate, etc.).</li></ul></li><li><p><strong>Evaluation and Validation</strong>:</p><ul><li>Use simulation tools or actual machining to validate the parameter settings.</li><li>Adjust the model and parameters based on the evaluation results.</li></ul></li></ol><h3 id="Example-Code-3"><a href="#Example-Code-3" class="headerlink" title="Example Code"></a>Example Code</h3><p>Here is a simple Python code example for collecting data and performing initial parameter optimization:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize<br><br><span class="hljs-comment"># Machine tool hardware parameters</span><br>machine_rigidity = <span class="hljs-number">1000</span>  <span class="hljs-comment"># Machine rigidity</span><br>machine_precision = <span class="hljs-number">0.01</span>  <span class="hljs-comment"># Machine precision</span><br><br><span class="hljs-comment"># Servo system parameters</span><br>servo_response_time = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Servo response time</span><br>servo_torque = <span class="hljs-number">50</span>  <span class="hljs-comment"># Servo torque</span><br><br><span class="hljs-comment"># Tool path parameters</span><br>cutting_speed = <span class="hljs-number">200</span>  <span class="hljs-comment"># Cutting speed</span><br>feed_rate = <span class="hljs-number">0.1</span>  <span class="hljs-comment"># Feed rate</span><br>cutting_depth = <span class="hljs-number">0.5</span>  <span class="hljs-comment"># Cutting depth</span><br><br><span class="hljs-comment"># Objective function: Minimize machining error</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">objective_function</span>(<span class="hljs-params">params</span>):<br>    cutting_speed, feed_rate, cutting_depth = params<br>    <span class="hljs-comment"># Simple error model</span><br>    error = (cutting_speed / machine_rigidity) + (feed_rate / servo_response_time) + (cutting_depth / machine_precision)<br>    <span class="hljs-keyword">return</span> error<br><br><span class="hljs-comment"># Constraints</span><br>constraints = (<br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>] - <span class="hljs-number">100</span>&#125;,  <span class="hljs-comment"># Cutting speed &gt;= 100</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>] - <span class="hljs-number">0.05</span>&#125;,  <span class="hljs-comment"># Feed rate &gt;= 0.05</span><br>    &#123;<span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;ineq&#x27;</span>, <span class="hljs-string">&#x27;fun&#x27;</span>: <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">2</span>] - <span class="hljs-number">0.1</span>&#125;    <span class="hljs-comment"># Cutting depth &gt;= 0.1</span><br>)<br><br><span class="hljs-comment"># Initial parameters</span><br>initial_params = [cutting_speed, feed_rate, cutting_depth]<br><br><span class="hljs-comment"># Optimization</span><br>result = minimize(objective_function, initial_params, constraints=constraints)<br><br><span class="hljs-comment"># Output results</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Optimal Parameters:&quot;</span>, result.x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Minimum Error:&quot;</span>, result.fun)<br></code></pre></td></tr></table></figure><h3 id="Next-Steps-3"><a href="#Next-Steps-3" class="headerlink" title="Next Steps"></a>Next Steps</h3><ol><li><strong>Data Collection</strong>: Collect more data on machine tools, servo systems, and tool paths.</li><li><strong>Model Improvement</strong>: Use more complex models to describe the system.</li><li><strong>Optimization Algorithms</strong>: Try different optimization algorithms to improve the accuracy of parameter settings.</li><li><strong>Validation</strong>: Use simulation tools or actual machining to validate the parameter settings.</li></ol><p>If you need further information or tool support, please let me know.</p><h2 id="1-6-1-13-尝试使用-python-执行，全部都失败了"><a href="#1-6-1-13-尝试使用-python-执行，全部都失败了" class="headerlink" title="1.6 ~ 1.13 尝试使用 python 执行，全部都失败了"></a>1.6 ~ 1.13 尝试使用 python 执行，全部都失败了</h2><p>日志就不记录了</p><h1 id="2-收集-lusipad-的信息，并且生成一个个人主页"><a href="#2-收集-lusipad-的信息，并且生成一个个人主页" class="headerlink" title="2 收集 lusipad 的信息，并且生成一个个人主页"></a>2 收集 lusipad 的信息，并且生成一个个人主页</h1><h2 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h2><p>收集lusipad的信息并为他编写个人主页，需要美观带图文信息</p><h2 id="过程-1"><a href="#过程-1" class="headerlink" title="过程"></a>过程</h2><h3 id="2-1-使用-google-search-信息"><a href="#2-1-使用-google-search-信息" class="headerlink" title="2.1 使用 google search 信息"></a>2.1 使用 google search 信息</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">2025-03-09 13:08:02.197 | <span class="hljs-built_in">INFO</span>     | app.agent.toolcall:act:113 - 🎯<span class="hljs-built_in"> Tool </span><span class="hljs-string">&#x27;google_search&#x27;</span> completed its mission! Result: Observed output of cmd `google_search` executed:<br>[<span class="hljs-string">&#x27;/search?q=lusipad&#x27;</span>, <span class="hljs-string">&#x27;https://lusipad.com/&#x27;</span>, <span class="hljs-string">&#x27;https://github.com/lusipad&#x27;</span>, <span class="hljs-string">&#x27;https://lusipad.com/about/&#x27;</span>, <span class="hljs-string">&#x27;https://marketplace.visualstudio.com/publishers/lusipad&#x27;</span>, <span class="hljs-string">&#x27;https://gitee.com/lusipad/newbot.git&#x27;</span>, <span class="hljs-string">&#x27;https://github.com/lusipad/lusipad.github.io/blob/master/lua%E7%9A%84capi.html&#x27;</span>, <span class="hljs-string">&#x27;https://www.google.com/search?num=12&#x27;</span>, <span class="hljs-string">&#x27;https://app.opensauced.pizza/user/lusipad/card&#x27;</span>, <span class="hljs-string">&#x27;https://gitee.com/lusipad/watched?sort=watches.created_at+desc&#x27;</span>]<br></code></pre></td></tr></table></figure><p>这一步收集到了一些我的网站之类的信息</p><h3 id="2-2-打开浏览器"><a href="#2-2-打开浏览器" class="headerlink" title="2.2 打开浏览器"></a>2.2 打开浏览器</h3><p>发现没有浏览器后，尝试下载并且安装一个 chrome 浏览器</p><h3 id="2-3-下载和安装浏览器"><a href="#2-3-下载和安装浏览器" class="headerlink" title="2.3 下载和安装浏览器"></a>2.3 下载和安装浏览器</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2025</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">13</span>:<span class="hljs-number">08</span>:<span class="hljs-number">19</span>.<span class="hljs-number">523</span> | INFO     | app.agent.base:run:<span class="hljs-number">137</span> - Executing step <span class="hljs-number">3</span>/<span class="hljs-number">30</span><br><span class="hljs-attribute">2025</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">13</span>:<span class="hljs-number">08</span>:<span class="hljs-number">27</span>.<span class="hljs-number">953</span> | INFO     | app.agent.toolcall:think:<span class="hljs-number">53</span> - ✨ Manus&#x27;s thoughts:<br><span class="hljs-attribute">2025</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">13</span>:<span class="hljs-number">08</span>:<span class="hljs-number">27</span>.<span class="hljs-number">953</span> | INFO     | app.agent.toolcall:think:<span class="hljs-number">54</span> - 🛠️ Manus selected <span class="hljs-number">1</span> tools to use<br><span class="hljs-attribute">2025</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">13</span>:<span class="hljs-number">08</span>:<span class="hljs-number">27</span>.<span class="hljs-number">953</span> | INFO     | app.agent.toolcall:think:<span class="hljs-number">58</span> - 🧰 Tools being prepared:<span class="hljs-meta"> [&#x27;python_execute&#x27;]</span><br><span class="hljs-attribute">2025</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">13</span>:<span class="hljs-number">08</span>:<span class="hljs-number">27</span>.<span class="hljs-number">955</span> | INFO     | app.agent.toolcall:execute_tool:<span class="hljs-number">140</span> - 🔧 Activating tool: &#x27;python_execute&#x27;...<br><span class="hljs-attribute">Downloading</span> Chromium <span class="hljs-number">131</span>.<span class="hljs-number">0</span>.<span class="hljs-number">6778</span>.<span class="hljs-number">33</span> (playwright build v1148) from https://playwright.azureedge.net/builds/chromium/<span class="hljs-number">1148</span>/chromium-win64.zip<br></code></pre></td></tr></table></figure><h3 id="2-4-尝试执行-python"><a href="#2-4-尝试执行-python" class="headerlink" title="2.4 尝试执行 python"></a>2.4 尝试执行 python</h3><p>但是没有找到 python</p><h3 id="2-5-又下载了火狐的浏览器"><a href="#2-5-又下载了火狐的浏览器" class="headerlink" title="2.5 又下载了火狐的浏览器"></a>2.5 又下载了火狐的浏览器</h3><h3 id="2-6-访问了-lusipad-com"><a href="#2-6-访问了-lusipad-com" class="headerlink" title="2.6 访问了 lusipad.com"></a>2.6 访问了 <code>lusipad.com</code></h3><h3 id="2-7-使用火狐下载了首页内容"><a href="#2-7-使用火狐下载了首页内容" class="headerlink" title="2.7 使用火狐下载了首页内容"></a>2.7 使用火狐下载了首页内容</h3><p>保存了一个 lusipad_homepage.txt 和 lusipad_homepage.html</p><p>似乎他认为这样就完成了。</p><p>检查了网页内容，无法打开；txt 就是把所有的主页的内容存储到了 txt 里。</p><p>从使用上来看，基于 browse_use 的一些常用功能已经被集成进来了，可惜整体智商堪忧。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;OpenManus-初体验&quot;&gt;&lt;a href=&quot;#OpenManus-初体验&quot; class=&quot;headerlink&quot; title=&quot;OpenManus 初体验&quot;&gt;&lt;/a&gt;OpenManus 初体验&lt;/h1&gt;&lt;p&gt;前几天 Manus</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="manus" scheme="https://lusipad.com/tags/manus/"/>
    
    <category term="智能体" scheme="https://lusipad.com/tags/%E6%99%BA%E8%83%BD%E4%BD%93/"/>
    
    <category term="open_manus" scheme="https://lusipad.com/tags/open-manus/"/>
    
    <category term="openManus" scheme="https://lusipad.com/tags/openManus/"/>
    
  </entry>
  
  <entry>
    <title>KTransformers 2.3 版本发布</title>
    <link href="https://lusipad.com/2025/03/06/ktransform-2-3/"/>
    <id>https://lusipad.com/2025/03/06/ktransform-2-3/</id>
    <published>2025-03-06T15:31:10.000Z</published>
    <updated>2025-03-06T15:48:00.234Z</updated>
    
    <content type="html"><![CDATA[<h1 id="KTransformers-2-3-版本发布"><a href="#KTransformers-2-3-版本发布" class="headerlink" title="KTransformers 2.3 版本发布"></a>KTransformers 2.3 版本发布</h1><p>KTransfomer 2.3 版本发布了，主要是增加了对 unsloth 1.58&#x2F;2.51 bits 权重的支持以及更长的上下文支持。</p><p>详细的内容包括：</p><ol><li><p>低精度推理优化 #754<br>  新增 IQ1_S&#x2F;IQ2_XXS 量化乘法支持，现已兼容 Unsloth DeepSeek-R1 1.58bit&#x2F;2.51bit 动态量化权重<br>  使用 DeepSeek-R1 混合精度模型（IQ1+FP8）提高模型表现，实测单卡显存占用 19GB，系统内存占用 140GB。混合精度模型（IQ1+FP8）MMLU 评测83.6 分，略高于全精度版 DeepSeek-V3，更多测试正在进行中，详情见 <a href="https://github.com/kvcache-ai/ktransformers/blob/main/doc/en/benchmark.md">https://github.com/kvcache-ai/ktransformers/blob/main/doc/en/benchmark.md</a></p></li><li><p>长上下文处理增强 #750<br>  实现 chunked prefill<br>  在 24GB 显存环境下支持 DeepSeek-R1 处理最高 139K tokens 长上下文。介于DeepSeek最高只支持到128K上下文，我们的长上下文优化将告一段落。</p></li></ol><p>V0.2.4 预告：<br>下一个版本将是 0.2 系列的最后一个子版本，将会迎来 ktransformers 从“玩具”到“实用”最关键的一个更新 – 多并发支持。</p><p>0.2.4 预计在两周内发布，后续将推进 0.3 版本的开发和发布，预计包括 AMX 等提升更高性能的优化，以及 AMD、XPU、摩尔、沐曦、昇腾等更多的显卡种类支持。</p><p>在之前我验证过 671B 的 2.51bit 版本，相对来说是一个可以接受的版本。从成本来说，240GB 内存 + 14GB 显存也是一个可以接受的范围。这次进一步降低了入门门槛，打算找个时间好好验证下，成本减低所带来的性能变化到底有多少。（5000 块整一套满血版不是梦哈）</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;KTransformers-2-3-版本发布&quot;&gt;&lt;a href=&quot;#KTransformers-2-3-版本发布&quot; class=&quot;headerlink&quot; title=&quot;KTransformers 2.3 版本发布&quot;&gt;&lt;/a&gt;KTransformers 2.3</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="ktransformers" scheme="https://lusipad.com/tags/ktransformers/"/>
    
    <category term="deepseek" scheme="https://lusipad.com/tags/deepseek/"/>
    
  </entry>
  
  <entry>
    <title>使用AI开发数控系统记录</title>
    <link href="https://lusipad.com/2025/03/02/%E4%BD%BF%E7%94%A8AI%E5%BC%80%E5%8F%91%E6%95%B0%E6%8E%A7%E7%B3%BB%E7%BB%9F/"/>
    <id>https://lusipad.com/2025/03/02/%E4%BD%BF%E7%94%A8AI%E5%BC%80%E5%8F%91%E6%95%B0%E6%8E%A7%E7%B3%BB%E7%BB%9F/</id>
    <published>2025-03-01T17:00:04.000Z</published>
    <updated>2025-03-06T15:45:50.489Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用-AI-开发数控系统记录"><a href="#使用-AI-开发数控系统记录" class="headerlink" title="使用 AI 开发数控系统记录"></a>使用 AI 开发数控系统记录</h1><p>在过去的一周中，使用闲暇时间，使用 AI 从零开始开发一个数控系统。主要是为了验证下现有的 AI 对于复杂系统的开发，同时也记录了整个过程中所遇到的坑。</p><p> <img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250302015222450.png" alt="image-20250302015222450"></p><p>本次开发主要使用的 AI 工具为 Trae （字节出品，可免费使用 GPT4 和 Claude-3.5-Sonnet），Windsurf（15 刀的 Pro 版，包括 500 次 Chat 和 1500 次 Flow，不管是查看文件、执行命令还是改写代码都算一次 Flow，模型方面主要使用的是 Claude-3.7-sonnet）</p><p>前期用的 Trae，后期随着项目规模扩大，Trae 无法胜任后，换成了 WindSurf</p><p>在具体的开发中，也尽量按照：先计划、后开发；使用 TDD 的方式，测试和开发交替进行。</p><p>项目地址：<a href="https://github.com/lusipad/XXCNC">lusipad&#x2F;XXCNC: 一个用来验证一些想法的简单原型项目，主要由AI进行编写</a></p><h2 id="1-需求沟通"><a href="#1-需求沟通" class="headerlink" title="1. 需求沟通"></a>1. 需求沟通</h2><h3 id="1-1-确定高层需求"><a href="#1-1-确定高层需求" class="headerlink" title="1.1 确定高层需求"></a>1.1 确定高层需求</h3><p>第一步先和 AI 进行了详细的沟通，我提出了自己的诉求</p><blockquote><p>Me: 我想开发一个数控系统，我们来聊下应该怎么设计吧</p><p>AI：让我们来讨论数控系统的设计。数控系统是一个复杂的实时控制系统，需要考虑多个关键方面：</p><ol><li><p><strong>系统架构</strong></p><ul><li>实时控制层：负责底层运动控制、插补运算</li><li>逻辑控制层：处理 PLC 逻辑、IO 控制</li><li>应用层：用户界面、加工程序管理等</li></ul></li><li><p><strong>核心功能模块</strong></p><ul><li>运动控制模块<ul><li>轴控制</li><li>插补算法（直线、圆弧等）</li><li>加减速控制</li></ul></li><li>G代码解析器</li><li>刀具管理</li><li>工件坐标系统</li><li>人机界面（HMI）</li></ul></li><li><p><strong>技术选型建议</strong></p><ul><li>实时控制层：C&#x2F;C++（保证实时性）</li><li>逻辑控制：可以考虑 C++ 或工业控制专用语言</li><li>界面层：Qt&#x2F;WPF 等现代 GUI 框架</li></ul></li><li><p><strong>关键技术点</strong></p><ul><li>实时性保证</li><li>运动控制算法</li><li>安全机制</li><li>误差补偿</li></ul></li></ol><p>您想先从哪个方面开始深入讨论？或者您对某个具体模块有特别的需求或疑问吗？</p></blockquote><h3 id="1-2-确定技术栈、具体的功模块划分"><a href="#1-2-确定技术栈、具体的功模块划分" class="headerlink" title="1.2 确定技术栈、具体的功模块划分"></a>1.2 确定技术栈、具体的功模块划分</h3><blockquote><p>Me：技术方面我决定使用C++，所以模块我们如何划分</p><p>AI：基于C++开发数控系统，我建议按以下方式进行模块划分：</p><ol><li>核心控制模块（Core）</li><li>运动控制模块（Motion）</li><li>插补引擎模块（Interpolation）</li><li>G代码解析模块（GCode）</li><li>HMI界面模块（UI）</li><li>配置管理模块（Config）</li><li>诊断和日志模块（Diagnostic）<br>建议的项目结构：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">d:\Repos\XXCNC\<br>├── src/<br>│   ├── Core/           // 核心控制模块<br>│   ├── Motion/         // 运动控制模块<br>│   ├── Interpolation/  // 插补引擎模块<br>│   ├── GCode/         // G代码解析模块<br>│   ├── UI/            // 用户界面模块<br>│   ├── Config/        // 配置管理模块<br>│   └── Diagnostic/    // 诊断和日志模块<br>├── include/           // 公共头文件<br>├── lib/              // 第三方库<br>└── tests/            // 单元测试<br></code></pre></td></tr></table></figure><p>这种模块划分的优点：</p><ol><li>高内聚低耦合，每个模块职责明确</li><li>便于多人协作开发</li><li>便于单元测试</li><li>便于后期维护和扩展</li></ol><p>Me：可以的，但是界面我不想使用QT等方式，我想提供webserver给外部使用，只提供简</p><p>明白了，我们可以将UI模块改为WebServer模块，使用RESTful API提供服务。这样的设计更加轻量级且灵活。让我修改一下相关模块：</p><p>移除原来的UI模块，替换为WebServer模块：</p><p>修改后的项目结构：</p><p>主要API功能：</p><ol><li><p>系统控制</p><ul><li>GET &#x2F;api&#x2F;v1&#x2F;status - 获取系统状态</li><li>POST &#x2F;api&#x2F;v1&#x2F;emergency-stop - 紧急停止</li></ul></li><li><p>轴控制</p><ul><li>GET &#x2F;api&#x2F;v1&#x2F;axis&#x2F;{id}&#x2F;status - 获取指定轴状态</li><li>POST &#x2F;api&#x2F;v1&#x2F;axis&#x2F;{id}&#x2F;move - 控制指定轴移动</li><li>POST &#x2F;api&#x2F;v1&#x2F;axis&#x2F;{id}&#x2F;home - 指定轴回零</li></ul></li><li><p>程序控制</p><ul><li>POST &#x2F;api&#x2F;v1&#x2F;program&#x2F;upload - 上传G代码程序</li><li>POST &#x2F;api&#x2F;v1&#x2F;program&#x2F;start - 开始执行程序</li><li>POST &#x2F;api&#x2F;v1&#x2F;program&#x2F;pause - 暂停程序</li><li>POST &#x2F;api&#x2F;v1&#x2F;program&#x2F;stop - 停止程序</li></ul></li><li><p>配置管理</p><ul><li>GET &#x2F;api&#x2F;v1&#x2F;config - 获取系统配置</li><li>PUT &#x2F;api&#x2F;v1&#x2F;config - 更新系统配置<br>对于Web服务器的实现，我建议使用以下几个C++库之一：</li></ul></li><li><p>cpp-httplib - 轻量级HTTP服务器库</p></li><li><p>Crow - 现代C++ Web框架</p></li><li><p>Drogon - 高性能C++ Web应用框架<br>您觉得这个设计如何？我们可以进一步讨论具体的API设计或选择哪个Web框</p></li></ol></blockquote><h2 id="2-项目规划"><a href="#2-项目规划" class="headerlink" title="2. 项目规划"></a>2. 项目规划</h2><h3 id="2-1-项目计划"><a href="#2-1-项目计划" class="headerlink" title="2.1 项目计划"></a>2.1 项目计划</h3><p><strong>这一步非常重要，让 AI 将数据拆分成详细的内容，后续可以让他直接根据计划和代码实现情况，就可以继续工作了</strong></p><blockquote><p>Me：可以的，你可以把这些工作都拆分成具体的工作，整理一个多人开发的工作清单吗</p><p>AI：</p><p>好的，我来帮您整理一个多人开发的工作清单，按照功能模块和优先级划分：</p><h3 id="第一阶段：核心功能开发"><a href="#第一阶段：核心功能开发" class="headerlink" title="第一阶段：核心功能开发"></a>第一阶段：核心功能开发</h3><ol><li><p><strong>核心控制模块（Core Team）</strong></p><ul><li><input disabled="" type="checkbox"> 实现核心控制器框架</li><li><input disabled="" type="checkbox"> 开发实时任务调度系统</li><li><input disabled="" type="checkbox"> 实现系统状态管理</li><li><input disabled="" type="checkbox"> 开发紧急停止处理机制</li><li><input disabled="" type="checkbox"> 单元测试编写</li></ul></li><li><p><strong>运动控制模块（Motion Team）</strong></p><ul><li><input disabled="" type="checkbox"> 轴控制基础类实现</li><li><input disabled="" type="checkbox"> 加减速算法开发</li><li><input disabled="" type="checkbox"> 多轴协同控制</li><li><input disabled="" type="checkbox"> 回零功能实现</li><li><input disabled="" type="checkbox"> 单元测试编写</li></ul></li><li><p><strong>插补引擎模块（Algorithm Team）</strong></p><ul><li><input disabled="" type="checkbox"> 直线插补算法实现</li><li><input disabled="" type="checkbox"> 圆弧插补算法实现</li><li><input disabled="" type="checkbox"> 样条曲线插补实现</li><li><input disabled="" type="checkbox"> 前瞻算法开发</li><li><input disabled="" type="checkbox"> 算法性能优化</li><li><input disabled="" type="checkbox"> 单元测试编写</li></ul></li></ol><h3 id="第二阶段：功能扩展"><a href="#第二阶段：功能扩展" class="headerlink" title="第二阶段：功能扩展"></a>第二阶段：功能扩展</h3><ol start="4"><li><p><strong>G代码解析模块（Parser Team）</strong></p><ul><li><input disabled="" type="checkbox"> G代码词法分析器开发</li><li><input disabled="" type="checkbox"> G代码语法解析器开发</li><li><input disabled="" type="checkbox"> 指令转换系统实现</li><li><input disabled="" type="checkbox"> 支持自定义宏</li><li><input disabled="" type="checkbox"> 单元测试编写</li></ul></li><li><p><strong>Web服务器模块（Web Team）</strong></p><ul><li><input disabled="" type="checkbox"> HTTP服务器框架搭建</li><li><input disabled="" type="checkbox"> RESTful API设计和实现</li><li><input disabled="" type="checkbox"> WebSocket实时数据推送</li><li><input disabled="" type="checkbox"> API文档编写</li><li><input disabled="" type="checkbox"> 接口测试用例编写</li></ul></li><li><p><strong>配置管理模块（Config Team）</strong></p><ul><li><input disabled="" type="checkbox"> 配置文件格式设计</li><li><input disabled="" type="checkbox"> 配置读写实现</li><li><input disabled="" type="checkbox"> 配置验证机制</li><li><input disabled="" type="checkbox"> 配置热更新功能</li><li><input disabled="" type="checkbox"> 单元测试编写</li></ul></li></ol><h3 id="第三阶段：系统集成与优化"><a href="#第三阶段：系统集成与优化" class="headerlink" title="第三阶段：系统集成与优化"></a>第三阶段：系统集成与优化</h3><ol start="7"><li><p><strong>诊断和日志模块（Diagnostic Team）</strong></p><ul><li><input disabled="" type="checkbox"> 日志系统实现</li><li><input disabled="" type="checkbox"> 错误诊断功能</li><li><input disabled="" type="checkbox"> 性能监控系统</li><li><input disabled="" type="checkbox"> 数据统计功能</li><li><input disabled="" type="checkbox"> 单元测试编写</li></ul></li><li><p><strong>系统集成（Integration Team）</strong></p><ul><li><input disabled="" type="checkbox"> 模块间通信机制实现</li><li><input disabled="" type="checkbox"> 系统集成测试</li><li><input disabled="" type="checkbox"> 性能测试和优化</li><li><input disabled="" type="checkbox"> 内存泄漏检测</li><li><input disabled="" type="checkbox"> 系统稳定性测试</li></ul></li></ol><h3 id="第四阶段：文档和工具"><a href="#第四阶段：文档和工具" class="headerlink" title="第四阶段：文档和工具"></a>第四阶段：文档和工具</h3><ol start="9"><li><p><strong>文档团队（Documentation Team）</strong></p><ul><li><input disabled="" type="checkbox"> API文档编写</li><li><input disabled="" type="checkbox"> 系统架构文档</li><li><input disabled="" type="checkbox"> 开发指南编写</li><li><input disabled="" type="checkbox"> 用户手册编写</li><li><input disabled="" type="checkbox"> 示例代码编写</li></ul></li><li><p><strong>工具开发（Tools Team）</strong></p><ul><li><input disabled="" type="checkbox"> 调试工具开发</li><li><input disabled="" type="checkbox"> 性能分析工具</li><li><input disabled="" type="checkbox"> 日志分析工具</li><li><input disabled="" type="checkbox"> 配置工具开发</li><li><input disabled="" type="checkbox"> 测试工具开发</li></ul></li></ol><h3 id="建议的团队配置："><a href="#建议的团队配置：" class="headerlink" title="建议的团队配置："></a>建议的团队配置：</h3><ul><li>Core Team: 2-3人（高级开发工程师）</li><li>Motion Team: 2人（运动控制专家）</li><li>Algorithm Team: 2人（算法工程师）</li><li>Parser Team: 1-2人（编译原理专家）</li><li>Web Team: 2人（全栈开发工程师）</li><li>Config Team: 1人（开发工程师）</li><li>Diagnostic Team: 1-2人（开发工程师）</li><li>Integration Team: 2人（系统工程师）</li><li>Documentation Team: 1人（技术文档工程师）</li><li>Tools Team: 1-2人（开发工程师）</li></ul><p>总人力需求：15-19人</p><p>您觉得这个任务分配合理吗？我们可以根据实际情况调整团队规模和任务优先级。</p><p>Me：不过我打算都使用AI来完成，你觉得提供什么样的计划和Prompt给AI编写会给好用</p><p>AI：我来帮您设计一个基于AI辅助开发的计划，包括每个模块的Prompt设计思路：</p><h3 id="1-核心控制模块开发"><a href="#1-核心控制模块开发" class="headerlink" title="1. 核心控制模块开发"></a>1. 核心控制模块开发</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\core_module.md">开发步骤：<br>1. 框架设计<br>Prompt示例：<br>&quot;请设计一个实时数控系统的核心控制器类，需要包含以下功能：<br>- 实时任务调度<br>- 系统状态管理<br>- 紧急停止处理<br>- 与其他模块的通信接口<br>请提供详细的类设计和关键方法实现。&quot;<br><br>2. 实现细节<br>Prompt示例：<br>&quot;基于上述CoreController类设计，请实现实时任务调度系统，要求：<br>- 支持不同优先级的任务<br>- 确保关键任务的实时性<br>- 提供任务取消机制<br>- 包含完整的错误处理&quot;<br></code></pre></td></tr></table></figure><h3 id="2-运动控制模块开发"><a href="#2-运动控制模块开发" class="headerlink" title="2. 运动控制模块开发"></a>2. 运动控制模块开发</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\motion_module.md">开发步骤：<br>1. 基础类设计<br>Prompt示例：<br>&quot;设计一个数控系统的运动控制模块，需要：<br>- 支持多轴控制<br>- 实现加减速算法<br>- 位置和速度控制<br>- 提供轴状态监控<br>请提供类图和核心接口设计。&quot;<br><br>2. 算法实现<br>Prompt示例：<br>&quot;实现S形加减速算法，要求：<br>- 支持加加速度限制<br>- 平滑的速度曲线<br>- 考虑机械特性<br>- 提供参数调整接口&quot;<br></code></pre></td></tr></table></figure><h3 id="3-插补引擎模块开发"><a href="#3-插补引擎模块开发" class="headerlink" title="3. 插补引擎模块开发"></a>3. 插补引擎模块开发</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\interpolation_module.md">开发步骤：<br>1. 算法框架<br>Prompt示例：<br>&quot;设计一个支持多种插补方式的插补引擎，包括：<br>- 直线插补<br>- 圆弧插补<br>- 样条曲线插补<br>请提供算法框架和关键数据结构。&quot;<br><br>2. 具体算法<br>Prompt示例：<br>&quot;实现三次样条曲线插补算法，要求：<br>- 保证路径连续性<br>- 优化计算效率<br>- 考虑速度规划<br>- 提供误差控制&quot;<br></code></pre></td></tr></table></figure><h3 id="4-Web服务器模块开发"><a href="#4-Web服务器模块开发" class="headerlink" title="4. Web服务器模块开发"></a>4. Web服务器模块开发</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\webserver_module.md">开发步骤：<br>1. API设计<br>Prompt示例：<br>&quot;设计一个数控系统的RESTful API，需要包含：<br>- 系统状态查询<br>- 运动控制指令<br>- 程序文件管理<br>- 配置管理<br>请提供详细的API文档。&quot;<br><br>2. 实现细节<br>Prompt示例：<br>&quot;使用C++实现上述API中的运动控制接口，要求：<br>- 处理并发请求<br>- 实现实时数据推送<br>- 提供错误处理<br>- 支持认证授权&quot;<br></code></pre></td></tr></table></figure><h3 id="开发流程建议"><a href="#开发流程建议" class="headerlink" title="开发流程建议"></a>开发流程建议</h3><ol><li><p><strong>循序渐进</strong></p><ul><li>先让AI生成框架设计</li><li>审查并确认设计合理性</li><li>再让AI实现具体细节</li><li>最后进行集成测试</li></ul></li><li><p><strong>提示词技巧</strong></p><ul><li>明确指定输入输出格式</li><li>提供具体的性能要求</li><li>要求包含错误处理</li><li>要求提供测试用例</li></ul></li><li><p><strong>代码审查要点</strong></p><ul><li>检查实时性要求</li><li>验证错误处理</li><li>确认接口一致性</li><li>检查内存管理</li></ul></li><li><p><strong>迭代优化</strong></p><ul><li>收集实际运行数据</li><li>针对性能瓶颈优化</li><li>完善错误处理</li><li>改进代码结构</li></ul></li></ol><p>您觉得这个AI辅助开发计划如何？我们可以先从某个具体模块开始尝试。</p><p>Me：请帮我完整的整理下</p><p>AI：我来帮您整理一个完整的AI辅助开发计划：</p><h3 id="一、项目初始化"><a href="#一、项目初始化" class="headerlink" title="一、项目初始化"></a>一、项目初始化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_development_plan.md">1. 项目结构创建<br>- 生成基础目录结构<br>- 创建CMake配置文件<br>- 设置基础编译环境<br>- 配置单元测试框架<br><br>2. 基础类型定义<br>- 坐标系统<br>- 运动参数<br>- 错误代码<br>- 系统状态定义<br></code></pre></td></tr></table></figure><h3 id="二、核心模块开发序列"><a href="#二、核心模块开发序列" class="headerlink" title="二、核心模块开发序列"></a>二、核心模块开发序列</h3><h4 id="1-核心控制模块"><a href="#1-核心控制模块" class="headerlink" title="1. 核心控制模块"></a>1. 核心控制模块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\01_core_development.md">阶段1：基础框架<br>- CoreController 类设计<br>- 实时调度系统<br>- 状态管理系统<br>- 错误处理机制<br><br>阶段2：功能实现<br>- 任务队列管理<br>- 系统初始化流程<br>- 安全监控系统<br>- 模块间通信<br></code></pre></td></tr></table></figure><h4 id="2-运动控制模块"><a href="#2-运动控制模块" class="headerlink" title="2. 运动控制模块"></a>2. 运动控制模块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\02_motion_development.md">阶段1：基础功能<br>- Axis 类实现<br>- 运动参数管理<br>- 位置控制系统<br>- 速度控制系统<br><br>阶段2：高级功能<br>- 加减速算法<br>- 多轴协同<br>- 限位处理<br>- 回零功能<br></code></pre></td></tr></table></figure><h4 id="3-插补引擎模块"><a href="#3-插补引擎模块" class="headerlink" title="3. 插补引擎模块"></a>3. 插补引擎模块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\03_interpolation_development.md">阶段1：基础算法<br>- 直线插补<br>- 圆弧插补<br>- 基础速度规划<br>- 路径优化<br><br>阶段2：高级算法<br>- 样条曲线插补<br>- 前瞻算法<br>- 轨迹平滑<br>- 误差补偿<br></code></pre></td></tr></table></figure><h4 id="4-G代码解析模块"><a href="#4-G代码解析模块" class="headerlink" title="4. G代码解析模块"></a>4. G代码解析模块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\04_gcode_development.md">阶段1：解析器<br>- 词法分析器<br>- 语法分析器<br>- 指令解释器<br>- 参数处理<br><br>阶段2：执行系统<br>- 指令队列管理<br>- 宏指令处理<br>- 坐标系转换<br>- 刀具补偿<br></code></pre></td></tr></table></figure><h4 id="5-Web服务器模块"><a href="#5-Web服务器模块" class="headerlink" title="5. Web服务器模块"></a>5. Web服务器模块</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_tasks\05_webserver_development.md">阶段1：基础服务<br>- HTTP服务器<br>- REST API实现<br>- WebSocket服务<br>- 认证授权<br><br>阶段2：功能接口<br>- 状态监控API<br>- 控制指令API<br>- 文件管理API<br>- 配置管理API<br></code></pre></td></tr></table></figure><h3 id="三、开发流程指南"><a href="#三、开发流程指南" class="headerlink" title="三、开发流程指南"></a>三、开发流程指南</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_development_guide.md">1. 每个模块的开发流程：<br>   a. 设计阶段<br>   - 接口设计<br>   - 类结构设计<br>   - 算法设计<br>   - 错误处理设计<br><br>   b. 实现阶段<br>   - 核心功能实现<br>   - 单元测试编写<br>   - 性能优化<br>   - 文档生成<br><br>   c. 测试阶段<br>   - 单元测试<br>   - 集成测试<br>   - 性能测试<br>   - 稳定性测试<br><br>2. AI提示词模板：<br>   a. 设计提示：<br>   &quot;请设计[模块名称]，需要满足以下要求：<br>   - 功能需求：[具体功能]<br>   - 性能要求：[具体指标]<br>   - 接口要求：[接口规范]<br>   - 错误处理：[处理方式]<br>   请提供详细的类设计和关键方法定义。&quot;<br><br>   b. 实现提示：<br>   &quot;基于[类名]设计，请实现以下功能：<br>   - 具体功能：[功能描述]<br>   - 输入参数：[参数说明]<br>   - 输出要求：[输出规范]<br>   - 性能要求：[性能指标]<br>   请提供完整的代码实现和单元测试。&quot;<br><br>3. 代码审查重点：<br>   - 实时性保证<br>   - 内存管理<br>   - 错误处理<br>   - 代码规范<br>   - 性能优化<br>   - 接口一致性<br></code></pre></td></tr></table></figure><h3 id="四、测试计划"><a href="#四、测试计划" class="headerlink" title="四、测试计划"></a>四、测试计划</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext:d:\Repos\XXCNC\docs\ai_testing_plan.md">1. 单元测试<br>- 功能测试<br>- 边界测试<br>- 异常测试<br>- 性能测试<br><br>2. 集成测试<br>- 模块间通信<br>- 功能集成<br>- 性能验证<br>- 稳定性测试<br><br>3. 系统测试<br>- 完整功能测试<br>- 负载测试<br>- 长期稳定性测试<br>- 异常恢复测试<br></code></pre></td></tr></table></figure><p>您觉得这个计划如何？我们可以从任何一个模块开始实施。每个模块都可以进一步细化，根据实际需求调整开发顺序和优先级。</p></blockquote><h3 id="2-2-归档"><a href="#2-2-归档" class="headerlink" title="2.2 归档"></a>2.2 归档</h3><p>接下来就是让 AI 把内容归档到 plan.md，进行我们的开发工作</p><h2 id="3-开发工作"><a href="#3-开发工作" class="headerlink" title="3. 开发工作"></a>3. 开发工作</h2><h3 id="3-1-项目初始化"><a href="#3-1-项目初始化" class="headerlink" title="3.1 项目初始化"></a>3.1 项目初始化</h3><p>这个阶段先让 AI 进行了项目的构建和初始化，包括了 CMake 项目搭建，这部分完成的不错</p><blockquote><p>Me: 我们按照这个计划开始准备开发工作吧</p><p>AI：我会帮您开始项目的初始化工作。根据开发计划，我们首先需要创建基础的项目结构，包括设置CMake配置、编译环境和单元测试框架，然后定义基础类型如坐标系统和运动参数。完成初始化后，我们将按照计划开始核心控制模块的开发。</p><p>让我们先查看当前项目目录的结构，以确定需要创建哪些基础目录和文件。</p><p>XXCNC</p><p>根据项目计划，我们需要创建一个CMake项目结构。首先创建CMakeLists.txt作为主配置文件，设置项目基本信息和编译选项。</p><p>CMakeLists.txt</p><p>接下来创建src目录下的CMakeLists.txt文件，配置源代码的编译规则和依赖关系。</p><p>src\CMakeLists.txt</p><p>现在我们需要创建tests目录下的CMakeLists.txt文件，配置单元测试框架和测试用例的编译规则。</p><p>tests\CMakeLists.txt</p><p>现在我们需要创建基础的目录结构，包括src和tests目录下的各个模块子目录，以及一个.gitignore文件来排除不需要的文件。</p><p>让我们创建基础的目录结构，包括src和tests目录下的各个模块子目录。这些目录将用于存放源代码和测试文件。</p><p>src\core\README.md</p><p>接下来我们需要创建基础类型定义文件，包括坐标系统、运动参数、错误代码和系统状态定义。我们先创建一个基础类型的头文件。</p><p>src\include\xxcnc\types.h</p><p>已完成项目的初始化工作，主要包括：</p><ol><li><p>创建了基础的项目结构：</p><ul><li>配置了主CMakeLists.txt文件，设置了项目基本信息和编译选项</li><li>创建了src和tests目录的CMakeLists.txt，配置了源代码编译和测试框架</li><li>建立了核心模块的目录结构和说明文档</li></ul></li><li><p>定义了基础类型系统：</p><ul><li>在types.h中定义了基本数值类型</li><li>实现了坐标系统（Point结构）</li><li>定义了运动参数（MotionParameters结构）</li><li>创建了错误码系统（ErrorCode枚举）</li><li>定义了系统状态（SystemState枚举）</li></ul></li><li><p>设置了开发环境：</p><ul><li>配置了C++17标准</li><li>设置了严格的编译警告</li><li>集成了GTest测试框架</li><li>配置了安装和导出规则<br>项目初始化工作已经完成，现在可以开始进行核心模块的开发工作。</li></ul></li></ol></blockquote><blockquote><p>我会帮您配置和编译这个XXCNC项目。根据项目结构，我看到已经有基础的CMakeLists.txt文件和源代码目录，我将创建build目录，配置CMake项目并进行编译。编译过程将包括所有核心模块和测试用例。</p><p>首先创建build目录并进入该目录，然后使用CMake配置项目。</p><p>XXCNC 终端</p><p>mkdir build</p><p>现在我们使用CMake来配置项目，生成构建文件。</p><p>XXCNC 终端</p><p>cmake -B build -S .</p><p>我看到CMake配置失败了，这是因为缺少必要的源文件。让我先检查一下CMakeLists.txt文件的内容，以便了解项目的配置要求。</p><p>src\CMakeLists.txt</p><p>tests\CMakeLists.txt</p><p>CMakeLists.txt</p><p>根据CMake配置文件的要求，我们需要创建核心控制模块的基础文件。让我们先创建CoreController的实现文件。</p><p>src\core\CoreController.cpp</p><p>现在我们需要创建CoreController的头文件，定义基本的类接口和系统状态枚举。</p><p>src\include\xxcnc\core\CoreController.h</p><p>我们需要创建一个基本的测试文件来验证CoreController的功能，这样才能通过CMake的配置。</p><p>tests\core\CoreControllerTest.cpp</p><p>现在我们已经创建了必要的源文件，让我们重新运行CMake配置命令来生成构建文件。</p><p>XXCNC 终端</p><p>cmake -B build -S .</p><p>我们需要修改CMakeLists.txt文件，暂时只包含已经创建的源文件，移除尚未创建的文件。</p><p>src\CMakeLists.txt</p><p>我们还需要修改测试的CMakeLists.txt文件，只包含已经创建的测试文件。</p><p>tests\CMakeLists.txt</p><p>现在我们已经修改了CMake配置文件，让我们重新运行CMake配置命令，然后使用Visual Studio的构建工具进行编译。</p><p>XXCNC 终端</p><p>cmake -B build -S .</p><p>CMake配置文件中存在语法错误，需要修复src&#x2F;CMakeLists.txt文件中的格式问题。</p><p>src\CMakeLists.txt</p><p>现在我们已经修复了CMake配置文件中的语法错误，让我们重新运行CMake配置命令，然后使用Visual Studio的构建工具进行编译。</p><p>XXCNC 终端</p><p>cmake -B build -S .</p><p>需要继续修复src&#x2F;CMakeLists.txt文件中的语法错误，删除所有未使用的源文件引用。</p><p>src\CMakeLists.txt</p><p>现在我们已经完全修复了CMake配置文件，让我们重新运行CMake配置命令，然后使用Visual Studio的构建工具进行编译。</p><p>XXCNC 终端</p><p>cmake -B build -S .</p><p>需要修复tests&#x2F;CMakeLists.txt文件中的语法错误，删除所有未使用的测试文件引用。</p><p>tests\CMakeLists.txt</p><p>现在我们已经修复了所有CMake配置文件的问题，让我们重新运行CMake配置命令，然后使用Visual Studio的构建工具进行编译。</p><p>XXCNC 终端</p><p>cmake -B build -S .</p><p>CMake配置已经成功完成，现在让我们使用Visual Studio的MSBuild工具来编译项目。</p><p>XXCNC 终端</p><p>cmake –build build –config Release</p><p>编译失败的主要原因是文件编码问题，需要将源文件保存为UTF-8格式。我们需要修改CoreController.h文件的编码格式。</p><p>src\include\xxcnc\core\CoreController.h</p><p>需要修改CoreController.cpp文件的编码格式，将中文注释改为英文，以解决编码问题。</p><p>src\core\CoreController.cpp</p><p>现在我们已经修复了源文件的编码问题，让我们重新尝试编译项目。</p><p>XXCNC 终端</p><p>cmake –build build –config Release</p><p>成功完成了XXCNC项目的编译工作。主要完成了以下任务：</p><ol><li><p>创建并配置了基础的项目结构：</p><ul><li>创建了核心控制模块的源文件和头文件</li><li>实现了基本的CoreController类</li><li>添加了系统状态管理的基础功能</li></ul></li><li><p>配置了CMake构建系统：</p><ul><li>修复了CMakeLists.txt文件中的语法问题</li><li>正确配置了库目标和测试目标</li><li>设置了适当的包含目录和编译选项</li></ul></li><li><p>解决了编码问题：</p><ul><li>将源文件转换为UTF-8编码</li><li>修改了中文注释为英文注释</li></ul></li><li><p>成功编译了项目：</p><ul><li>生成了xxcnc静态库</li><li>编译了单元测试可执行文件<br>项目现在已经具备了基本的开发框架，可以继续进行功能开发。</li></ul></li></ol></blockquote><h3 id="3-2-添加三方库、单元测试"><a href="#3-2-添加三方库、单元测试" class="headerlink" title="3.2 添加三方库、单元测试"></a>3.2 添加三方库、单元测试</h3><p><strong>但是接下来他就碰到了第一座大山，不知道怎么使用 vcpkg，在尝试了七八次后无果，人工介入帮其进行安装</strong></p><h3 id="3-3-基础运动模型"><a href="#3-3-基础运动模型" class="headerlink" title="3.3 基础运动模型"></a>3.3 基础运动模型</h3><p>这部分开发很快，但是内容不多，只是一些简单的定义、状态切换以及日志和异常处理等</p><blockquote><p>已成功完成了核心控制模块的功能扩展：</p><ol><li><p>在CoreController中新增了两个重要功能：</p><ul><li>紧急停止（Emergency Stop）功能：可以在任何状态下触发，将系统置于紧急停止状态</li><li>回零（Homing）功能：在空闲状态下执行回零操作，完成后返回空闲状态</li></ul></li><li><p>更新了状态管理系统：</p><ul><li>在SystemState枚举中增加了HOMING和EMERGENCY_STOP状态</li><li>确保了状态转换的正确性和安全性</li></ul></li><li><p>完善了错误处理机制：</p><ul><li>为所有新增功能添加了异常捕获和处理</li><li>通过日志系统记录详细的错误信息</li></ul></li><li><p>添加了完整的单元测试：</p><ul><li>验证紧急停止在不同状态下的行为</li><li>测试回零操作在不同状态下的表现</li><li>确保状态转换的正确性</li></ul></li></ol></blockquote><blockquote><p>已完成运动控制模块中Axis类的基础功能实现：</p><ul><li><p>创建了Axis.h头文件，定义了以下关键组件：</p><ul><li>AxisState枚举类型，描述轴的运动状态</li><li>AxisParameters结构体，包含运动参数配置</li><li>Axis类的完整接口定义</li></ul></li><li><p>实现了Axis.cpp，完成了以下功能：</p><ul><li>基础运动控制（使能、禁用、停止）</li><li>位置控制系统（moveTo方法）</li><li>速度控制系统（moveVelocity方法）</li><li>回零功能（home方法）</li><li>实时状态更新（update方法）</li></ul></li><li><p>实现了关键的安全特性：</p><ul><li>软限位检查</li><li>速度和加速度限制</li><li>紧急停止功能</li><li>状态监控和错误处理</li></ul></li></ul></blockquote><h3 id="3-4-插补器开发"><a href="#3-4-插补器开发" class="headerlink" title="3.4 插补器开发"></a>3.4 插补器开发</h3><p>开发了一个插补器，经过了大约 20 轮左右的对话，包括且不限于以下问题：</p><ul><li>语法错误，编译通不过</li><li>编码错误</li><li>未定义的类、成员变量等</li></ul><p>然后开始单元测试，一些简单的 case 立刻就过了，卡在一些功能问题，经过了超过 30 轮对话，包括：</p><ul><li>插补器的退出条件错误，导致一直无法退出</li><li>性能条件写太随意，导致算法一直无法满足一直修改 （最终也没解决）</li></ul><blockquote><p>已完成插补引擎模块的基础算法实现，包括以下功能：</p><ul><li>创建了 InterpolationEngine 类，实现了基础的插补算法框架</li><li>实现了直线插补算法，支持三轴联动</li><li>实现了圆弧插补算法，支持顺时针和逆时针圆弧</li><li>实现了梯形速度规划，包含加速、匀速和减速三个阶段</li><li>实现了基于三点平滑的路径优化算法</li></ul><p>已完成插补引擎模块的单元测试补充工作，主要完成了以下内容：</p><ul><li>创建了 InterpolationEngineTest.cpp 测试文件</li><li>实现了基础的测试框架，包括 SetUp 和 TearDown 方法</li><li>添加了直线插补测试，验证基本功能和路径连续性</li><li>添加了圆弧插补测试，验证圆弧路径的正确性和半径一致性</li><li>实现了边界条件测试，包括零距离移动和极小距离移动的情况</li><li>添加了性能测试，验证算法的实时性和分段合理性</li><li>实现了错误处理测试，验证非法参数的异常处理<br>所有测试用例都遵循了项目的测试规范，覆盖了基本功能、边界条件、性能要求和错误处理等方面，确保了插补引擎模块的代码质量和功能正确性。</li></ul></blockquote><h3 id="3-5-运动功能进一步开发"><a href="#3-5-运动功能进一步开发" class="headerlink" title="3.5 运动功能进一步开发"></a>3.5 运动功能进一步开发</h3><p>这里进一步完善功能，此时出现了一个问题：他新写的测试用例没有添加到项目里，经过多次的修改，仍然未解决。其他功能均可在差不多 2~4 轮对话，测试失败后完成修复。</p><blockquote><p>本次开发完成了运动控制模块的基础功能实现，主要包括：</p><ul><li>创建了 MotionController 类，实现了多轴协同运动控制系统</li><li>实现了轴的基本控制功能，包括：<ul><li>轴的使能&#x2F;禁用</li><li>位置控制</li><li>速度控制</li><li>加速度控制</li><li>软限位保护</li><li>紧急停止功能</li></ul></li><li>实现了直线插补运动功能，支持：<ul><li>多轴协同运动</li><li>速度规划</li><li>加速度规划</li><li>实时状态更新<br>代码采用了面向对象的设计方法，通过类的继承和组合实现了功能的模块化和可扩展性。同时，代码中加入了完善的错误处理和状态管理机制，确保了运动控制的安全性和可靠性。</li></ul></li></ul></blockquote><h3 id="3-6-G代码解析"><a href="#3-6-G代码解析" class="headerlink" title="3.6 G代码解析"></a>3.6 G代码解析</h3><p>此处新增的功能未作验证，基本生成后就能通过编译</p><blockquote><p>已完成G代码执行系统的基础框架开发，主要包括：</p><ol><li><p>创建了GCodeExecutor类，实现了指令队列管理的核心功能：</p><ul><li>指令队列的添加和执行</li><li>暂停、恢复和停止功能</li><li>线程安全的队列操作</li><li>异步执行支持</li></ul></li><li><p>设计并实现了完整的G代码命令体系：</p><ul><li>定义了基础的GCodeCommand类</li><li>实现了多种具体命令类型：<ul><li>MotionCommand（运动指令）</li><li>ToolCommand（刀具指令）</li><li>CoordinateCommand（坐标系统指令）</li><li>MacroCommand（宏指令）</li></ul></li></ul></li><li><p>建立了命令参数体系：</p><ul><li>创建了基础的CommandParams结构</li><li>实现了各类具体参数结构：<ul><li>MotionParams（运动参数）</li><li>ToolParams（刀具参数）</li><li>CoordinateParams（坐标系统参数）</li><li>MacroParams（宏指令参数）<br>这些实现为后续的功能扩展（如宏指令处理、坐标系转换和刀具补偿）奠定了良好的基础。</li></ul></li></ul></li></ol></blockquote><h3 id="3-7-添加-web-功能"><a href="#3-7-添加-web-功能" class="headerlink" title="3.7 添加 web 功能"></a>3.7 添加 web 功能</h3><p>这里主要的难点是：CMake 集成三方库，多次失败后，人工调整添加（他名字写错了），整体对话大约 20 轮</p><blockquote><p>已完成Web服务器模块的基础功能实现：</p><ul><li>创建了Web服务器模块的基础目录结构</li><li>实现了WebServer类及其PIMPL实现类WebServerImpl</li><li>添加了基础HTTP REST API接口：<ul><li>&#x2F;api&#x2F;health：健康检查接口</li><li>&#x2F;api&#x2F;status：系统状态查询接口</li></ul></li><li>配置了CMake构建系统，包含必要的依赖项：<ul><li>cpp-httplib：HTTP服务器库</li><li>spdlog：日志记录</li><li>nlohmann-json：JSON处理<br>该模块现在具备了基本的Web服务功能，可以启动HTTP服务器并响应基本的API请求。后续可以根据需要扩展更多API接口，添加WebSocket支持，以及实现更复杂的功能。</li></ul></li></ul></blockquote><h3 id="3-8-前端页面开发-初版"><a href="#3-8-前端页面开发-初版" class="headerlink" title="3.8 前端页面开发-初版"></a>3.8 前端页面开发-初版</h3><p>这个是 AI 生成的第一版界面，只有按钮没有实际的动作</p><p>经过 20 轮左右的沟通，发现 Trae 中的 Claude-3.5 无法满足工作了，所以切换到了 windsurf 继续工作</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250302014405797.png" alt="image-20250302014405797"></p><p>让 windsurf 了解了项目的计划、当前的进度后，开始开发。</p><p>windsurf 的 Flow 是支持自己执行命令、查找文件等动作的，我直接全开了允许，让其进行自动工作。</p><blockquote><p>让我先查看一下项目中的web相关文件。</p><p>Searched for files ind:\Repos\XXCNC</p><p>4 results</p><p>让我检查一下web服务器相关的代码。</p><p>Searched codebase</p><p>255 results</p><p>让我查看一下前端页面的代码。</p><p>Analyzed</p><p>index.html:(1-200)</p><p>让我看看前端的JavaScript代码。</p><p>Analyzed</p><p>main.js:(1-200)</p><p>我发现了几个问题：</p><ol><li>前端代码中有一些按钮的ID与HTML中的不匹配：<ul><li>HTML中有 <code>start-btn</code>, <code>pause-btn</code>, <code>resume-btn</code>，但在JavaScript中使用的是 <code>btnPause</code>, <code>btnResume</code></li><li>HTML中没有 <code>btnUpload</code>，但JavaScript中尝试添加事件监听器</li><li>HTML中缺少 <code>speed</code> 元素，但JavaScript中尝试引用它</li></ul></li><li>一些DOM元素的ID不匹配：<ul><li>JavaScript中使用 <code>fileList</code>，但HTML中是 <code>file-list</code></li><li>JavaScript中使用 <code>speed</code>，但HTML中没有对应元素</li></ul></li><li>轨迹查看器的初始化代码有问题：<ul><li><code>script.onload</code> 中的 <code>script</code> 变量未定义</li><li>轨迹查看器的初始化应该在页面加载完成后进行</li></ul></li></ol><p>让我修复这些问题：</p><p>Edited</p><p>main.js</p><p>让我看看轨迹查看器的代码：</p><p>Analyzed</p><p>trajectory-viewer.js:(1-200)</p><p>我发现轨迹查看器也有一些问题：</p><ol><li>Three.js库的引入方式不合适，应该在HTML中通过CDN引入</li><li>轨迹查看器的初始化代码有问题，不应该在script.onload中定义类</li><li>视图控制按钮的事件监听器绑定到了不存在的元素上</li></ol><p>让我先修改HTML文件，添加Three.js库和视图控制按钮：</p><p>Edited</p><p>index.html</p><p>现在让我修改轨迹查看器的代码：</p><p>Edited</p><p>trajectory-viewer.js</p><p>我已经修复了前端代码中的主要问题：</p><ol><li>修复了HTML和JavaScript代码中的DOM元素ID不匹配问题</li><li>改进了轨迹查看器的初始化和事件绑定</li><li>添加了视图控制按钮</li><li>优化了代码结构和错误处理</li></ol><p>主要改进包括：</p><ol><li>在HTML中：<ul><li>通过CDN引入Three.js和OrbitControls库</li></ul></li></ol><ul><li>添加了轨迹查看器的视图控制按钮</li><li>修正了一些元素的ID</li></ul><ol start="2"><li>在main.js中：<ul><li>修正了DOM元素的选择器</li><li>将所有事件监听器移到页面加载完成后再绑定</li><li>改进了状态更新和文件上传的逻辑</li><li>优化了错误处理</li></ul></li><li>在trajectory-viewer.js中：<ul><li>移除了动态加载Three.js的代码</li></ul></li></ol><ul><li>改进了类的初始化方式，通过参数传入canvas ID</li><li>添加了更多的错误检查</li><li>使用ResizeObserver来处理视图大小变化</li><li>改进了轨迹点的添加和清除逻辑</li></ul><p>现在让我检查一下后端代码：</p><p>Searched codebase</p><p>70 results</p><p>让我看看WebServer的实现：</p><p>Searched codebase</p><p>8 results</p><p>让我看看WebServer的头文件：</p><p>Searched for files ind:\Repos\XXCNC</p><p>2 results</p><p>让我看看WebServer的头文件内容：</p><p>Analyzed</p><p>WebServer.h:(1-200)</p><p>让我看看WebServer的实现文件：</p><p>Searched for files ind:\Repos\XXCNC</p><p>1 result</p><p>Analyzed</p><p>WebServer.cpp:(1-200)</p><p>通过查看代码，我发现了几个问题：</p><ol><li>WebServer的构造函数有两个版本，但在<code>main.cpp</code>中使用的是无参版本，这意味着没有提供WebAPI实现。</li><li>WebServer的配置在启动时没有完全设置：<ul><li>没有设置<code>enable_cors</code></li></ul></li></ol><ul><li>没有正确设置<code>static_dir</code>的完整路径</li></ul><ol start="3"><li>回调函数没有完全实现：</li></ol><ul><li>状态回调只返回了基本的位置信息，没有包含进给速度和其他状态</li><li>命令回调缺少了一些重要命令的处理（如start、pause、resume等）</li><li>文件上传回调没有处理轨迹信息的生成</li></ul><p>让我修复这些问题。首先修改main.cpp：</p><p>Edited</p><p>main.cpp</p><p>让我修改SystemStatus类，添加更多状态字段：</p><p>Edited</p><p>main.cpp</p><p>现在我已经修复了主要的问题：</p><ol><li>前端修复：</li></ol><ul><li>修正了DOM元素ID的不匹配</li><li>改进了事件监听器的绑定</li><li>优化了轨迹查看器的初始化和渲染</li><li>添加了视图控制按钮</li></ul><ol start="2"><li>后端修复：<ul><li>完善了服务器配置，使用绝对路径和启用CORS</li></ul></li></ol><ul><li>添加了更多的系统状态信息</li><li>实现了所有必要的命令处理（start、stop、pause、resume、home、setFeedRate）</li><li>添加了文件上传后的轨迹生成</li></ul><ol start="3"><li>其他改进：</li></ol><ul><li>添加了更好的错误处理</li><li>改进了状态更新的逻辑</li><li>优化了代码结构</li></ul><p>现在web界面的功能应该可以正常工作了。如果你遇到任何问题，请告诉我。</p></blockquote><p>消耗了大概 300 Flow 后，完成了文件上传、模拟轨迹绘制功能</p><h3 id="3-9-界面调整"><a href="#3-9-界面调整" class="headerlink" title="3.9 界面调整"></a>3.9 界面调整</h3><p>由于第一版的界面太简陋，所以找了一个 CNC 界面让其进行模仿，这个是修改后的结果：</p><p>引入了 Three 进行三维轨迹绘制，调整了界面中按钮、布局等内容（功能都是空的）</p><p>实测可以生成输入的刀路的轨迹，这里是颇为惊喜的</p><p>此处主要花了很多时间在反复的调试效果，大概消耗了 300 Flow</p><p><img src="http://raw.gitmirror.com/lusipad/imgur/main/img/image-20250302015222450.png" alt="image-20250302015222450"></p><h3 id="3-10-文件上传"><a href="#3-10-文件上传" class="headerlink" title="3.10 文件上传"></a>3.10 文件上传</h3><p>接下里就开始不给力了，一个文件上传功能，在主页中反复失败，不管怎么调整都没用；但是让他在一个单独页面做就没有问题。<strong>主页已经很大了，看来 AI 在处理大型的情况，能力下降了</strong></p><p>最终 AI 通过重写主页来解决了这个问题。</p><p>但是后面调整其他功能的时候，也出现了该功能失灵时不灵的情况！</p><p>反复处理，消耗了大概 300 Flow</p><h3 id="3-11-状态显示"><a href="#3-11-状态显示" class="headerlink" title="3.11 状态显示"></a>3.11 状态显示</h3><p>此时界面显示的状态都不是实时的，所以需要让其和 C++ 后端联系起来。</p><p>此处大概消耗了 300 Flow，但是还是没完成（中间版本的时候可用，后续又被其改坏了）</p><h3 id="3-12-真实轨迹绘制"><a href="#3-12-真实轨迹绘制" class="headerlink" title="3.12 真实轨迹绘制"></a>3.12 真实轨迹绘制</h3><p>之前项目中的轨迹是假的，是由 C++ 后端生成的假数据，此时计划接入到真实的解析、规划、插补来绘制轨迹。</p><p>在经过 N 轮沟通，消耗了超过 500 Flow 后，仍然没有能够绘制出轨迹。由于 Pro 会员的已经用完了，暂时告一段落，先将进度记录下来。</p><h2 id="4-小结"><a href="#4-小结" class="headerlink" title="4. 小结"></a>4. 小结</h2><p>虽然本次开发最终未能达到期望的效果，但是对于 AI 的能力边界有了一个初步的认知：模块级别。从验证的结果来看，大部分单模块的开发都可以做得比较好，而跨模块或者上下文变长，就很难处理，反复验证也是失败告终。所以我们在使用 AI 进行项目开发的时候，还是以逐步分解，将其限制到模块级更加合适。</p><p>个人主观打分的话：</p><ul><li>需求分析能力 9</li><li>项目规划能力 8</li><li>工程能力 6<ul><li>CMake 项目构建和使用 5</li><li>web 项目 8</li></ul></li><li>开发能力 8<ul><li>C++ 模块开发 8</li><li>C++ 单元测试 7</li><li>小型 web 开发 10</li><li>大型 web 开发 6</li></ul></li><li>调试能力<ul><li>Lint 处理 10</li><li>编译错误处理 9</li><li>功能调试 3</li></ul></li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;使用-AI-开发数控系统记录&quot;&gt;&lt;a href=&quot;#使用-AI-开发数控系统记录&quot; class=&quot;headerlink&quot; title=&quot;使用 AI 开发数控系统记录&quot;&gt;&lt;/a&gt;使用 AI 开发数控系统记录&lt;/h1&gt;&lt;p&gt;在过去的一周中，使用闲暇时间，使用 AI</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
    <category term="C++" scheme="https://lusipad.com/tags/C/"/>
    
    <category term="前端" scheme="https://lusipad.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="web" scheme="https://lusipad.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Trae 新版本来了，支持 claude-3.7</title>
    <link href="https://lusipad.com/2025/03/01/trae-support-claude-3-7/"/>
    <id>https://lusipad.com/2025/03/01/trae-support-claude-3-7/</id>
    <published>2025-03-01T15:52:37.000Z</published>
    <updated>2025-03-01T16:14:41.149Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Trae-新版本来了，支持-claude-3-7"><a href="#Trae-新版本来了，支持-claude-3-7" class="headerlink" title="Trae 新版本来了，支持 claude-3.7"></a>Trae 新版本来了，支持 claude-3.7</h1><p><img src="https://raw.githubusercontent.com/lusipad/imgur/main/img/image-20250301235307890.png" alt="image-20250301235307890"></p><p>现在模型只能选择 claude 的了，之前版本还有 GPT-4O 的..</p><p><img src="https://raw.githubusercontent.com/lusipad/imgur/main/img/image-20250301235432739.png" alt="image-20250301235432739"></p><p>但是实测下来，同样的模型，就是不如 windsurf，更遑论 cursor 了。</p><p><img src="https://raw.githubusercontent.com/lusipad/imgur/main/img/image-20250302000115418.png" alt="image-20250302000115418"></p><p>而且还时不时需要排队。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Trae-新版本来了，支持-claude-3-7&quot;&gt;&lt;a href=&quot;#Trae-新版本来了，支持-claude-3-7&quot; class=&quot;headerlink&quot; title=&quot;Trae 新版本来了，支持 claude-3.7&quot;&gt;&lt;/a&gt;Trae 新版本来了，支持</summary>
        
      
    
    
    
    
    <category term="AI" scheme="https://lusipad.com/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>WSL 编译 linuxcnc (Debian / Ubuntu)</title>
    <link href="https://lusipad.com/2024/03/14/install-linuxcnc-in-wsl/"/>
    <id>https://lusipad.com/2024/03/14/install-linuxcnc-in-wsl/</id>
    <published>2024-03-14T13:36:23.000Z</published>
    <updated>2025-03-09T00:45:22.872Z</updated>
    
    <content type="html"><![CDATA[<h1 id="WSL-编译-linuxcnc-Debian-Ubuntu"><a href="#WSL-编译-linuxcnc-Debian-Ubuntu" class="headerlink" title="WSL 编译 linuxcnc (Debian &#x2F; Ubuntu)"></a>WSL 编译 linuxcnc (Debian &#x2F; Ubuntu)</h1><p>验证下来 Debian 和 Ubuntu 都可以使用 (未开启实时补丁的情况下，会在非实时环境运行), 但是 GUI 部分，Ubuntu 和 WSL 的集成度更高。</p><p><strong>如果只是简单的使用和调试，个人推荐使用 Ubuntu</strong></p><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a><strong>操作步骤</strong></h2><ol><li><p>开启 WSL</p><p> 控制面板 - 程序和功能 - 启用或关闭 Windows 功能 - 适用于 Linux 的 Windows 子系统</p><p> 在 Windows 11 中，默认就是 WSL2, 所以下文都是基于 WSL2 的</p><p> 记得在 Powershell 中先更新下 wsl</p> <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">wsl <span class="hljs-literal">--update</span><br>wsl <span class="hljs-literal">--shutdown</span><br></code></pre></td></tr></table></figure></li><li><p>安装 debian 或者 Ubuntu</p><p> 在 microsoft store 里下载和安装 debian 或者 Ubuntu</p></li><li><p>换源</p><p> <strong>Ubuntu 可以不用换，默认源速度也还可以</strong></p><p> debian 默认使用的是欧洲的一个 CDN, 所以速度特别慢，直接换下镜像源</p><p> 修改方法：</p><p> <code>sudo vi /etc/apt/sources.list</code></p><p> 将内容修改为</p> <figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">deb http:<span class="hljs-regexp">//mi</span>rror.nju.edu.cn/debian bookworm main<br>deb http:<span class="hljs-regexp">//mi</span>rror.nju.edu.cn/debian bookworm-updates main<br>deb http:<span class="hljs-regexp">//mi</span>rror.nju.edu.cn/debian-security bookworm-security main<br>deb http:<span class="hljs-regexp">//mi</span>rror.nju.edu.cn/debian bookworm-backports main<br></code></pre></td></tr></table></figure><blockquote><p>[Tips]</p><p>debian 里的 vi 是个不完整的，所以输入上下之类的会有 ^B 这种转义符，</p><p>所以可以考虑直接 dd 全删了，然后 i 再复制上去，:wq 保存</p></blockquote><p> source 下，或者直接重启下 debian 生效</p></li><li><p>获取 linuxcnc 的源码和编译</p> <figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vim">sudo apt-<span class="hljs-built_in">get</span> <span class="hljs-keyword">update</span><br>sudo apt-<span class="hljs-built_in">get</span> install git<br>sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python3</span><br>sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python3</span>-gi<br>sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python3</span>-gi-cairo<br>sudo apt-<span class="hljs-built_in">get</span> install <span class="hljs-keyword">python3</span>-pip<br><br>git clone https://github.<span class="hljs-keyword">com</span>/LinuxCNC/linuxcnc.git linuxcnc-dev<br><span class="hljs-keyword">cd</span> linuxcnc-dev<br>./debian/configure<br>sudo apt-<span class="hljs-built_in">get</span> build-dep .<br><br><span class="hljs-keyword">cd</span> src<br>./autogen.<span class="hljs-keyword">sh</span><br>./configure --with-realtime=uspace<br><span class="hljs-keyword">make</span><br>sudo <span class="hljs-keyword">make</span> setuid<br></code></pre></td></tr></table></figure><p> 如果网络顺畅，整个过程大概在 20~30 分钟</p><blockquote><p>[Tips]</p><p>如果网络不顺畅，比如从 github 拉源码一直失败，可以考虑挂代理</p><p>以 Clash for windows 为例，</p><ol><li>在 windows 本机开启 Allow Lan</li><li>在 debian 使用 <code>cat /etc/resolv.conf</code> 查看 dns</li><li>在 debian 设置代理</li></ol><p><code>export ALL_PROXY=&quot;http://172.24.176.1:7890&quot;</code></p></blockquote></li><li><p>运行 linuxcnc</p><p> 安装 python 界面库的依赖</p> <figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[Debian]</span> pip install pyopengl --<span class="hljs-keyword">break</span>-system-packages<br><span class="hljs-string">[Ubuntu]</span> pip install pyopengl<br></code></pre></td></tr></table></figure><p> 启动 linux cnc</p> <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">source</span> ..<span class="hljs-regexp">/scripts/</span>rip-environment<br>linuxcnc<br></code></pre></td></tr></table></figure><p> 这个时候就会启动带界面的 linuxcnc</p></li></ol><p><img src="http://raw.githubusercontent.com/lusipad/imgur/main/img/image.png" alt="linux_cnc"></p><p><strong>对于 Ubuntu, 已经可以正常使用了.</strong></p><p><strong>但是 Debian, 会出现界面花屏的情况.</strong></p><h3 id="使用-XLanuch-仅针对-Debian"><a href="#使用-XLanuch-仅针对-Debian" class="headerlink" title="使用 XLanuch (仅针对 Debian)"></a><strong>使用 XLanuch (仅针对 Debian)</strong></h3><ol><li><p>在 windows 下载和安装 <a href="https://github.com/marchaesen/vcxsrv/releases/tag/21.1.10">Release 21.1.10 · marchaesen&#x2F;vcxsrv (github.com)</a></p></li><li><p>开启 XLaunch</p></li><li><p>在 debian 启动 linuxcnc</p><p> <code>linuxcnc</code></p><p> 就会弹出 linuxcnc 的 GUI 界面</p></li></ol><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a><strong>参考资料</strong></h2><ol><li><a href="https://linuxcnc.org/docs/html/code/building-linuxcnc.html">Building LinuxCNC</a></li></ol>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;WSL-编译-linuxcnc-Debian-Ubuntu&quot;&gt;&lt;a href=&quot;#WSL-编译-linuxcnc-Debian-Ubuntu&quot; class=&quot;headerlink&quot; title=&quot;WSL 编译 linuxcnc (Debian &amp;#x2F;</summary>
        
      
    
    
    
    
    <category term="数控" scheme="https://lusipad.com/tags/%E6%95%B0%E6%8E%A7/"/>
    
    <category term="linuxcnc" scheme="https://lusipad.com/tags/linuxcnc/"/>
    
    <category term="wsl" scheme="https://lusipad.com/tags/wsl/"/>
    
  </entry>
  
  <entry>
    <title>又到一年年底时</title>
    <link href="https://lusipad.com/2023/12/17/end-of-year-2023/"/>
    <id>https://lusipad.com/2023/12/17/end-of-year-2023/</id>
    <published>2023-12-17T07:29:13.000Z</published>
    <updated>2023-12-17T10:31:12.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="又要一年年底时"><a href="#又要一年年底时" class="headerlink" title="又要一年年底时"></a>又要一年年底时</h1><p>前几天还是二十多度的气温, 一夜之间就掉到了零下, 冬天来得悄无声息.</p><p>原本还想着周末去公司看看代码 Review, 被这天气直接劝退了, 被窝兽太强, 我被打得节节败退.</p><p>又到了一年年底总结的时候.</p><ul><li><p>项目总结</p><p>维护项目今年整体在计划内, 维护得也还行;</p><p>新项目有点方案和目标上的不确定, 所以导致了反复的摇摆, 在方案和进度上都不是特别有效.</p></li><li><p>技术能力提升</p><p>技术能力方面, 在架构上是有所进步的, 主要一个转变是看待问题的思路有了变化, 更多的是将”一次性做完美”变成了”渐进明细, 多次迭代”的思路, 并且将大目标先提前达成一致</p><p>在具体的开发技术上, 没有太大的进步, 甚至我觉得有点退步. 新技术, 合适的方法论</p></li><li><p>团队合作</p></li><li><p>解决问题的能力</p></li><li><p>自我管理</p></li><li><p>反思和反馈</p></li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;又要一年年底时&quot;&gt;&lt;a href=&quot;#又要一年年底时&quot; class=&quot;headerlink&quot; title=&quot;又要一年年底时&quot;&gt;&lt;/a&gt;又要一年年底时&lt;/h1&gt;&lt;p&gt;前几天还是二十多度的气温, 一夜之间就掉到了零下,</summary>
        
      
    
    
    
    
    <category term="随笔" scheme="https://lusipad.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>C++ 的一些面试的想法</title>
    <link href="https://lusipad.com/2023/11/28/CppInterview/"/>
    <id>https://lusipad.com/2023/11/28/CppInterview/</id>
    <published>2023-11-28T13:48:24.000Z</published>
    <updated>2023-11-28T14:01:43.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="C-的一些面试的想法"><a href="#C-的一些面试的想法" class="headerlink" title="C++ 的一些面试的想法"></a>C++ 的一些面试的想法</h1><p>因为本身面试 C++ 的开发也蛮多了, 所以很多时候, 我觉得人和人之间的差异还是非常大的.</p><p>比较典型的有几种:</p><ul><li>混日子, 用了 N 年的 C++, 深度也没有, 广度也没有, 就像了修楼修了十年还是但是只会搬个砖和个水泥, 其他啥都不知道也不去了解, 干了十年就和三年水平没啥区别</li><li>只限于用, 对常用的库, 一些语言的细节都比较了解了, 但是应用起来就像是乡下的土法堆房, 不搭地基, 不搞设计, 主打一个莽字, 盖个三楼可以盖个三十楼必塌</li><li>有思考, 有的人靠”顿悟”, 有的人靠触类旁通, 有的人靠系统学习, 但是到了这一步, 就会明白造房子是目的, 设计是搭框架打地基, 语言是实现的细节, 但是真正行动的时候, 要么想太多, 要么想太少, 往往会在缺乏设计和过度设计中反复横跳</li><li>知行合一, 思考, 技术, 眼界能匹配上</li></ul><p>我觉得大抵就以上几种会比较多一些, 大家也都是过来人, 如果不去主动思考, 随波逐流的话, 很多人就止步于 2&#x2F;3 了. 对我而言, 需要的队友:</p><ul><li>结果能力 (只有落地的才是有价值的, 不管经历再完美, 没有将个人能力体现, 也是白搭)</li><li>自我管理 (只有自驱的人才能真正的成长起来)</li><li>学习能力 (能够适应变化, 能够迁移自己的能力和优势)</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;C-的一些面试的想法&quot;&gt;&lt;a href=&quot;#C-的一些面试的想法&quot; class=&quot;headerlink&quot; title=&quot;C++ 的一些面试的想法&quot;&gt;&lt;/a&gt;C++ 的一些面试的想法&lt;/h1&gt;&lt;p&gt;因为本身面试 C++ 的开发也蛮多了, 所以很多时候,</summary>
        
      
    
    
    
    
    <category term="C++" scheme="https://lusipad.com/tags/C/"/>
    
    <category term="面试" scheme="https://lusipad.com/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>CppRoadmap</title>
    <link href="https://lusipad.com/2023/11/28/CppRoadmap/"/>
    <id>https://lusipad.com/2023/11/28/CppRoadmap/</id>
    <published>2023-11-28T12:50:49.000Z</published>
    <updated>2023-11-28T14:02:31.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="C-Roadmap"><a href="#C-Roadmap" class="headerlink" title="C++ Roadmap"></a>C++ Roadmap</h1><p>在今年 3 月份的时候, 为了 给组内做一个 C++ 的教学, 所以我翻了许多的资料, 后来觉得 <a href="https://github.com/salmer/CppDeveloperRoadmap">salmer&#x2F;CppDeveloperRoadmap</a> 这个开源项目深得我心, 所以将其翻译成了中文, 并且相关的 commit 都已经 merge 到该项目了. (消失了小半年了, 还欠着人家一个 CN 的思维导图没画, 我有罪 233333)</p><p>现在回过头来, 我觉得自己这些年也比较懈怠了, 所以想要在后续的时间内, 将这一些 Point 都真正的展开起来, 并且将其和自己的工作能够结合起来, 而避免只是停留在喊喊口号上, 真正能够做到知行合一.</p><p>加油!</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;C-Roadmap&quot;&gt;&lt;a href=&quot;#C-Roadmap&quot; class=&quot;headerlink&quot; title=&quot;C++ Roadmap&quot;&gt;&lt;/a&gt;C++ Roadmap&lt;/h1&gt;&lt;p&gt;在今年 3 月份的时候, 为了 给组内做一个 C++ 的教学,</summary>
        
      
    
    
    
    
    <category term="C++" scheme="https://lusipad.com/tags/C/"/>
    
    <category term="学习" scheme="https://lusipad.com/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>2023 工博会</title>
    <link href="https://lusipad.com/2023/10/06/2023-ciff-expo/"/>
    <id>https://lusipad.com/2023/10/06/2023-ciff-expo/</id>
    <published>2023-10-06T07:41:26.000Z</published>
    <updated>2024-12-14T01:14:08.779Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2023-工博会-草稿"><a href="#2023-工博会-草稿" class="headerlink" title="2023 工博会 (草稿)"></a>2023 工博会 (草稿)</h1><p>本次工博会, 还是本着 CNC 和 PLC 去看的, 了解下行业的发展趋势, 以及了解下一些竞品的发展情况.</p><blockquote><p>以“聚焦数字化转型· 共建产业新生态”为主题，以“5G+ 工业互联网”、“工业软件&amp; 操作系统”及“数字化供应链”领域为3 个发展重点，同步关注“工业元宇宙”、“集成电路”、“新一代存储”等3 个热议话题，推动量子信息、5G、物联网、边缘计算、数字孪生、AI、标识解析、增材制造等前沿科技与泛制造业生态融合，推动行业企业与合作伙伴共赢，通过展览展示、高峰论坛、精准对接、媒体访谈、直播互动等形式，探索“数字工业可持续发展”为目标的国家级国际化的展会生态。</p></blockquote><p>这个是工博会官方的本次宣传主题, 会上也是包含了很多的内容, 包括了自动化&#x2F;机床&#x2F;新能源等不同的版块, 其中最热门的还是自动化和机器人, 包括西门子, Beckhoff, Fanuc 等一众大厂都有展台.</p><p>由于没有太多准备, 所以只能走马观花看下, 记个流水账了.</p><p>自动化展, 我感觉主要的发力点都在物联网, 边缘计算, 行业解决方案为主.</p><h2 id="西门子"><a href="#西门子" class="headerlink" title="西门子"></a>西门子</h2><p>西门子今年拿出来主推的, 是他们家的 <a href="https://www.siemens.com/cn/zh/products/xcelerator.html">Xcelerator开放式数字商业平台</a>, 包括了三个部分</p><ul><li><p>业务组合</p><p>基于标准 API 构建的软件, 服务以及物联网硬件的精选模块化业务组合</p></li><li><p>生态系统</p><p><strong>不断发展</strong>的认证合作伙伴生态体系，从科技巨头到独立的软件供应商。</p></li><li><p>MarketPlace</p><p><strong>不断发展</strong>的认证合作伙伴生态体系，从科技巨头到独立的软件供应商。</p></li></ul><p>这个应该就是今年他们进博会上展示的, <strong>定制开发</strong>的解决方案了.</p><p>在现场有展示了十来个基于 xcelerator 的应用场景和解决方案, 包括电力, 楼宇, 医疗等不同的行业, 和现场的工作人员聊了下, 大概目前 80% 的还是他们自己做的, 有 20% 的是合作厂商做的(一些合作的都是十人以内的小团队)</p><p>主要面向的是 <strong>Low Code</strong> 开发的, 我觉得后面需要好好分析下他们的一个解决思路.</p><h2 id="Fanuc"><a href="#Fanuc" class="headerlink" title="Fanuc"></a>Fanuc</h2><p>Fanuc 作为老牌的数控厂商, 这次还是照例带着他们家的机器人来参展了, 这块不是很懂, 所以也看不出个所以然来.</p><p>还有北京 Fanuc 搞了一套激光行业的数控定制, 可能需要分析下是不是有什么新的亮点了.</p><h2 id="rexroth"><a href="#rexroth" class="headerlink" title="rexroth"></a>rexroth</h2><p>是博世(bosch) 的控制厂商, 他们家展示的也是解决方案.</p><p>不过从我的角度来看, 就是他们自己搞了一套类似 PLC 的功能控制, 然后在此基础上做了一些 App, 带了一些花里胡哨的界面.</p><h2 id="倍加福"><a href="#倍加福" class="headerlink" title="倍加福"></a>倍加福</h2><p>各种传感器+解决方案</p><h2 id="Phoenix"><a href="#Phoenix" class="headerlink" title="Phoenix"></a>Phoenix</h2><p>老牌的 PLC 厂商了, 这次主要是给行业解决方案展示的, 包括 pcb, 汽车, 光储, 供电.. 甚至现场还卖起了无线充电宝.</p><p>同时带来了他们之前收购的 PLCNext, 基于容器的 PLC 控制系统, 可以在 windows 上使用, 不过不清楚性能如何了. 这个后面要好好分析下.</p><h2 id="布加莱"><a href="#布加莱" class="headerlink" title="布加莱"></a>布加莱</h2><p>精准自动化 安全 高速相机 工厂自动化 (管控监维)</p><h2 id="欧姆龙"><a href="#欧姆龙" class="headerlink" title="欧姆龙"></a>欧姆龙</h2><p>人力协作 高速检测 </p><h2 id="松下"><a href="#松下" class="headerlink" title="松下"></a>松下</h2><p>主要展示了一些 CNC, PLC 的解决方案, 看上去没有特别强的竞争力.</p><h2 id="施耐德"><a href="#施耐德" class="headerlink" title="施耐德"></a>施耐德</h2><p>主要是电气为主, 没有介绍他们家的 PLC.</p><h2 id="三菱"><a href="#三菱" class="headerlink" title="三菱"></a>三菱</h2><p>主要是电机介绍, 也没有介绍他们家的 CNC.</p><h2 id="汇川"><a href="#汇川" class="headerlink" title="汇川"></a>汇川</h2><p>这次野心很大, 安全, 边缘, 视觉, 机器人都带出来了</p><h2 id="台达"><a href="#台达" class="headerlink" title="台达"></a>台达</h2><p>台达这次带来了他们的 CNC, 虽然目前来看还落后于业界, 功能也比较少, 但是这显然是一个不会的信号</p><p>一些国内的</p><h2 id="繁易"><a href="#繁易" class="headerlink" title="繁易"></a>繁易</h2><p>plc控制</p><h2 id="零点"><a href="#零点" class="headerlink" title="零点"></a>零点</h2><p>带了一套 61499 的 PLC 解决方案, 不过和他们聊下来, 这个西门子有, 但是国内主流厂商用的不多</p><h2 id="雷赛科技"><a href="#雷赛科技" class="headerlink" title="雷赛科技"></a>雷赛科技</h2><p>控制卡</p><h2 id="步科"><a href="#步科" class="headerlink" title="步科"></a>步科</h2><p>界面 伺服</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;2023-工博会-草稿&quot;&gt;&lt;a href=&quot;#2023-工博会-草稿&quot; class=&quot;headerlink&quot; title=&quot;2023 工博会 (草稿)&quot;&gt;&lt;/a&gt;2023 工博会 (草稿)&lt;/h1&gt;&lt;p&gt;本次工博会, 还是本着 CNC 和 PLC 去看的,</summary>
        
      
    
    
    
    <category term="数控" scheme="https://lusipad.com/categories/%E6%95%B0%E6%8E%A7/"/>
    
    
    <category term="数控" scheme="https://lusipad.com/tags/%E6%95%B0%E6%8E%A7/"/>
    
    <category term="工博会" scheme="https://lusipad.com/tags/%E5%B7%A5%E5%8D%9A%E4%BC%9A/"/>
    
    <category term="CNC" scheme="https://lusipad.com/tags/CNC/"/>
    
    <category term="PLC" scheme="https://lusipad.com/tags/PLC/"/>
    
  </entry>
  
  <entry>
    <title>测试下加密功能</title>
    <link href="https://lusipad.com/2023/10/06/test-encrypt/"/>
    <id>https://lusipad.com/2023/10/06/test-encrypt/</id>
    <published>2023-10-06T06:33:59.000Z</published>
    <updated>2025-03-06T15:47:08.901Z</updated>
    
    <content type="html"><![CDATA[<h2 id="测试下加密功能"><a href="#测试下加密功能" class="headerlink" title="测试下加密功能"></a>测试下加密功能</h2><p>测试了下 <strong>hexo-blog-encrypt</strong> 插件, 但是发现个问题, 就是输入回车没有反应</p><p>所以最终还是删了</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;测试下加密功能&quot;&gt;&lt;a href=&quot;#测试下加密功能&quot; class=&quot;headerlink&quot; title=&quot;测试下加密功能&quot;&gt;&lt;/a&gt;测试下加密功能&lt;/h2&gt;&lt;p&gt;测试了下 &lt;strong&gt;hexo-blog-encrypt&lt;/strong&gt; 插件,</summary>
        
      
    
    
    
    
  </entry>
  
</feed>
